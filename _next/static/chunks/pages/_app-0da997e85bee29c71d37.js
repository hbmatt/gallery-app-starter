(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{6156:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:function(){return r}})},8229:function(t,e,n){"use strict";n.d(e,{QK:function(){return Jv},H1:function(){return Wv},vY:function(){return zv},AB:function(){return Xv}});var r=n(655),i=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var h=a<<4&240|s>>2;if(r.push(h),64!==u){var l=s<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function a(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=a(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function u(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function c(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Kv){return!1}}var h=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,l.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),l=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?f(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new h(i,s,r);return u},t}();function f(t,e){return t.replace(p,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var p=/\{\$([^}]+)}/g;function d(t,e){return Object.prototype.hasOwnProperty.call(t,e)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782);i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();function v(t,e){var n=new m(t,e);return n.subscribe.bind(n)}var m=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=y),void 0===r.error&&(r.error=y),void 0===r.complete&&(r.complete=y);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(Kv){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(Kv){"undefined"!==typeof console&&console.error&&console.error(Kv)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function y(){}function g(t){return t&&t._delegate?t._delegate:t}var b=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),w="[DEFAULT]",_=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=w);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new s;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(Kv){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=(0,r.pi)({identifier:w,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);if(!this.isInitialized(o)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:o})}catch(Kv){if(i)return null;throw Kv}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:w})}catch(Kv){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.CR)(o.value,2),s=a[0],u=a[1],c=this.normalizeInstanceIdentifier(s);try{var h=this.getOrInitializeService({instanceIdentifier:c});u.resolve(h)}catch(Kv){}}}catch(l){e={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=w),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),(0,r.CR)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=w),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=void 0===i?w:i,a=t.options,s=void 0===a?{}:a,u=this.normalizeInstanceIdentifier(o);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:s});try{for(var h=(0,r.XA)(this.instancesDeferred.entries()),l=h.next();!l.done;l=h.next()){var f=(0,r.CR)(l.value,2),p=f[0],d=f[1];u===this.normalizeInstanceIdentifier(p)&&d.resolve(c)}}catch(v){e={error:v}}finally{try{l&&!l.done&&(n=h.return)&&n.call(h)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(c,u),c},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var o=(0,r.XA)(this.onInitCallbacks),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===w?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:w:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();var I,T=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new _(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function E(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var S,A=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(S||(S={}));var k,N={debug:S.DEBUG,verbose:S.VERBOSE,info:S.INFO,warn:S.WARN,error:S.ERROR,silent:S.SILENT},C=S.INFO,R=((I={})[S.DEBUG]="log",I[S.VERBOSE]="log",I[S.INFO]="info",I[S.WARN]="warn",I[S.ERROR]="error",I),D=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=R[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,E(["["+i+"]  "+t.name+":"],n))}},O=function(){function t(t){this.name=t,this._logLevel=C,this._logHandler=D,this._userLogHandler=null,A.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in S))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?N[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,E([this,S.DEBUG],t)),this._logHandler.apply(this,E([this,S.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,E([this,S.VERBOSE],t)),this._logHandler.apply(this,E([this,S.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,E([this,S.INFO],t)),this._logHandler.apply(this,E([this,S.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,E([this,S.WARN],t)),this._logHandler.apply(this,E([this,S.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,E([this,S.ERROR],t)),this._logHandler.apply(this,E([this,S.ERROR],t))},t}();function P(t){A.forEach((function(e){e.setLogLevel(t)}))}var x,L=((k={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",k["bad-app-name"]="Illegal App name: '{$appName}",k["duplicate-app"]="Firebase App named '{$appName}' already exists",k["app-deleted"]="Firebase App named '{$appName}' already deleted",k["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",k["invalid-log-argument"]="First argument to `onLog` must be null or a function.",k),M=new l("app","Firebase",L),U="@firebase/app",F="[DEFAULT]",V=((x={})[U]="fire-core",x["@firebase/analytics"]="fire-analytics",x["@firebase/app-check"]="fire-app-check",x["@firebase/auth"]="fire-auth",x["@firebase/database"]="fire-rtdb",x["@firebase/functions"]="fire-fn",x["@firebase/installations"]="fire-iid",x["@firebase/messaging"]="fire-fcm",x["@firebase/performance"]="fire-perf",x["@firebase/remote-config"]="fire-rc",x["@firebase/storage"]="fire-gcs",x["@firebase/firestore"]="fire-fst",x["fire-js"]="fire-js",x["firebase-wrapper"]="fire-js-all",x),j=new O("@firebase/app"),q=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=a(void 0,t),this.container=new T(e.name),this._addComponent(new b("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=F),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=F),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(Kv){j.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,Kv)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw M.create("app-deleted",{appName:this.name_})},t}();q.prototype.name&&q.prototype.options||q.prototype.delete||console.log("dc");function B(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!==typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=F);var a=o.name;if("string"!==typeof a||!a)throw M.create("bad-app-name",{appName:String(a)});if(d(e,a))throw M.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=V[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void j.warn(u.join(" "))}o(new b(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:P,onLog:function(t,e){if(null!==t&&"function"!==typeof t)throw M.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=N[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:S[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=A;r<i.length;r++)n(i[r])}(t,e)},apps:null,SDK_VERSION:"8.6.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!d(e,t=t||F))throw M.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return j.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!==typeof t[s])throw M.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&a(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++){var l=h[c];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}var G=function t(){var e=B(q);return e.INTERNAL=(0,r.pi)((0,r.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){a(e,t)},createSubscribe:v,ErrorFactory:l,deepExtend:a}),e}(),K=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if("object"===typeof self&&self.self===self&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var H=self.firebase.SDK_VERSION;H&&H.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var z=G.initializeApp;G.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return c()&&j.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),z.apply(void 0,t)};var W=G;!function(t,e){t.INTERNAL.registerComponent(new b("platform-logger",(function(t){return new K(t)}),"PRIVATE")),t.registerVersion(U,"0.6.22",e),t.registerVersion("fire-js","")}(W);var J=W;J.registerVersion("firebase","8.6.3","app");var X="firebasestorage.googleapis.com",Q=function(t){function e(n,r){var i=t.call(this,Y(n),"Firebase Storage: "+r+" ("+Y(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return(0,r.ZT)(e,t),e.prototype._codeEquals=function(t){return Y(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(h);function Y(t){return"storage/"+t}function $(){return new Q("unknown","An unknown error occurred, please check the error payload for server response.")}function Z(){return new Q("canceled","User canceled the upload/download.")}function tt(){return new Q("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function et(t){return new Q("invalid-argument",t)}function nt(){return new Q("app-deleted","The Firebase app was deleted.")}function rt(t){return new Q("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function it(t,e){return new Q("invalid-format","String does not match format '"+t+"': "+e)}function ot(t){throw new Q("internal-error","Internal error: "+t)}var at={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},st=function(t,e){this.data=t,this.contentType=e||null};function ut(t,e){switch(t){case at.RAW:return new st(ct(e));case at.BASE64:case at.BASE64URL:return new st(ht(t,e));case at.DATA_URL:return new st(function(t){var e=new lt(t);return e.base64?ht(at.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(Kv){throw it(at.DATA_URL,"Malformed data URL.")}return ct(e)}(e.rest)}(e),new lt(e).contentType)}throw $()}function ct(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<t.length-1&&56320===(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320===(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function ht(t,e){switch(t){case at.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw it(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case at.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw it(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(Kv){throw it(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var lt=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw it(at.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i};var ft,pt={STATE_CHANGED:"state_changed"},dt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function vt(t){switch(t){case"running":case"pausing":case"canceling":return dt.RUNNING;case"paused":return dt.PAUSED;case"success":return dt.SUCCESS;case"canceled":return dt.CANCELED;case"error":default:return dt.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(ft||(ft={}));var mt=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=ft.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=ft.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=ft.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw ot("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw ot("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw ot("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Kv){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw ot("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),yt=function(){function t(){}return t.prototype.createXhrIo=function(){return new mt},t}(),gt=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(Kv){return new t(e,"")}if(""===r.path)return r;throw new Q("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(t){t.path_=decodeURIComponent(t.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+(n===X?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<u.length;c++){var h=u[c],l=h.regex.exec(e);if(l){var f=l[h.indices.bucket],p=l[h.indices.path];p||(p=""),r=new t(f,p),h.postModify(r);break}}if(null==r)throw function(t){return new Q("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),bt=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function wt(t){return"string"===typeof t||t instanceof String}function _t(t){return It()&&t instanceof Blob}function It(){return"undefined"!==typeof Blob}function Tt(t,e,n,r){if(r<e)throw et("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw et("Invalid value for '"+t+"'. Expected "+n+" or less.")}function Et(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null===n||void 0===n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function St(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}var At=function(){function t(t,e,n,r,i,o,a,s,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());!function(t){return void 0!==t}(s)?i():i(s)}catch(Kv){o(Kv)}else null!==a?((r=$()).serverResponse=a.getResponseText(),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?nt():Z()):o(r=new Q("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new kt(!1,null,!0)):this.backoffId_=function(t,e,n){var i=1,o=null,a=!1,s=0;function u(){return 2===s}var c=!1;function h(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];c||(c=!0,e.apply(null,t))}function l(e){o=setTimeout((function(){o=null,t(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)h.call.apply(h,(0,r.ev)([null,t],e));else{var o;u()||a?h.call.apply(h,(0,r.ev)([null,t],e)):(i<64&&(i*=2),1===s?(s=2,o=0):o=1e3*(i+Math.random()),l(o))}}var p=!1;function d(t){p||(p=!0,c||(null!==o?(t||(s=2),clearTimeout(o),l(0)):t||(s=1)))}return l(0),setTimeout((function(){a=!0,d(!0)}),n),d}((function(e,n){if(n)e(!1,new kt(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===ft.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new kt(a,n))}else{var s=n.getErrorCode()===ft.ABORT;e(!1,new kt(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),kt=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function Nt(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Ct(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Nt();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(It())return new Blob(t);throw new Q("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Rt=function(){function t(t,e){var n=0,r="";_t(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(_t(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(It()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(Ct.apply(null,r))}var i=e.map((function(t){return wt(t)?ut(at.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function Dt(t){var e;try{e=JSON.parse(t)}catch(Kv){return null}return function(t){return"object"===typeof t&&!Array.isArray(t)}(e)?e:null}function Ot(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Pt(t,e){return e}var xt=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Pt},Lt=null;function Mt(){if(Lt)return Lt;var t=[];t.push(new xt("bucket")),t.push(new xt("generation")),t.push(new xt("metageneration")),t.push(new xt("name","fullPath",!0));var e=new xt("name");e.xform=function(t,e){return function(t){return!wt(t)||t.length<2?t:Ot(t)}(e)},t.push(e);var n=new xt("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new xt("timeCreated")),t.push(new xt("updated")),t.push(new xt("md5Hash",null,!0)),t.push(new xt("cacheControl",null,!0)),t.push(new xt("contentDisposition",null,!0)),t.push(new xt("contentEncoding",null,!0)),t.push(new xt("contentLanguage",null,!0)),t.push(new xt("contentType",null,!0)),t.push(new xt("metadata","customMetadata",!0)),Lt=t}function Ut(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new gt(n,r);return e._makeStorageReference(i)}})}(r,t),r}function Ft(t,e,n){var r=Dt(e);return null===r?null:Ut(t,r,n)}function Vt(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function jt(t,e,n){var r=Dt(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new gt(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var h=c[u];s=t._makeStorageReference(new gt(e,h.name)),r.items.push(s)}return r}(t,e,r)}var qt=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Bt(t){if(!t)throw $()}function Gt(t,e){return function(n,r){var i=Ft(t,r,e);return Bt(null!==i),i}}function Kt(t,e){return function(n,r){var i=Ft(t,r,e);return Bt(null!==i),function(t,e,n){var r=Dt(e);if(null===r)return null;if(!wt(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return Et("/b/"+o(r)+"/o/"+o(i),n)+St({alt:"media",token:e})}))[0]}(i,r,t.host)}}function Ht(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new Q("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Q("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new Q("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new Q("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function zt(t){var e=Ht(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new Q("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function Wt(t,e,n){var r=Et(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new qt(r,"GET",Gt(t,n),i);return o.errorHandler=zt(e),o}function Jt(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=Et(e.bucketOnlyServerUrl(),t.host),s=t.maxOperationRetryTime,u=new qt(a,"GET",function(t,e){return function(n,r){var i=jt(t,e,r);return Bt(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=Ht(e),u}function Xt(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var Qt=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function Yt(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(Kv){Bt(!1)}return Bt(!!n&&-1!==(e||["active"]).indexOf(n)),n}var $t=262144;function Zt(t,e,n,r,i,o,a,s){var u=new Qt(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Q("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,p={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(l,f);if(null===d)throw tt();var v=e.maxUploadRetryTime,m=new qt(n,"POST",(function(t,n){var i,a=Yt(t,["active","final"]),s=u.current+h,c=r.size();return i="final"===a?Gt(e,o)(t,n):null,new Qt(s,c,"final"===a,i)}),v);return m.headers=p,m.body=d.uploadData(),m.progressCallback=s||null,m.errorHandler=Ht(t),m}var te=function(t,e,n){if(function(t){return"function"===typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};function ee(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var ne=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Mt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=Xt(e,r,i),s={name:a.fullPath},u=Et(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},h=Vt(a,n),l=t.maxUploadRetryTime,f=new qt(u,"POST",(function(t){var e;Yt(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(Kv){Bt(!1)}return Bt(wt(e)),e}),l);return f.urlParams=s,f.headers=c,f.body=h,f.errorHandler=Ht(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new qt(n,"POST",(function(t){var e=Yt(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Kv){Bt(!1)}n||Bt(!1);var i=Number(n);return Bt(!isNaN(i)),new Qt(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Ht(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=$t*this._chunkMultiplier,n=new Qt(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=Zt(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(Kv){return t._error=Kv,void t._transition("error")}var s=t._ref.storage._makeRequest(a,i,o);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){$t*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=Wt(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=Xt(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Vt(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+s+"--",l=Rt.getBlob(c,r,h);if(null===l)throw tt();var f={name:u.fullPath},p=Et(o,t.host),d=t.maxUploadRetryTime,v=new qt(p,"POST",Gt(t,n),d);return v.urlParams=f,v.headers=a,v.body=l.uploadData(),v.errorHandler=Ht(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Z(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=vt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new te(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(vt(this._state)){case dt.SUCCESS:ee(this._resolve.bind(null,this.snapshot))();break;case dt.CANCELED:case dt.ERROR:ee(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(vt(this._state)){case dt.RUNNING:case dt.PAUSED:t.next&&ee(t.next.bind(t,this.snapshot))();break;case dt.SUCCESS:t.complete&&ee(t.complete.bind(t))();break;case dt.CANCELED:case dt.ERROR:t.error&&ee(t.error.bind(t,this._error))();break;default:t.error&&ee(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),re=function(){function t(t,e){this._service=t,this._location=e instanceof gt?e:gt.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new gt(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Ot(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new gt(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw rt(t)},t}();function ie(t){var e={prefixes:[],items:[]};return oe(t,e).then((function(){return e}))}function oe(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,a;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,ae(t,{pageToken:n})];case 1:return i=r.sent(),(o=e.prefixes).push.apply(o,i.prefixes),(a=e.items).push.apply(a,i.items),null==i.nextPageToken?[3,3]:[4,oe(t,e,i.nextPageToken)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}function ae(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return null!=e&&"number"===typeof e.maxResults&&Tt("options.maxResults",1,1e3,e.maxResults),n=e||{},i=Jt(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(i)];case 1:return[2,r.sent().getPromise()]}}))}))}function se(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=Et(e.fullServerUrl(),t.host),o=Vt(n,r),a=t.maxOperationRetryTime,s=new qt(i,"PATCH",Gt(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=zt(e),s}(t.storage,t._location,e,Mt()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function ue(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=Et(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new qt(r,"GET",Kt(t,n),i);return o.errorHandler=zt(e),o}(t.storage,t._location,Mt()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new Q("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function ce(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=Et(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new qt(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=zt(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function he(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new gt(t._location.bucket,n);return new re(t.storage,r)}function le(t){return/^[A-Za-z]+:\/\//.test(t)}function fe(t,e){if(t instanceof ve){var n=t;if(null==n._bucket)throw new Q("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new re(n,n._bucket);return null!=e?fe(r,e):r}if(void 0!==e){if(e.includes(".."))throw et('`path` param cannot contain ".."');return he(t,e)}return t}function pe(t,e){if(e&&le(e)){if(t instanceof ve)return new re(t,e);throw et("To use ref(service, url), the first argument must be a Storage instance.")}return fe(t,e)}function de(t,e){var n=null===e||void 0===e?void 0:e.storageBucket;return null==n?null:gt.makeFromBucketSpec(n,t)}var ve=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=X,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?gt.makeFromBucketSpec(i,this._host):de(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=gt.makeFromBucketSpec(this._url,t):this._bucket=de(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Tt("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Tt("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new re(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new bt(nt());var i=function(t,e,n,r,i,o){var a=St(t.urlParams),s=t.url+a,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new At(s,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=r.sent(),n=e[0],i=e[1],[2,this._makeRequest(t,n,i)]}}))}))},t}();function me(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new ne(t,new Rt(e),n)}(t=g(t),e,n)}function ye(t){return function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=Wt(t.storage,t._location,Mt()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=g(t))}function ge(t,e){return pe(t=g(t),e)}var be=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),we=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new be(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new be(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"===typeof e?function(t){return e(new be(t,i,i._ref))}:{next:e.next?function(t){return e.next(new be(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),_e=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new Ie(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new Ie(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Ie=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return he(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new we(me(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=at.RAW),this._throwIfRoot("putString");var i=ut(e,t),o=(0,r.pi)({},n);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new we(new ne(this._delegate,new Rt(i.data,!0),o),this)},t.prototype.listAll=function(){var t=this;return function(t){return ie(t=g(t))}(this._delegate).then((function(e){return new _e(e,t.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return ae(t=g(t),e)}(this._delegate,t||void 0).then((function(t){return new _e(t,e.storage)}))},t.prototype.getMetadata=function(){return ye(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return se(t=g(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return ue(t=g(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return ce(t=g(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw rt(t)},t}(),Te=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(le(t))throw et("ref() expected a child path but got a URL, use refFromURL instead.");return new Ie(ge(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!le(t))throw et("refFromURL() expected a full URL but got a child path, use ref() instead.");try{gt.makeFromUrl(t,this._delegate.host)}catch(Kv){throw et("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ie(ge(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function Ee(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Te(r,new ve(r,i,o,new yt,n,J.SDK_VERSION))}!function(t){var e={TaskState:dt,TaskEvent:pt,StringFormat:at,Storage:ve,Reference:Ie};t.INTERNAL.registerComponent(new b("storage",Ee,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.5.2")}(J);var Se=function(t,e){return(Se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ae(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ke,Ne="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Ce=Ce||{},Re=Ne||self;function De(){}function Oe(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Pe(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var xe="closure_uid_"+(1e9*Math.random()>>>0),Le=0;function Me(t,e,n){return t.call.apply(t.bind,arguments)}function Ue(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Fe(t,e,n){return(Fe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Me:Ue).apply(null,arguments)}function Ve(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function je(){return Date.now()}function qe(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Be(){this.j=this.j,this.i=this.i}Be.prototype.j=!1,Be.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,xe)&&t[xe]||(t[xe]=++Le)})(this)},Be.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Ge=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ke=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function He(t){return Array.prototype.concat.apply([],arguments)}function ze(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function We(t){return/^[\s\xa0]*$/.test(t)}var Je,Xe=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Qe(t,e){return-1!=t.indexOf(e)}function Ye(t,e){return t<e?-1:t>e?1:0}t:{var $e=Re.navigator;if($e){var Ze=$e.userAgent;if(Ze){Je=Ze;break t}}Je=""}function tn(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function en(t){var e={};for(var n in t)e[n]=t[n];return e}var nn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rn(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<nn.length;o++)n=nn[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function on(t){return on[" "](t),t}on[" "]=De;var an,sn=Qe(Je,"Opera"),un=Qe(Je,"Trident")||Qe(Je,"MSIE"),cn=Qe(Je,"Edge"),hn=cn||un,ln=Qe(Je,"Gecko")&&!(Qe(Je.toLowerCase(),"webkit")&&!Qe(Je,"Edge"))&&!(Qe(Je,"Trident")||Qe(Je,"MSIE"))&&!Qe(Je,"Edge"),fn=Qe(Je.toLowerCase(),"webkit")&&!Qe(Je,"Edge");function pn(){var t=Re.document;return t?t.documentMode:void 0}t:{var dn="",vn=function(){var t=Je;return ln?/rv:([^\);]+)(\)|;)/.exec(t):cn?/Edge\/([\d\.]+)/.exec(t):un?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):fn?/WebKit\/(\S+)/.exec(t):sn?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(vn&&(dn=vn?vn[1]:""),un){var mn=pn();if(null!=mn&&mn>parseFloat(dn)){an=String(mn);break t}}an=dn}var yn,gn={};function bn(t){return function(t,e){var n=gn;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=Xe(String(an)).split("."),r=Xe(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=Ye(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||Ye(0==a[2].length,0==s[2].length)||Ye(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(Re.document&&un){var wn=pn();yn=wn||(parseInt(an,10)||void 0)}else yn=void 0;var _n=yn,In=!un||9<=Number(_n),Tn=un&&!bn("9"),En=function(){if(!Re.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Re.addEventListener("test",De,e),Re.removeEventListener("test",De,e)}catch(n){}return t}();function Sn(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function An(t,e){if(Sn.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ln){t:{try{on(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:kn[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Sn.prototype.b=function(){this.defaultPrevented=!0},qe(An,Sn);var kn={2:"touch",3:"pen",4:"mouse"};An.prototype.b=function(){An.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Tn)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Nn="closure_listenable_"+(1e6*Math.random()|0),Cn=0;function Rn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Cn,this.Y=this.Z=!1}function Dn(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function On(t){this.src=t,this.a={},this.b=0}function Pn(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Ge(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Dn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function xn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}On.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=xn(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new Rn(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ln="closure_lm_"+(1e6*Math.random()|0),Mn={};function Un(t,e,n,r,i){if(r&&r.once)return Vn(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Un(t,e[o],n,r,i);return null}return n=Wn(n),t&&t[Nn]?t.va(e,n,Pe(r)?!!r.capture:!!r,i):Fn(t,e,n,!1,r,i)}function Fn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=Pe(i)?!!i.capture:!!i;if(a&&!In)return null;var s=Hn(t);if(s||(t[Ln]=s=new On(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=Kn,e=In?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)En||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Bn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Vn(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Vn(t,e[o],n,r,i);return null}return n=Wn(n),t&&t[Nn]?t.wa(e,n,Pe(r)?!!r.capture:!!r,i):Fn(t,e,n,!0,r,i)}function jn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)jn(t,e[o],n,r,i);else r=Pe(r)?!!r.capture:!!r,n=Wn(n),t&&t[Nn]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=xn(o=t.a[e],n,r,i))&&(Dn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Hn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=xn(e,n,r,i)),(n=-1<t?e[t]:null)&&qn(n))}function qn(t){if("number"!==typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Nn])Pn(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Bn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Hn(e))?(Pn(n,t),0==n.b&&(n.src=null,e[Ln]=null)):Dn(t)}}}function Bn(t){return t in Mn?Mn[t]:Mn[t]="on"+t}function Gn(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&qn(t),n.call(r,e)}function Kn(t,e){if(t.Y)return!0;if(!In){if(!e)t:{e=["window","event"];for(var n=Re,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Gn(t,e=new An(e,this))}return Gn(t,new An(e,this))}function Hn(t){return(t=t[Ln])instanceof On?t:null}var zn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wn(t){return"function"===typeof t?t:(t[zn]||(t[zn]=function(e){return t.handleEvent(e)}),t[zn])}function Jn(){Be.call(this),this.c=new On(this),this.J=this,this.C=null}function Xn(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"===typeof e)e=new Sn(e,t);else if(e instanceof Sn)e.target=e.target||t;else{var i=e;rn(e=new Sn(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=Qn(a,r,!0,e)&&i}if(i=Qn(a=e.a=t,r,!0,e)&&i,i=Qn(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Qn(a=e.a=n[o],r,!1,e)&&i}function Qn(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&Pn(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}qe(Jn,Be),Jn.prototype[Nn]=!0,(ke=Jn.prototype).addEventListener=function(t,e,n,r){Un(this,t,e,n,r)},ke.removeEventListener=function(t,e,n,r){jn(this,t,e,n,r)},ke.G=function(){if(Jn.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Dn(n[r]);delete e.a[t],e.b--}}this.C=null},ke.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ke.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Yn=Re.JSON.stringify;function $n(){this.b=this.a=null}var Zn,tr=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new nr}),(function(t){t.reset()}));function er(){var t=ar,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function nr(){this.next=this.b=this.a=null}function rr(t){Re.setTimeout((function(){throw t}),0)}function ir(t,e){Zn||function(){var t=Re.Promise.resolve(void 0);Zn=function(){t.then(sr)}}(),or||(Zn(),or=!0),ar.add(t,e)}$n.prototype.add=function(t,e){var n=tr.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},nr.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},nr.prototype.reset=function(){this.next=this.b=this.a=null};var or=!1,ar=new $n;function sr(){for(var t;t=er();){try{t.a.call(t.b)}catch(n){rr(n)}var e=tr;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}or=!1}function ur(t,e){Jn.call(this),this.b=t||1,this.a=e||Re,this.f=Fe(this.Za,this),this.g=je()}function cr(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function hr(t,e,n){if("function"===typeof t)n&&(t=Fe(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Fe(t.handleEvent,t)}return 2147483647<Number(e)?-1:Re.setTimeout(t,e||0)}function lr(t){t.a=hr((function(){t.a=null,t.c&&(t.c=!1,lr(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}qe(ur,Jn),(ke=ur.prototype).aa=!1,ke.M=null,ke.Za=function(){if(this.aa){var t=je()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Xn(this,"tick"),this.aa&&(cr(this),this.start()))}},ke.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=je())},ke.G=function(){ur.X.G.call(this),cr(this),delete this.a};var fr=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Se(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:lr(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Re.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Be);function pr(t){Be.call(this),this.b=t,this.a={}}qe(pr,Be);var dr=[];function vr(t,e,n,r){Array.isArray(n)||(n&&(dr[0]=n.toString()),n=dr);for(var i=0;i<n.length;i++){var o=Un(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function mr(t){tn(t.a,(function(t,e){this.a.hasOwnProperty(e)&&qn(t)}),t),t.a={}}function yr(){this.a=!0}function gr(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Yn(n)}catch(s){return e}}(t,n)+(r?" "+r:"")}))}pr.prototype.G=function(){pr.X.G.call(this),mr(this)},pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yr.prototype.info=function(){};var br={},wr=null;function _r(){return wr=wr||new Jn}function Ir(t){Sn.call(this,br.Fa,t)}function Tr(t){var e=_r();Xn(e,new Ir(e,t))}function Er(t,e){Sn.call(this,br.STAT_EVENT,t),this.stat=e}function Sr(t){var e=_r();Xn(e,new Er(e,t))}function Ar(t){Sn.call(this,br.Ga,t)}function kr(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return Re.setTimeout((function(){t()}),e)}br.Fa="serverreachability",qe(Ir,Sn),br.STAT_EVENT="statevent",qe(Er,Sn),br.Ga="timingevent",qe(Ar,Sn);var Nr={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Cr={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Rr(){}function Dr(t){var e;return(e=t.a)||(e=t.a={}),e}function Or(){}Rr.prototype.a=null;var Pr,xr={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Lr(){Sn.call(this,"d")}function Mr(){Sn.call(this,"c")}function Ur(){}function Fr(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new pr(this),this.P=Vr,t=hn?125:void 0,this.R=new ur(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}qe(Lr,Sn),qe(Mr,Sn),qe(Ur,Rr),Pr=new Ur;var Vr=45e3,jr={},qr={};function Br(t,e,n){t.H=1,t.i=hi(ii(e)),t.j=n,t.I=!0,Gr(t,null)}function Gr(t,e){t.u=je(),zr(t),t.l=ii(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Ti(n.b,"t",r),t.D=0,t.a=go(t.g,t.g.C?e:null),0<t.O&&(t.F=new fr(Fe(t.Ca,t,t.a),t.O)),vr(t.J,t.a,"readystatechange",t.Xa),e=t.B?en(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Tr(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");a=2<=l.length&&"type"==l[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Kr(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Hr(t,n);if(i==qr){4==e&&(t.h=4,Sr(14),r=!1),gr(t.c,t.f,null,"[Incomplete Response]");break}if(i==jr){t.h=4,Sr(15),gr(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}gr(t.c,t.f,i,null),Yr(t,i)}4==e&&0==n.length&&(t.h=1,Sr(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),co(e),e.F=!0,Sr(11))):(gr(t.c,t.f,n,"[Invalid Chunked Response]"),Qr(t),Xr(t))}function Hr(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?qr:(n=Number(e.substring(n,r)),isNaN(n)?jr:(r+=1)+n>e.length?qr:(e=e.substr(r,n),t.D=r+n,e))}function zr(t){t.T=je()+t.P,Wr(t,t.P)}function Wr(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=kr(Fe(t.Va,t),e)}function Jr(t){t.o&&(Re.clearTimeout(t.o),t.o=null)}function Xr(t){0==t.g.v||t.A||fo(t.g,t)}function Qr(t){Jr(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,cr(t.R),mr(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Yr(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Ri(n.b,t)))if(n.I=t.N,!t.C&&Ri(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(iv){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;lo(n),to(n)}uo(n),Sr(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=kr(Fe(n.Sa,n),6e3));if(1>=Ci(n.b)&&n.ea){try{n.ea()}catch(iv){}n.ea=void 0}}else vo(n,11)}else if((t.C||n.a==t)&&lo(n),!We(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"===typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=u.b;!l.a&&(Qe(h,"spdy")||Qe(h,"quic")||Qe(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(Di(l,l.b),l.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,ci(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=je()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=yo(u,u.C?u.ga:null,u.fa),p.C){Oi(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Jr(d),zr(d)),u.a=p}else so(u);0<n.g.length&&ro(n)}else"stop"!=i[0]&&"close"!=i[0]||vo(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?vo(n,7):Zi(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Tr(4)}catch(iv){}}function $r(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Oe(t)||"string"===typeof t)Ke(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Oe(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"===typeof t)return t.split("");if(Oe(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Zr(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Zr)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ti(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];ei(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)ei(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function ei(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ke=Fr.prototype).setTimeout=function(t){this.P=t},ke.Xa=function(t){t=t.target;var e=this.F;e&&3==Xi(t)?e.f():this.Ca(t)},ke.Ca=function(t){try{if(t==this.a)t:{var e=Xi(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!hn&&!this.a.$())){this.A||4!=e||7==n||Tr(8==n||0>=r?3:2),Jr(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!We(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,Sr(12),Qr(this),Xr(this);break t}gr(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Yr(this,u)}this.I?(Kr(this,e,o),hn&&this.b&&3==e&&(vr(this.J,this.R,"tick",this.Wa),this.R.start())):(gr(this.c,this.f,o,null),Yr(this,o)),4==e&&Qr(this),this.b&&!this.A&&(4==e?fo(this.g,this):(this.b=!1,zr(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Sr(12)):(this.h=0,Sr(13)),Qr(this),Xr(this)}}}catch(c){}},ke.Wa=function(){if(this.a){var t=Xi(this.a),e=this.a.$();this.D<e.length&&(Jr(this),Kr(this,t,e),this.b&&4!=t&&zr(this))}},ke.cancel=function(){this.A=!0,Qr(this)},ke.Va=function(){this.o=null;var t=je();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Tr(3),Sr(17)),Qr(this),this.h=2,Xr(this)):Wr(this,this.T-t)},(ke=Zr.prototype).K=function(){ti(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ke.L=function(){return ti(this),this.a.concat()},ke.get=function(t,e){return ei(this.b,t)?this.b[t]:e},ke.set=function(t,e){ei(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ke.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ni=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ri(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ri){this.a=void 0!==e?e:t.a,oi(this,t.f),this.j=t.j,ai(this,t.c),si(this,t.h),this.g=t.g,e=t.b;var n=new bi;n.c=e.c,e.a&&(n.a=new Zr(e.a),n.b=e.b),ui(this,n),this.i=t.i}else t&&(n=String(t).match(ni))?(this.a=!!e,oi(this,n[1]||"",!0),this.j=li(n[2]||""),ai(this,n[3]||"",!0),si(this,n[4]),this.g=li(n[5]||"",!0),ui(this,n[6]||"",!0),this.i=li(n[7]||"")):(this.a=!!e,this.b=new bi(null,this.a))}function ii(t){return new ri(t)}function oi(t,e,n){t.f=n?li(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function ai(t,e,n){t.c=n?li(e,!0):e}function si(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function ui(t,e,n){e instanceof bi?(t.b=e,function(t,e){e&&!t.f&&(wi(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(_i(this,e),Ti(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=fi(e,yi)),t.b=new bi(e,t.a))}function ci(t,e,n){t.b.set(e,n)}function hi(t){return ci(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^je()).toString(36)),t}function li(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function fi(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,pi),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function pi(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ri.prototype.toString=function(){var t=[],e=this.f;e&&t.push(fi(e,di,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(fi(e,di,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(fi(n,"/"==n.charAt(0)?mi:vi,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",fi(n,gi)),t.join("")};var di=/[#\/\?@]/g,vi=/[#\?:]/g,mi=/[#\?]/g,yi=/[#\?@]/g,gi=/#/g;function bi(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function wi(t){t.a||(t.a=new Zr,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function _i(t,e){wi(t),e=Ei(t,e),ei(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,ei((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&ti(t)))}function Ii(t,e){return wi(t),e=Ei(t,e),ei(t.a.b,e)}function Ti(t,e,n){_i(t,e),0<n.length&&(t.c=null,t.a.set(Ei(t,e),ze(n)),t.b+=n.length)}function Ei(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(ke=bi.prototype).add=function(t,e){wi(this),this.c=null,t=Ei(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ke.forEach=function(t,e){wi(this),this.a.forEach((function(n,r){Ke(n,(function(n){t.call(e,n,r,this)}),this)}),this)},ke.L=function(){wi(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ke.K=function(t){wi(this);var e=[];if("string"===typeof t)Ii(this,t)&&(e=He(e,this.a.get(Ei(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=He(e,t[n])}return e},ke.set=function(t,e){return wi(this),this.c=null,Ii(this,t=Ei(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ke.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ke.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var Si=function(t,e){this.b=t,this.a=e};function Ai(t){this.g=t||ki,Re.PerformanceNavigationTiming?t=0<(t=Re.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Re.ia&&Re.ia.ya&&Re.ia.ya()&&Re.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var ki=10;function Ni(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Ci(t){return t.b?1:t.a?t.a.size:0}function Ri(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Di(t,e){t.a?t.a.add(e):t.b=e}function Oi(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Pi(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Ae(t.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return ze(t.c)}function xi(){}function Li(){this.a=new xi}function Mi(t,e,n){var r=n||"";try{$r(t,(function(t,n){var i=t;Pe(t)&&(i=Yn(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(Kv){throw e.push(r+"type="+encodeURIComponent("_badmap")),Kv}}function Ui(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Ai.prototype.cancel=function(){var t,e;if(this.c=Pi(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Ae(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},xi.prototype.stringify=function(t){return Re.JSON.stringify(t,void 0)},xi.prototype.parse=function(t){return Re.JSON.parse(t,void 0)};var Fi=Re.JSON.parse;function Vi(t){Jn.call(this),this.headers=new Zr,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=ji,this.D=this.F=!1}qe(Vi,Jn);var ji="",qi=/^https?$/i,Bi=["POST","PUT"];function Gi(t){return"content-type"==t.toLowerCase()}function Ki(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Hi(t),Wi(t)}function Hi(t){t.u||(t.u=!0,Xn(t,"complete"),Xn(t,"error"))}function zi(t){if(t.b&&"undefined"!=typeof Ce&&(!t.s[1]||4!=Xi(t)||2!=t.W()))if(t.l&&4==Xi(t))hr(t.za,0,t);else if(Xn(t,"readystatechange"),4==Xi(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(ni)[1]||null;if(!o&&Re.self&&Re.self.location){var a=Re.self.location.protocol;o=a.substr(0,a.length-1)}i=!qi.test(o?o.toLowerCase():"")}e=i}if(e)Xn(t,"complete"),Xn(t,"success");else{t.h=6;try{var s=2<Xi(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",Hi(t)}}finally{Wi(t)}}}function Wi(t,e){if(t.a){Ji(t);var n=t.a,r=t.s[0]?De:null;t.a=null,t.s=null,e||Xn(t,"ready");try{n.onreadystatechange=r}catch(Kv){}}}function Ji(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Re.clearTimeout(t.m),t.m=null)}function Xi(t){return t.a?t.a.readyState:0}function Qi(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return tn(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):ci(t,e,n))}function Yi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function $i(t){this.pa=0,this.g=[],this.c=new yr,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Yi("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Yi("baseRetryDelayMs",5e3,t),this.Ra=Yi("retryDelaySeedMs",1e4,t),this.Ma=Yi("forwardChannelMaxRetries",2,t),this.ma=Yi("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Ai(t&&t.concurrentRequestLimit),this.ka=new Li,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Zi(t){if(eo(t),3==t.v){var e=t.R++,n=ii(t.B);ci(n,"SID",t.J),ci(n,"RID",e),ci(n,"TYPE","terminate"),oo(t,n),(e=new Fr(t,t.c,e,void 0)).H=2,e.i=hi(ii(n)),n=!1,Re.navigator&&Re.navigator.sendBeacon&&(n=Re.navigator.sendBeacon(e.i.toString(),"")),!n&&Re.Image&&((new Image).src=e.i,n=!0),n||(e.a=go(e.g,null),e.a.ba(e.i)),e.u=je(),zr(e)}mo(t)}function to(t){t.a&&(co(t),t.a.cancel(),t.a=null)}function eo(t){to(t),t.j&&(Re.clearTimeout(t.j),t.j=null),lo(t),t.b.cancel(),t.h&&("number"===typeof t.h&&Re.clearTimeout(t.h),t.h=null)}function no(t,e){t.g.push(new Si(t.Oa++,e)),3==t.v&&ro(t)}function ro(t){Ni(t.b)||t.h||(t.h=!0,ir(t.Ba,t),t.u=0)}function io(t,e){var n;n=e?e.f:t.R++;var r=ii(t.B);ci(r,"SID",t.J),ci(r,"RID",n),ci(r,"AID",t.P),oo(t,r),t.i&&t.l&&Qi(r,t.i,t.l),n=new Fr(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ao(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Di(t.b,n),Br(n,r,e)}function oo(t,e){t.f&&$r({},(function(t,n){ci(e,n,t)}))}function ao(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Fe(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{Mi(h,a,"req"+c+"_")}catch($o){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function so(t){t.a||t.j||(t.T=1,ir(t.Aa,t),t.o=0)}function uo(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=kr(Fe(t.Aa,t),po(t,t.o)),t.o++,!0)}function co(t){null!=t.s&&(Re.clearTimeout(t.s),t.s=null)}function ho(t){t.a=new Fr(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=ii(t.la);ci(e,"RID","rpc"),ci(e,"SID",t.J),ci(e,"CI",t.H?"0":"1"),ci(e,"AID",t.P),oo(t,e),ci(e,"TYPE","xmlhttp"),t.i&&t.l&&Qi(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=hi(ii(e)),n.j=null,n.I=!0,Gr(n,t)}function lo(t){null!=t.m&&(Re.clearTimeout(t.m),t.m=null)}function fo(t,e){var n=null;if(t.a==e){lo(t),co(t),t.a=null;var r=2}else{if(!Ri(t.b,e))return;n=e.s,Oi(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=je()-e.u;var i=t.u;Xn(r=_r(),new Ar(r,n,e,i)),ro(t)}else so(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Ci(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.g=e.s.concat(t.g),!0):!(1==t.v||2==t.v||t.u>=(t.La?0:t.Ma))&&(t.h=kr(Fe(t.Ba,t,e),po(t,t.u)),t.u++,!0))}(t,e)||2==r&&uo(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:vo(t,5);break;case 4:vo(t,10);break;case 3:vo(t,6);break;default:vo(t,2)}}function po(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function vo(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Fe(t.Ya,t);n||(n=new ri("//www.google.com/images/cleardot.gif"),Re.location&&"http"==Re.location.protocol||oi(n,"https"),hi(n)),function(t,e){var n=new yr;if(Re.Image){var r=new Image;r.onload=Ve(Ui,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ve(Ui,n,r,"TestLoadImage: error",!1,e),r.onabort=Ve(Ui,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ve(Ui,n,r,"TestLoadImage: timeout",!1,e),Re.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Sr(2);t.v=0,t.f&&t.f.ra(e),mo(t),eo(t)}function mo(t){t.v=0,t.I=-1,t.f&&(0==Pi(t.b).length&&0==t.g.length||(t.b.c.length=0,ze(t.g),t.g.length=0),t.f.qa())}function yo(t,e,n){var r=function(t){return t instanceof ri?ii(t):new ri(t,void 0)}(n);if(""!=r.c)e&&ai(r,e+"."+r.c),si(r,r.h);else{var i=Re.location;r=function(t,e,n,r){var i=new ri(null,void 0);return t&&oi(i,t),e&&ai(i,e),n&&si(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&tn(t.V,(function(t,e){ci(r,e,t)})),e=t.A,n=t.na,e&&n&&ci(r,e,n),ci(r,"VER",t.ha),oo(t,r),r}function go(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vi(t.Na)).F=t.C,e}function bo(){}function wo(){if(un&&!(10<=Number(_n)))throw Error("Environmental error: no available transport.")}function _o(t,e){Jn.call(this),this.a=new $i(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!We(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!We(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Eo(this)}function Io(t){Lr.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function To(){Mr.call(this),this.status=1}function Eo(t){this.a=t}(ke=Vi.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Dr(this.H):Dr(Pr),this.a.onreadystatechange=Fe(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Ki(this,o)}t=n||"";var i=new Zr(this.headers);r&&$r(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Gi,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(i.L()),n=Re.FormData&&t instanceof Re.FormData,!(0<=Ge(Bi,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ji(this),0<this.o&&((this.D=function(t){return un&&bn(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Fe(this.xa,this)):this.m=hr(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Ki(this,o)}},ke.xa=function(){"undefined"!=typeof Ce&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Xn(this,"timeout"),this.abort(8))},ke.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Xn(this,"complete"),Xn(this,"abort"),Wi(this))},ke.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Wi(this,!0)),Vi.X.G.call(this)},ke.za=function(){this.j||(this.A||this.l||this.g?zi(this):this.Ua())},ke.Ua=function(){zi(this)},ke.W=function(){try{return 2<Xi(this)?this.a.status:-1}catch(t){return-1}},ke.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},ke.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Fi(e)}},ke.ua=function(){return this.h},ke.Qa=function(){return"string"===typeof this.f?this.f:String(this.f)},(ke=$i.prototype).ha=8,ke.v=1,ke.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Fr(this,this.c,t,void 0),r=this.l;if(this.O&&(r?rn(r=en(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"===typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ao(this,n,e),ci(i=ii(this.B),"RID",t),ci(i,"CVER",22),this.A&&ci(i,"X-HTTP-Session-Id",this.A),oo(this,i),this.i&&r&&Qi(i,this.i,r),Di(this.b,n),this.Ia&&ci(i,"TYPE","init"),this.da?(ci(i,"$req",e),ci(i,"SID","null"),n.U=!0,Br(n,i,null)):Br(n,i,e),this.v=2}}else 3==this.v&&(t?io(this,t):0==this.g.length||Ni(this.b)||io(this))},ke.Aa=function(){if(this.j=null,ho(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=kr(Fe(this.Ta,this),t)}},ke.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Sr(10),to(this),ho(this))},ke.Sa=function(){null!=this.m&&(this.m=null,to(this),uo(this),Sr(19))},ke.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Sr(2)):(this.c.info("Failed to ping google.com"),Sr(1))},(ke=bo.prototype).ta=function(){},ke.sa=function(){},ke.ra=function(){},ke.qa=function(){},ke.Ja=function(){},wo.prototype.a=function(t,e){return new _o(t,e)},qe(_o,Jn),_o.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Sr(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=yo(t,null,t.fa),ro(t)},_o.prototype.close=function(){Zi(this.a)},_o.prototype.h=function(t){if("string"===typeof t){var e={};e.__data__=t,no(this.a,e)}else this.l?((e={}).__data__=Yn(t),no(this.a,e)):no(this.a,t)},_o.prototype.G=function(){this.a.f=null,delete this.f,Zi(this.a),delete this.a,_o.X.G.call(this)},qe(Io,Lr),qe(To,Mr),qe(Eo,bo),Eo.prototype.ta=function(){Xn(this.a,"a")},Eo.prototype.sa=function(t){Xn(this.a,new Io(t))},Eo.prototype.ra=function(t){Xn(this.a,new To(t))},Eo.prototype.qa=function(){Xn(this.a,"b")},wo.prototype.createWebChannel=wo.prototype.a,_o.prototype.send=_o.prototype.h,_o.prototype.open=_o.prototype.g,_o.prototype.close=_o.prototype.close,Nr.NO_ERROR=0,Nr.TIMEOUT=8,Nr.HTTP_ERROR=6,Cr.COMPLETE="complete",Or.EventType=xr,xr.OPEN="a",xr.CLOSE="b",xr.ERROR="c",xr.MESSAGE="d",Jn.prototype.listen=Jn.prototype.va,Vi.prototype.listenOnce=Vi.prototype.wa,Vi.prototype.getLastError=Vi.prototype.Qa,Vi.prototype.getLastErrorCode=Vi.prototype.ua,Vi.prototype.getStatus=Vi.prototype.W,Vi.prototype.getResponseJson=Vi.prototype.Pa,Vi.prototype.getResponseText=Vi.prototype.$,Vi.prototype.send=Vi.prototype.ba;var So=function(){return new wo},Ao=function(){return _r()},ko=Nr,No=Cr,Co=br,Ro={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},Do=Or,Oo=Vi,Po=n(4155),xo=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();xo.o=-1;var Lo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Mo=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,r.ZT)(e,t),e}(Error),Uo=new O("@firebase/firestore");function Fo(){return Uo.logLevel}function Vo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Uo.logLevel<=S.DEBUG){var i=e.map(Bo);Uo.debug.apply(Uo,(0,r.ev)(["Firestore (8.6.3): "+t],i))}}function jo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Uo.logLevel<=S.ERROR){var i=e.map(Bo);Uo.error.apply(Uo,(0,r.ev)(["Firestore (8.6.3): "+t],i))}}function qo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Uo.logLevel<=S.WARN){var i=e.map(Bo);Uo.warn.apply(Uo,(0,r.ev)(["Firestore (8.6.3): "+t],i))}}function Bo(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Go(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.3) INTERNAL ASSERTION FAILED: "+t;throw jo(e),new Error(e)}function Ko(t,e){t||Go()}function Ho(t,e){return t}function zo(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Wo=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=zo(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Jo(t,e){return t<e?-1:t>e?1:0}function Xo(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Qo(t){return t+"\0"}var Yo=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Mo(Lo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Mo(Lo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Mo(Lo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Mo(Lo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Jo(this.nanoseconds,t.nanoseconds):Jo(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),$o=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Yo(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Zo(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ta(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ea(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var na=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Go(),void 0===n?n=t.length-e:n>t.length-e&&Go(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ra=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(na),ia=/^[_a-zA-Z][_a-zA-Z0-9]*$/,oa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ia.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Mo(Lo.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Mo(Lo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Mo(Lo.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(na),aa=function(){function t(t){this.fields=t,t.sort(oa.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Xo(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),sa=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Jo(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();sa.EMPTY_BYTE_STRING=new sa("");var ua=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ca(t){if(Ko(!!t),"string"==typeof t){var e=0,n=ua.exec(t);if(Ko(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ha(t.seconds),nanos:ha(t.nanos)}}function ha(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function la(t){return"string"==typeof t?sa.fromBase64String(t):sa.fromUint8Array(t)}function fa(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function pa(t){var e=t.mapValue.fields.__previous_value__;return fa(e)?pa(e):e}function da(t){var e=ca(t.mapValue.fields.__local_write_time__.timestampValue);return new Yo(e.seconds,e.nanos)}function va(t){return null==t}function ma(t){return 0===t&&1/t==-1/0}function ya(t){return"number"==typeof t&&Number.isInteger(t)&&!ma(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ga=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(ra.fromString(e))},t.fromName=function(e){return new t(ra.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ra.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return ra.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new ra(e.slice()))},t}();function ba(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fa(t)?4:10:Go()}function wa(t,e){var n=ba(t);if(n!==ba(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return da(t).isEqual(da(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ca(t.timestampValue),r=ca(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return la(t.bytesValue).isEqual(la(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ha(t.geoPointValue.latitude)===ha(e.geoPointValue.latitude)&&ha(t.geoPointValue.longitude)===ha(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ha(t.integerValue)===ha(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ha(t.doubleValue),r=ha(e.doubleValue);return n===r?ma(n)===ma(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Xo(t.arrayValue.values||[],e.arrayValue.values||[],wa);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Zo(n)!==Zo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!wa(n[i],r[i])))return!1;return!0}(t,e);default:return Go()}}function _a(t,e){return void 0!==(t.values||[]).find((function(t){return wa(t,e)}))}function Ia(t,e){var n=ba(t),r=ba(e);if(n!==r)return Jo(n,r);switch(n){case 0:return 0;case 1:return Jo(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ha(t.integerValue||t.doubleValue),r=ha(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ta(t.timestampValue,e.timestampValue);case 4:return Ta(da(t),da(e));case 5:return Jo(t.stringValue,e.stringValue);case 6:return function(t,e){var n=la(t),r=la(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Jo(n[i],r[i]);if(0!==o)return o}return Jo(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Jo(ha(t.latitude),ha(e.latitude));return 0!==n?n:Jo(ha(t.longitude),ha(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ia(n[i],r[i]);if(o)return o}return Jo(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Jo(r[a],o[a]);if(0!==s)return s;var u=Ia(n[r[a]],i[o[a]]);if(0!==u)return u}return Jo(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Go()}}function Ta(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Jo(t,e);var n=ca(t),r=ca(e),i=Jo(n.seconds,r.seconds);return 0!==i?i:Jo(n.nanos,r.nanos)}function Ea(t){return Sa(t)}function Sa(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=ca(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?la(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ga.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Sa(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Sa(t.fields[o])}return e+"}"}(t.mapValue):Go();var e,n}function Aa(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function ka(t){return!!t&&"integerValue"in t}function Na(t){return!!t&&"arrayValue"in t}function Ca(t){return!!t&&"nullValue"in t}function Ra(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Da(t){return!!t&&"mapValue"in t}function Oa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},ca(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return ta(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Oa(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Oa(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Pa=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Da(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Oa(e)},t.prototype.setAll=function(t){var e=this,n=oa.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Oa(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Da(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return wa(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Da(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){ta(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(Oa(this.value))},t}();function xa(t){var e=[];return ta(t.fields,(function(t,n){var r=new oa([t]);if(Da(n)){var i=xa(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new aa(e)}var La=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,$o.min(),Pa.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Pa.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Pa.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Pa.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Pa.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Ma=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function Ua(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Ma(t,e,n,r,i,o,a)}function Fa(t){var e=Ho(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Ea(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),va(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ya(e.startAt)),e.endAt&&(n+="|ub:",n+=Ya(e.endAt)),e.h=n}return e.h}function Va(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Za(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!wa(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!es(t.startAt,e.startAt)&&es(t.endAt,e.endAt)}function ja(t){return ga.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var qa=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,r.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Ba(t,n,r):"array-contains"===n?new za(t,r):"in"===n?new Wa(t,r):"not-in"===n?new Ja(t,r):"array-contains-any"===n?new Xa(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Ga(t,n):new Ka(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Ia(e,this.value)):null!==e&&ba(this.value)===ba(e)&&this.m(Ia(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Go()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ba=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ga.fromName(r.referenceValue),i}return(0,r.ZT)(e,t),e.prototype.matches=function(t){var e=ga.comparator(t.key,this.key);return this.m(e)},e}(qa),Ga=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ha("in",n),r}return(0,r.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(qa),Ka=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ha("not-in",n),r}return(0,r.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(qa);function Ha(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ga.fromName(t.referenceValue)}))}var za=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,r.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Na(e)&&_a(e.arrayValue,this.value)},e}(qa),Wa=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,r.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&_a(this.value.arrayValue,e)},e}(qa),Ja=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,r.ZT)(e,t),e.prototype.matches=function(t){if(_a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!_a(this.value.arrayValue,e)},e}(qa),Xa=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,r.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Na(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return _a(e.value.arrayValue,t)}))},e}(qa),Qa=function(t,e){this.position=t,this.before=e};function Ya(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ea(t)})).join(",")}var $a=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Za(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ts(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?ga.comparator(ga.fromName(a.referenceValue),n.key):Ia(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function es(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!wa(t.position[n],e.position[n]))return!1;return!0}var ns=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function rs(t,e,n,r,i,o,a,s){return new ns(t,e,n,r,i,o,a,s)}function is(t){return new ns(t)}function os(t){return!va(t.limit)&&"F"===t.limitType}function as(t){return!va(t.limit)&&"L"===t.limitType}function ss(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function us(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function cs(t){return null!==t.collectionGroup}function hs(t){var e=Ho(t);if(null===e.p){e.p=[];var n=us(e),r=ss(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new $a(n)),e.p.push(new $a(oa.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new $a(oa.keyField(),u))}}}return e.p}function ls(t){var e=Ho(t);if(!e.T)if("F"===e.limitType)e.T=Ua(e.path,e.collectionGroup,hs(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=hs(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new $a(o.field,a))}var s=e.endAt?new Qa(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Qa(e.startAt.position,!e.startAt.before):null;e.T=Ua(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function fs(t,e,n){return new ns(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ps(t,e){return Va(ls(t),ls(e))&&t.limitType===e.limitType}function ds(t){return Fa(ls(t))+"|lt:"+t.limitType}function vs(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Ea(e.value);var e})).join(", ")+"]"),va(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ya(t.startAt)),t.endAt&&(e+=", endAt: "+Ya(t.endAt)),"Target("+e+")"}(ls(t))+"; limitType="+t.limitType+")"}function ms(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ga.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ts(t.startAt,hs(t),e))&&(!t.endAt||!ts(t.endAt,hs(t),e))}(t,e)}function ys(t){return function(e,n){for(var r=!1,i=0,o=hs(t);i<o.length;i++){var a=o[i],s=gs(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function gs(t,e,n){var r=t.field.isKeyField()?ga.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Ia(r,i):Go()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Go()}}function bs(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ma(e)?"-0":e}}function ws(t){return{integerValue:""+t}}function _s(t,e){return ya(e)?ws(e):bs(t,e)}var Is=function(){this._=void 0};function Ts(t,e,n){return t instanceof As?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ks?Ns(t,e):t instanceof Cs?Rs(t,e):function(t,e){var n=Ss(t,e),r=Os(n)+Os(t.A);return ka(n)&&ka(t.A)?ws(r):bs(t.R,r)}(t,e)}function Es(t,e,n){return t instanceof ks?Ns(t,e):t instanceof Cs?Rs(t,e):n}function Ss(t,e){return t instanceof Ds?ka(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var As=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e}(Is),ks=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,r.ZT)(e,t),e}(Is);function Ns(t,e){for(var n=Ps(e),r=function(t){n.some((function(e){return wa(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Cs=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,r.ZT)(e,t),e}(Is);function Rs(t,e){for(var n=Ps(e),r=function(t){n=n.filter((function(e){return!wa(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ds=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,r.ZT)(e,t),e}(Is);function Os(t){return ha(t.integerValue||t.doubleValue)}function Ps(t){return Na(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var xs=function(t,e){this.field=t,this.transform=e},Ls=function(t,e){this.version=t,this.transformResults=e},Ms=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Us(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Fs=function(){};function Vs(t,e,n){t instanceof Ks?function(t,e,n){var r=t.value.clone(),i=Ws(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Hs?function(t,e,n){if(Us(t.precondition,e)){var r=Ws(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(zs(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function js(t,e,n){t instanceof Ks?function(t,e,n){if(Us(t.precondition,e)){var r=t.value.clone(),i=Js(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Gs(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Hs?function(t,e,n){if(Us(t.precondition,e)){var r=Js(t.fieldTransforms,n,e),i=e.data;i.setAll(zs(t)),i.setAll(r),e.convertToFoundDocument(Gs(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Us(t.precondition,e)&&e.convertToNoDocument($o.min())}(t,e)}function qs(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=Ss(o.transform,a||null);null!=s&&(null==n&&(n=Pa.empty()),n.set(o.field,s))}return n||null}function Bs(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Xo(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ks&&e instanceof ks||t instanceof Cs&&e instanceof Cs?Xo(t.elements,e.elements,wa):t instanceof Ds&&e instanceof Ds?wa(t.A,e.A):t instanceof As&&e instanceof As}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Gs(t){return t.isFoundDocument()?t.version:$o.min()}var Ks=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,r.ZT)(e,t),e}(Fs),Hs=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return(0,r.ZT)(e,t),e}(Fs);function zs(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Ws(t,e,n){var r=new Map;Ko(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,Es(a,s,n[i]))}return r}function Js(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,Ts(s,u,e))}return r}var Xs,Qs,Ys=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,r.ZT)(e,t),e}(Fs),$s=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,r.ZT)(e,t),e}(Fs),Zs=function(t){this.count=t};function tu(t){switch(t){case Lo.OK:return Go();case Lo.CANCELLED:case Lo.UNKNOWN:case Lo.DEADLINE_EXCEEDED:case Lo.RESOURCE_EXHAUSTED:case Lo.INTERNAL:case Lo.UNAVAILABLE:case Lo.UNAUTHENTICATED:return!1;case Lo.INVALID_ARGUMENT:case Lo.NOT_FOUND:case Lo.ALREADY_EXISTS:case Lo.PERMISSION_DENIED:case Lo.FAILED_PRECONDITION:case Lo.ABORTED:case Lo.OUT_OF_RANGE:case Lo.UNIMPLEMENTED:case Lo.DATA_LOSS:return!0;default:return Go()}}function eu(t){if(void 0===t)return jo("GRPC error has no .code"),Lo.UNKNOWN;switch(t){case Xs.OK:return Lo.OK;case Xs.CANCELLED:return Lo.CANCELLED;case Xs.UNKNOWN:return Lo.UNKNOWN;case Xs.DEADLINE_EXCEEDED:return Lo.DEADLINE_EXCEEDED;case Xs.RESOURCE_EXHAUSTED:return Lo.RESOURCE_EXHAUSTED;case Xs.INTERNAL:return Lo.INTERNAL;case Xs.UNAVAILABLE:return Lo.UNAVAILABLE;case Xs.UNAUTHENTICATED:return Lo.UNAUTHENTICATED;case Xs.INVALID_ARGUMENT:return Lo.INVALID_ARGUMENT;case Xs.NOT_FOUND:return Lo.NOT_FOUND;case Xs.ALREADY_EXISTS:return Lo.ALREADY_EXISTS;case Xs.PERMISSION_DENIED:return Lo.PERMISSION_DENIED;case Xs.FAILED_PRECONDITION:return Lo.FAILED_PRECONDITION;case Xs.ABORTED:return Lo.ABORTED;case Xs.OUT_OF_RANGE:return Lo.OUT_OF_RANGE;case Xs.UNIMPLEMENTED:return Lo.UNIMPLEMENTED;case Xs.DATA_LOSS:return Lo.DATA_LOSS;default:return Go()}}(Qs=Xs||(Xs={}))[Qs.OK=0]="OK",Qs[Qs.CANCELLED=1]="CANCELLED",Qs[Qs.UNKNOWN=2]="UNKNOWN",Qs[Qs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qs[Qs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qs[Qs.NOT_FOUND=5]="NOT_FOUND",Qs[Qs.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qs[Qs.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qs[Qs.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qs[Qs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qs[Qs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qs[Qs.ABORTED=10]="ABORTED",Qs[Qs.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qs[Qs.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qs[Qs.INTERNAL=13]="INTERNAL",Qs[Qs.UNAVAILABLE=14]="UNAVAILABLE",Qs[Qs.DATA_LOSS=15]="DATA_LOSS";var nu=function(){function t(t,e){this.comparator=t,this.root=e||iu.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,iu.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,iu.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new ru(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new ru(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new ru(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new ru(this.root,t,this.comparator,!0)},t}(),ru=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),iu=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Go();if(this.right.isRed())throw Go();var t=this.left.check();if(t!==this.right.check())throw Go();return t+(this.isRed()?0:1)},t}();iu.EMPTY=null,iu.RED=!0,iu.BLACK=!1,iu.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Go()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Go()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Go()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Go()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Go()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new iu(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var ou=function(){function t(t){this.comparator=t,this.data=new nu(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new au(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new au(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),au=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),su=new nu(ga.comparator);function uu(){return su}var cu=new nu(ga.comparator);function hu(){return cu}var lu=new nu(ga.comparator);function fu(){return lu}var pu=new ou(ga.comparator);function du(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=pu,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var vu=new ou(Jo);function mu(){return vu}var yu=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,gu.createSynthesizedTargetChangeForCurrentChange(e,n)),new t($o.min(),r,mu(),uu(),du())},t}(),gu=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(sa.EMPTY_BYTE_STRING,n,du(),du(),du())},t}(),bu=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},wu=function(t,e){this.targetId=t,this.V=e},_u=function(t,e,n,r){void 0===n&&(n=sa.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Iu=function(){function t(){this.S=0,this.D=Su(),this.C=sa.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=du(),e=du(),n=du();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Go()}})),new gu(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Su()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Tu=function(){function t(t){this.W=t,this.G=new Map,this.H=uu(),this.J=Eu(),this.Y=new ou(Jo)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Go()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(ja(i))if(0===n){var o=new ga(i.path);this.tt(e,o,La.newNoDocument(o,$o.min()))}else Ko(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&ja(o.target)){var a=new ga(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,La.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=du();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new yu(t,n,this.Y,this.H,r);return this.H=uu(),this.J=Eu(),this.Y=new ou(Jo),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Iu,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new ou(Jo),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Vo("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Iu),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Eu(){return new nu(ga.comparator)}function Su(){return new nu(ga.comparator)}var Au={asc:"ASCENDING",desc:"DESCENDING"},ku={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nu=function(t,e){this.databaseId=t,this.I=e};function Cu(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ru(t,e){return t.I?e.toBase64():e.toUint8Array()}function Du(t,e){return Cu(t,e.toTimestamp())}function Ou(t){return Ko(!!t),$o.fromTimestamp(function(t){var e=ca(t);return new Yo(e.seconds,e.nanos)}(t))}function Pu(t,e){return function(t){return new ra(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function xu(t){var e=ra.fromString(t);return Ko(ic(e)),e}function Lu(t,e){return Pu(t.databaseId,e.path)}function Mu(t,e){var n=xu(e);if(n.get(1)!==t.databaseId.projectId)throw new Mo(Lo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Mo(Lo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ga(ju(n))}function Uu(t,e){return Pu(t.databaseId,e)}function Fu(t){var e=xu(t);return 4===e.length?ra.emptyPath():ju(e)}function Vu(t){return new ra(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ju(t){return Ko(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function qu(t,e,n){return{name:Lu(t,e),fields:n.value.mapValue.fields}}function Bu(t,e,n){var r=Mu(t,e.name),i=Ou(e.updateTime),o=new Pa({mapValue:{fields:e.fields}}),a=La.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Gu(t,e){var n;if(e instanceof Ks)n={update:qu(t,e.key,e.value)};else if(e instanceof Ys)n={delete:Lu(t,e.key)};else if(e instanceof Hs)n={update:qu(t,e.key,e.data),updateMask:rc(e.fieldMask)};else{if(!(e instanceof $s))return Go();n={verify:Lu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof As)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ks)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Cs)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ds)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Go()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Du(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Go()}(t,e.precondition)),n}function Ku(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ms.updateTime(Ou(t.updateTime)):void 0!==t.exists?Ms.exists(t.exists):Ms.none()}(e.currentDocument):Ms.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Ko("REQUEST_TIME"===e.setToServerValue),n=new As;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ks(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Cs(i)}else"increment"in e?n=new Ds(t,e.increment):Go();var o=oa.fromServerFormat(e.fieldPath);return new xs(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Mu(t,e.update.name),o=new Pa({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new aa(e.map((function(t){return oa.fromServerFormat(t)})))}(e.updateMask);return new Hs(i,o,a,n,r)}return new Ks(i,o,n,r)}if(e.delete){var s=Mu(t,e.delete);return new Ys(s,n)}if(e.verify){var u=Mu(t,e.verify);return new $s(u,n)}return Go()}function Hu(t,e){return{documents:[Uu(t,e.path)]}}function zu(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Uu(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Uu(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Ra(t.value))return{unaryFilter:{field:Zu(t.field),op:"IS_NAN"}};if(Ca(t.value))return{unaryFilter:{field:Zu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ra(t.value))return{unaryFilter:{field:Zu(t.field),op:"IS_NOT_NAN"}};if(Ca(t.value))return{unaryFilter:{field:Zu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zu(t.field),op:$u(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Zu(t.field),direction:Yu(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||va(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Xu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Xu(e.endAt)),n}function Wu(t){var e=Fu(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ko(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Ju(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new $a(tc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return va(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Qu(n.startAt));var h=null;return n.endAt&&(h=Qu(n.endAt)),rs(e,i,s,a,u,"F",c,h)}function Ju(t){return t?void 0!==t.unaryFilter?[nc(t)]:void 0!==t.fieldFilter?[ec(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Ju(t)})).reduce((function(t,e){return t.concat(e)})):Go():[]}function Xu(t){return{before:t.before,values:t.position}}function Qu(t){var e=!!t.before,n=t.values||[];return new Qa(n,e)}function Yu(t){return Au[t]}function $u(t){return ku[t]}function Zu(t){return{fieldPath:t.canonicalString()}}function tc(t){return oa.fromServerFormat(t.fieldPath)}function ec(t){return qa.create(tc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Go()}}(t.fieldFilter.op),t.fieldFilter.value)}function nc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=tc(t.unaryFilter.field);return qa.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=tc(t.unaryFilter.field);return qa.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=tc(t.unaryFilter.field);return qa.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=tc(t.unaryFilter.field);return qa.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Go()}}function rc(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function ic(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function oc(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=sc(e)),e=ac(t.get(n),e);return sc(e)}function ac(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function sc(t){return t+"\x01\x01"}function uc(t){var e=t.length;if(Ko(e>=2),2===e)return Ko("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ra.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&Go(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:Go()}o=a+2}return new ra(r)}var cc=function(t,e){this.seconds=t,this.nanoseconds=e},hc=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};hc.store="owner",hc.key="owner";var lc=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};lc.store="mutationQueues",lc.keyPath="userId";var fc=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};fc.store="mutations",fc.keyPath="batchId",fc.userMutationsIndex="userMutationsIndex",fc.userMutationsKeyPath=["userId","batchId"];var pc=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,oc(e)]},t.key=function(t,e,n){return[t,oc(e),n]},t}();pc.store="documentMutations",pc.PLACEHOLDER=new pc;var dc=function(t,e){this.path=t,this.readTime=e},vc=function(t,e){this.path=t,this.version=e},mc=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};mc.store="remoteDocuments",mc.readTimeIndex="readTimeIndex",mc.readTimeIndexPath="readTime",mc.collectionReadTimeIndex="collectionReadTimeIndex",mc.collectionReadTimeIndexPath=["parentPath","readTime"];var yc=function(t){this.byteSize=t};yc.store="remoteDocumentGlobal",yc.key="remoteDocumentGlobalKey";var gc=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};gc.store="targets",gc.keyPath="targetId",gc.queryTargetsIndexName="queryTargetsIndex",gc.queryTargetsKeyPath=["canonicalId","targetId"];var bc=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};bc.store="targetDocuments",bc.keyPath=["targetId","path"],bc.documentTargetsIndex="documentTargetsIndex",bc.documentTargetsKeyPath=["path","targetId"];var wc=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};wc.key="targetGlobalKey",wc.store="targetGlobal";var _c=function(t,e){this.collectionId=t,this.parent=e};_c.store="collectionParents",_c.keyPath=["collectionId","parent"];var Ic=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ic.store="clientMetadata",Ic.keyPath="clientId";var Tc=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Tc.store="bundles",Tc.keyPath="bundleId";var Ec=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ec.store="namedQueries",Ec.keyPath="name";var Sc=(0,r.ev)((0,r.ev)([],(0,r.ev)((0,r.ev)([],(0,r.ev)((0,r.ev)([],(0,r.ev)((0,r.ev)([],[lc.store,fc.store,pc.store,mc.store,gc.store,hc.store,wc.store,bc.store]),[Ic.store])),[yc.store])),[_c.store])),[Tc.store,Ec.store]),Ac="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",kc=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Nc=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Cc=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Go(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Rc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Nc,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Pc(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Fc(e.target.error);n.ft.reject(new Pc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Pc(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Vo("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Lc(e)},t}(),Dc=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(u())&&jo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Vo("SimpleDb","Removing database:",t),Mc(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=u(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof Po&&"YES"===(null===(t=Po.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Vo("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Pc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Mo(Lo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Pc(t,n))},i.onupgradeneeded=function(t){Vo("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Vo("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,i){return(0,r.mG)(this,void 0,void 0,(function(){var o,a,s,u,c;return(0,r.Jh)(this,(function(h){switch(h.label){case 0:o="readonly"===e,a=0,s=function(){var e,s,c,h,l;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:++a,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.At(t)];case 2:return u.db=r.sent(),e=Rc.open(u.db,t,o?"readonly":"readwrite",n),s=i(e).catch((function(t){return e.abort(t),Cc.reject(t)})).toPromise(),c={},s.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(r.sent(),s),c)];case 4:return h=r.sent(),l="FirebaseError"!==h.name&&a<3,Vo("SimpleDb","Transaction failed with error:",h.message,"Retrying:",l),u.close(),l?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},u=this,h.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Oc=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Mc(this.Pt.delete())},t}(),Pc=function(t){function e(e,n){var r=this;return(r=t.call(this,Lo.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,r.ZT)(e,t),e}(Mo);function xc(t){return"IndexedDbTransactionError"===t.name}var Lc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Vo("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Vo("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Mc(n)},t.prototype.add=function(t){return Vo("SimpleDb","ADD",this.store.name,t,t),Mc(this.store.add(t))},t.prototype.get=function(t){var e=this;return Mc(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Vo("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Vo("SimpleDb","DELETE",this.store.name,t),Mc(this.store.delete(t))},t.prototype.count=function(){return Vo("SimpleDb","COUNT",this.store.name),Mc(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){Vo("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Cc((function(n,r){e.onerror=function(t){var e=Fc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Cc((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Oc(i),a=e(i.primaryKey,i.value,o);if(a instanceof Cc){var s=a.catch((function(t){return o.done(),Cc.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Cc.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Mc(t){return new Cc((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Fc(t.target.error);n(e)}}))}var Uc=!1;function Fc(t){var e=Dc._t(u());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Mo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Uc||(Uc=!0,setTimeout((function(){throw r}),0)),r}}return t}var Vc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,r.ZT)(e,t),e}(kc);function jc(t,e){var n=Ho(t);return Dc.It(n.Mt,e)}var qc=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Vs(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&js(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&js(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument($o.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),du())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Xo(this.mutations,t.mutations,(function(t,e){return Bs(t,e)}))&&Xo(this.baseMutations,t.baseMutations,(function(t,e){return Bs(t,e)}))},t}(),Bc=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Ko(e.mutations.length===r.length);for(var i=fu(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Gc=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=$o.min()),void 0===o&&(o=$o.min()),void 0===a&&(a=sa.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Kc=function(t){this.Lt=t};function Hc(t,e){if(e.document)return Bu(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ga.fromSegments(e.noDocument.path),r=Qc(e.noDocument.readTime),i=La.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=ga.fromSegments(e.unknownDocument.path);return r=Qc(e.unknownDocument.version),La.newUnknownDocument(o,r)}return Go()}function zc(t,e,n){var r=Wc(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Lu(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Cu(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new mc(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=Xc(e.version);return a=e.hasCommittedMutations,new mc(null,new dc(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=Xc(e.version);return new mc(new vc(c,h),null,null,!0,r,i)}return Go()}function Wc(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Jc(t){var e=new Yo(t[0],t[1]);return $o.fromTimestamp(e)}function Xc(t){var e=t.toTimestamp();return new cc(e.seconds,e.nanoseconds)}function Qc(t){var e=new Yo(t.seconds,t.nanoseconds);return $o.fromTimestamp(e)}function Yc(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Ku(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return Ku(t.Lt,e)})),s=Yo.fromMillis(e.localWriteTimeMs);return new qc(e.batchId,s,n,a)}function $c(t){var e,n,r=Qc(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Qc(t.lastLimboFreeSnapshotVersion):$o.min();return void 0!==t.query.documents?(Ko(1===(n=t.query).documents.length),e=ls(is(Fu(n.documents[0])))):e=function(t){return ls(Wu(t))}(t.query),new Gc(e,t.targetId,0,t.lastListenSequenceNumber,r,i,sa.fromBase64String(t.resumeToken))}function Zc(t,e){var n,r=Xc(e.snapshotVersion),i=Xc(e.lastLimboFreeSnapshotVersion);n=ja(e.target)?Hu(t.Lt,e.target):zu(t.Lt,e.target);var o=e.resumeToken.toBase64();return new gc(e.targetId,Fa(e.target),r,o,e.sequenceNumber,i,n)}function th(t){var e=Wu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?fs(e,e.limit,"L"):e}var eh=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return nh(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Qc(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return nh(t).put({bundleId:(n=e).id,createTime:Xc(Ou(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return rh(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:th(e.bundledQuery),readTime:Qc(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return rh(t).put(function(t){return{name:t.name,readTime:Xc(Ou(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function nh(t){return jc(t,Tc.store)}function rh(t){return jc(t,Ec.store)}var ih=function(){function t(){this.Bt=new oh}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Cc.resolve()},t.prototype.getCollectionParents=function(t,e){return Cc.resolve(this.Bt.getEntries(e))},t}(),oh=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ou(ra.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ou(ra.comparator)).toArray()},t}(),ah=function(){function t(){this.qt=new oh}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:oc(i)};return sh(t).put(o)}return Cc.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Qo(e),""],!1,!0);return sh(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(uc(o.parent))}return n}))},t}();function sh(t){return jc(t,_c.store)}var uh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ch=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function hh(t,e,n){var r=t.store(fc.store),i=t.store(pc.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){Ko(1===s)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=pc.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Cc.waitFor(o).next((function(){return c}))}function lh(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Go();e=t.noDocument}return JSON.stringify(e).length}ch.DEFAULT_COLLECTION_PERCENTILE=10,ch.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ch.DEFAULT=new ch(41943040,ch.DEFAULT_COLLECTION_PERCENTILE,ch.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ch.DISABLED=new ch(-1,0,0);var fh=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Ko(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dh(t).$t({index:fc.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=vh(t),a=dh(t);return a.add({}).next((function(s){Ko("number"==typeof s);for(var u=new qc(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Gu(t.Lt,e)})),i=n.mutations.map((function(e){return Gu(t.Lt,e)}));return new fc(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new ou((function(t,e){return Jo(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=pc.key(i.userId,d.key.path,s);l=l.add(d.key.path.popLast()),h.push(a.put(c)),h.push(o.put(v,pc.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[s]=u.keys()})),Cc.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return dh(t).get(e).next((function(t){return t?(Ko(t.userId===n.userId),Yc(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Cc.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return dh(t).$t({index:fc.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Ko(e.batchId>=r),o=Yc(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return dh(t).$t({index:fc.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dh(t).Nt(fc.userMutationsIndex,n).next((function(t){return t.map((function(t){return Yc(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=pc.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return vh(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],h=uc(u);if(s===n.userId&&e.path.isEqual(h))return dh(t).get(c).next((function(t){if(!t)throw Go();Ko(t.userId===n.userId),o.push(Yc(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ou(Jo),i=[];return e.forEach((function(e){var o=pc.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=vh(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=uc(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Cc.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=pc.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new ou(Jo);return vh(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],h=uc(u);a===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(dh(t).get(e).next((function(t){if(null===t)throw Go();Ko(t.userId===n.userId),r.push(Yc(n.R,t))})))})),Cc.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return hh(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Cc.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Cc.resolve();var r=IDBKeyRange.lowerBound(pc.prefixForUser(e.userId)),i=[];return vh(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=uc(t[1]);i.push(o)}else r.done()})).next((function(){Ko(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return ph(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return mh(t).get(this.userId).next((function(t){return t||new lc(e.userId,-1,"")}))},t}();function ph(t,e,n){var r=pc.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return vh(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function dh(t){return jc(t,fc.store)}function vh(t){return jc(t,pc.store)}function mh(t){return jc(t,lc.store)}var yh=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),gh=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new yh(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return $o.fromTimestamp(new Yo(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return bh(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Ko(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return bh(t).$t((function(a,s){var u=$c(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Cc.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return bh(t).$t((function(t,n){var r=$c(n);e(r)}))},t.prototype.Xt=function(t){return wh(t).get(wc.key).next((function(t){return Ko(null!==t),t}))},t.prototype.Zt=function(t,e){return wh(t).put(wc.key,e)},t.prototype.te=function(t,e){return bh(t).put(Zc(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Fa(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return bh(t).$t({range:r,index:gc.queryTargetsIndexName},(function(t,n,r){var o=$c(n);Va(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=_h(t);return e.forEach((function(e){var a=oc(e.path);i.push(o.put(new bc(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),Cc.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=_h(t);return Cc.forEach(e,(function(e){var o=oc(e.path);return Cc.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=_h(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=_h(t),i=du();return r.$t({range:n,kt:!0},(function(t,e,n){var r=uc(t[1]),o=new ga(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=oc(e.path),r=IDBKeyRange.bound([n],[Qo(n)],!1,!0),i=0;return _h(t).$t({index:bc.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return bh(t).get(e).next((function(t){return t?$c(t):null}))},t}();function bh(t){return jc(t,gc.store)}function wh(t){return jc(t,wc.store)}function _h(t){return jc(t,bc.store)}function Ih(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){if(t.code!==Lo.FAILED_PRECONDITION||t.message!==Ac)throw t;return Vo("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Th(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Jo(n,i);return 0===a?Jo(r,o):a}var Eh=function(){function t(t){this.ne=t,this.buffer=new ou(Th),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Th(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Sh=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Vo("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return(0,r.mG)(e,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return xc(e=n.sent())?(Vo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Ih(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Ah=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Cc.resolve(xo.o);var r=new Eh(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Vo("LruGarbageCollector","Garbage collection skipped; disabled"),Cc.resolve(uh)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Vo("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),uh):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Vo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Fo()<=S.DEBUG&&Vo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-h)+"ms"),Cc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),kh=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Ah(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Nh(t,n)},t.prototype.removeReference=function(t,e,n){return Nh(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Nh(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return mh(t).Ot((function(r){return ph(t,r,e).next((function(t){return t&&(n=!0),Cc.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),_h(t).delete([0,oc(a.path)])}))}));i.push(u)}})).next((function(){return Cc.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Nh(t,e)},t.prototype.we=function(t,e){var n,r=_h(t),i=xo.o;return r.$t({index:bc.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==xo.o&&e(new ga(uc(n)),i),i=s,n=a):i=xo.o})).next((function(){i!==xo.o&&e(new ga(uc(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Nh(t,e){return _h(t).put(function(t,e){return new bc(0,oc(t.path),e)}(e,t.currentSequenceNumber))}var Ch=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){ta(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return ea(this.inner)},t}(),Rh=function(){function t(){this.changes=new Ch((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:$o.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:La.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Cc.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Dh=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return xh(t).put(Lh(e),n)},t.prototype.removeEntry=function(t,e){var n=xh(t),r=Lh(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return xh(t).get(Lh(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return xh(t).get(Lh(e)).next((function(t){return{document:n.ye(e,t),size:lh(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=uu();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=uu(),i=new nu(ga.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,lh(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Cc.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return xh(t).$t({range:r},(function(t,e,r){for(var a=ga.fromSegments(t);o&&ga.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=uu(),o=e.path.length+1,a={};if(n.isEqual($o.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=Wc(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=mc.collectionReadTimeIndex}return xh(t).$t(a,(function(t,n,a){if(t.length===o){var s=Hc(r.R,n);e.path.isPrefixOf(s.key.path)?ms(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new Oh(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ph(t).get(yc.key).next((function(t){return Ko(!!t),t}))},t.prototype.me=function(t,e){return Ph(t).put(yc.key,e)},t.prototype.ye=function(t,e){if(e){var n=Hc(this.R,e);if(!n.isNoDocument()||!n.version.isEqual($o.min()))return n}return La.newInvalidDocument(t)},t}(),Oh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Ch((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return(0,r.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new ou((function(t,e){return Jo(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=zc(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=lh(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var h=zc(e.Ie.R,La.newNoDocument(o,$o.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Cc.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(Rh);function Ph(t){return jc(t,yc.store)}function xh(t){return jc(t,mc.store)}function Lh(t){return t.path.toArray()}var Mh=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Ko(n<r&&n>=0&&r<=11);var o=new Rc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(hc.store)}(t),function(t){t.createObjectStore(lc.store,{keyPath:lc.keyPath}),t.createObjectStore(fc.store,{keyPath:fc.keyPath,autoIncrement:!0}).createIndex(fc.userMutationsIndex,fc.userMutationsKeyPath,{unique:!0}),t.createObjectStore(pc.store)}(t),Uh(t),function(t){t.createObjectStore(mc.store)}(t));var a=Cc.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(bc.store),t.deleteObjectStore(gc.store),t.deleteObjectStore(wc.store)}(t),Uh(t)),a=a.next((function(){return function(t){var e=t.store(wc.store),n=new wc(0,0,$o.min().toTimestamp(),0);return e.put(wc.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(fc.store).Nt().next((function(n){t.deleteObjectStore(fc.store),t.createObjectStore(fc.store,{keyPath:fc.keyPath,autoIncrement:!0}).createIndex(fc.userMutationsIndex,fc.userMutationsKeyPath,{unique:!0});var r=e.store(fc.store),i=n.map((function(t){return r.put(t)}));return Cc.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(Ic.store,{keyPath:Ic.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(yc.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(mc.store);e.createIndex(mc.readTimeIndex,mc.readTimeIndexPath,{unique:!1}),e.createIndex(mc.collectionReadTimeIndex,mc.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(Tc.store,{keyPath:Tc.keyPath})}(t),function(t){t.createObjectStore(Ec.store,{keyPath:Ec.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(mc.store).$t((function(t,n){e+=lh(n)})).next((function(){var n=new yc(e);return t.store(yc.store).put(yc.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(lc.store),r=t.store(fc.store);return n.Nt().next((function(n){return Cc.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(fc.userMutationsIndex,i).next((function(r){return Cc.forEach(r,(function(r){Ko(r.userId===n.userId);var i=Yc(e.R,r);return hh(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(bc.store),n=t.store(mc.store);return t.store(wc.store).get(wc.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new ra(n),a=function(t){return[0,oc(t)]}(o);r.push(e.get(a).next((function(n){return n?Cc.resolve():function(n){return e.put(new bc(0,oc(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Cc.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(_c.store,{keyPath:_c.keyPath});var n=e.store(_c.store),r=new oh,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:oc(i)})}};return e.store(mc.store).$t({kt:!0},(function(t,e){var n=new ra(t);return i(n.popLast())})).next((function(){return e.store(pc.store).$t({kt:!0},(function(t,e){t[0];var n=t[1],r=(t[2],uc(n));return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(gc.store);return n.$t((function(t,r){var i=$c(r),o=Zc(e.R,i);return n.put(o)}))},t}();function Uh(t){t.createObjectStore(bc.store,{keyPath:bc.keyPath}).createIndex(bc.documentTargetsIndex,bc.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(gc.store,{keyPath:gc.keyPath}).createIndex(gc.queryTargetsIndexName,gc.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(wc.store)}var Fh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Vh=function(){function t(e,n,r,i,o,a,s,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Mo(Lo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kh(this,i),this.Le=n+"main",this.R=new Kc(u),this.Be=new Dc(this.Le,11,new Mh(this.R)),this.qe=new gh(this.referenceDelegate,this.R),this.Ut=new ah,this.Ue=function(t,e){return new Dh(t,e)}(this.R,this.Ut),this.Qe=new eh,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===h&&jo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Mo(Lo.FAILED_PRECONDITION,Fh);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new xo(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return qh(e).put(new Ic(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(xc(e))return Vo("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Vo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return jh(t).get(hc.key).next((function(t){return Cc.resolve(e.tn(t))}))},t.prototype.en=function(t){return qh(t).delete(this.clientId)},t.prototype.nn=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e,n,i,o=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=jc(t,Ic.store);return e.Nt().next((function(t){var n=o.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Cc.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=r.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)i=n[e],this.Ke.removeItem(this.on(i.clientId));r.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Cc.resolve(!0):jh(t).get(hc.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Mo(Lo.FAILED_PRECONDITION,Fh);return!1}}return!(!e.networkEnabled||!e.inForeground)||qh(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Vo("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t=this;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[hc.store,Ic.store],(function(e){var n=new Vc(e,xo.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return qh(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return fh.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Vo("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Sc,(function(o){return i=new Vc(o,r.Ne?r.Ne.next():xo.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw jo("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Mo(Lo.FAILED_PRECONDITION,Ac);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return jh(t).get(hc.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Mo(Lo.FAILED_PRECONDITION,Fh)}))},t.prototype.Ze=function(t){var e=new hc(this.clientId,this.allowTabSynchronization,Date.now());return jh(t).put(hc.key,e)},t.yt=function(){return Dc.yt()},t.prototype.Xe=function(t){var e=this,n=jh(t);return n.get(hc.key).next((function(t){return e.tn(t)?(Vo("IndexedDbPersistence","Releasing primary lease."),n.delete(hc.key)):Cc.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(jo("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Vo("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return jo("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){jo("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function jh(t){return jc(t,hc.store)}function qh(t){return jc(t,Ic.store)}function Bh(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Gh=function(t,e){this.progress=t,this.wn=e},Kh=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return ga.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):cs(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new ga(e)).next((function(t){var e=hu();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=hu();return this.Ut.getCollectionParents(t,i).next((function(a){return Cc.forEach(a,(function(a){var s=function(t,e){return new ns(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,h=r.get(c);null==h&&(h=La.newInvalidDocument(c),r=r.insert(c,h)),js(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){ms(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=du(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Hs&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Hh=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=du(),i=du(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),zh=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual($o.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(os(e)||as(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(Fo()<=S.DEBUG&&Vo("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),vs(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new ou(ys(t));return e.forEach((function(e,r){ms(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Fo()<=S.DEBUG&&Vo("QueryEngine","Using full collection scan to execute query:",vs(e)),this.Sn.getDocumentsMatchingQuery(t,e,$o.min())},t}(),Wh=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new nu(Jo),this.kn=new Ch((function(t){return Fa(t)}),Va),this.$n=$o.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Kh(this.On,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();function Jh(t,e,n,r){return new Wh(t,e,n,r)}function Xh(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,a;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=Ho(t),i=n._n,o=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var r;return n._n.getAllMutationBatches(t).next((function(a){return r=a,i=n.persistence.getMutationQueue(e),o=new Kh(n.On,i,n.persistence.getIndexManager()),i.getAllMutationBatches(t)})).next((function(e){for(var n=[],i=[],a=du(),s=0,u=r;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];i.push(v.batchId);for(var m=0,y=v.mutations;m<y.length;m++){var g=y[m];a=a.add(g.key)}}return o.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:i}}))}))}))];case 1:return a=r.sent(),[2,(n._n=i,n.Mn=o,n.xn.Vn(n.Mn),a)]}}))}))}function Qh(t,e){var n=Ho(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=Cc.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);Ko(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Yh(t){var e=Ho(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function $h(t,e){var n=Ho(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Ko(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=uu();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Zh(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual($o.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return Cc.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.Fn=i,t}))}function Zh(t,e,n,r,i){var o=du();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=uu();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual($o.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):Vo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function tl(t,e){var n=Ho(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function el(t,e){var n=Ho(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,Cc.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Gc(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function nl(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,a,s;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:i=Ho(t),o=i.Fn.get(e),a=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",a,(function(t){return i.persistence.referenceDelegate.removeTarget(t,o)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!xc(s=r.sent()))throw s;return Vo("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return i.Fn=i.Fn.remove(e),i.kn.delete(o.target),[2]}}))}))}function rl(t,e,n){var r=Ho(t),i=$o.min(),o=du();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Ho(t),i=r.kn.get(n);return void 0!==i?Cc.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,ls(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:$o.min(),n?o:du())})).next((function(t){return{documents:t,Bn:o}}))}))}function il(t,e){var n=Ho(t),r=Ho(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function ol(t){var e=Ho(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Ho(t),i=uu(),o=Wc(n),a=xh(e),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:mc.readTimeIndex,range:s},(function(t,e){var n=Hc(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Jc(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function al(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){return[2,(e=Ho(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=xh(t),n=$o.min();return e.$t({index:mc.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Jc(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function sl(t,e,n,i){return(0,r.mG)(this,void 0,void 0,(function(){var o,a,s,u,c,h,l,f,p,d;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:for(o=Ho(t),a=du(),s=uu(),u=fu(),c=0,h=n;c<h.length;c++)l=h[c],f=e.qn(l.metadata.name),l.document&&(a=a.add(f)),s=s.insert(f,e.Un(l)),u=u.insert(f,e.Qn(l.metadata.readTime));return p=o.On.newChangeBuffer({trackRemovals:!0}),[4,el(o,function(t){return ls(is(ra.fromString("__bundle__/docs/"+t)))}(i))];case 1:return d=r.sent(),[2,o.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Zh(t,p,s,$o.min(),u).next((function(e){return p.apply(t),e})).next((function(e){return o.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return o.qe.addMatchingKeys(t,a,d.targetId)})).next((function(){return o.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function ul(t,e,n){return void 0===n&&(n=du()),(0,r.mG)(this,void 0,void 0,(function(){var i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,el(t,ls(th(e.bundledQuery)))];case 1:return i=r.sent(),[2,(o=Ho(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var r=Ou(e.readTime);if(i.snapshotVersion.compareTo(r)>=0)return o.Qe.saveNamedQuery(t,e);var a=i.withResumeToken(sa.EMPTY_BYTE_STRING,r);return o.Fn=o.Fn.insert(a.targetId,a),o.qe.updateTargetData(t,a).next((function(){return o.qe.removeMatchingKeysForTargetId(t,i.targetId)})).next((function(){return o.qe.addMatchingKeys(t,n,i.targetId)})).next((function(){return o.Qe.saveNamedQuery(t,e)}))}))]}}))}))}var cl=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Cc.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Ou(n.createTime)}),Cc.resolve()},t.prototype.getNamedQuery=function(t,e){return Cc.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:th(t.bundledQuery),readTime:Ou(t.readTime)}}(e)),Cc.resolve()},t}(),hl=function(){function t(){this.Wn=new ou(ll.Gn),this.zn=new ou(ll.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new ll(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new ll(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new ga(new ra([])),r=new ll(n,t),i=new ll(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new ga(new ra([])),n=new ll(e,t),r=new ll(e,t+1),i=du();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new ll(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),ll=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return ga.comparator(t.key,e.key)||Jo(t.ns,e.ns)},t.Hn=function(t,e){return Jo(t.ns,e.ns)||ga.comparator(t.key,e.key)},t}(),fl=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new ou(ll.Gn)}return t.prototype.checkEmpty=function(t){return Cc.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new qc(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new ll(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Cc.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Cc.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return Cc.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Cc.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Cc.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new ll(e,0),i=new ll(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Cc.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ou(Jo);return e.forEach((function(t){var e=new ll(t,0),i=new ll(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Cc.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ga.isDocumentKey(i)||(i=i.child(""));var o=new ll(new ga(i),0),a=new ou(Jo);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),Cc.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Ko(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Cc.forEach(e.mutations,(function(i){var o=new ll(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new ll(e,0),r=this.rs.firstAfterOrEqual(n);return Cc.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,Cc.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),pl=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new nu(ga.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Cc.resolve(n?n.document.clone():La.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=uu();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():La.newInvalidDocument(t))})),Cc.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=uu(),i=new ga(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(s.path))break;h.compareTo(n)<=0||ms(e,c)&&(r=r.insert(c.key,c.clone()))}return Cc.resolve(r)},t.prototype.fs=function(t,e){return Cc.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new dl(this)},t.prototype.getSize=function(t){return Cc.resolve(this.size)},t}(),dl=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,r.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Cc.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Rh),vl=function(){function t(t){this.persistence=t,this.ds=new Ch((function(t){return Fa(t)}),Va),this.lastRemoteSnapshotVersion=$o.min(),this.highestTargetId=0,this.ws=0,this._s=new hl,this.targetCount=0,this.ys=yh.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Cc.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Cc.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Cc.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Cc.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Cc.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new yh(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Cc.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Cc.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Cc.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),Cc.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Cc.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Cc.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Cc.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Cc.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Cc.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Cc.resolve(n)},t.prototype.containsKey=function(t,e){return Cc.resolve(this._s.containsKey(e))},t}(),ml=function(){function t(t,e){var n=this;this.gs={},this.Ne=new xo(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new vl(this),this.Ut=new ih,this.Ue=function(t,e){return new pl(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Kc(e),this.Qe=new cl(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new fl(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Vo("MemoryPersistence","Starting transaction:",t);var i=new yl(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Cc.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),yl=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,r.ZT)(e,t),e}(kc),gl=function(){function t(t){this.persistence=t,this.As=new hl,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Go()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Cc.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Cc.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Cc.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Cc.forEach(this.vs,(function(r){var i=ga.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Cc.or([function(){return Cc.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),bl=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function wl(t,e){return"firestore_clients_"+t+"_"+e}function _l(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Il(t,e){return"firestore_targets_"+t+"_"+e}bl.UNAUTHENTICATED=new bl(null),bl.GOOGLE_CREDENTIALS=new bl("google-credentials-uid"),bl.FIRST_PARTY=new bl("first-party-uid");var Tl=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Mo(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(jo("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),El=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Mo(i.error.code,i.error.message)),o?new t(e,i.state,r):(jo("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Sl=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=mu(),a=0;i&&a<r.activeTargetIds.length;++a)i=ya(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(jo("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Al=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(jo("SharedClientState","Failed to parse online state: "+e),null)},t}(),kl=function(){function t(){this.activeTargetIds=mu()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Nl=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new nu(Jo),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=wl(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new kl),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e,n,i,o,a,s,u,c,h,l,f=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=r.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this.Ns&&(o=this.getItem(wl(this.persistenceKey,i)))&&(a=Sl.Vs(i,o))&&(this.ks=this.ks.insert(a.clientId,a));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(u=this.js(s))&&this.Ws(u),c=0,h=this.$s;c<h.length;c++)l=h[c],this.Fs(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Il(this.persistenceKey,t));if(n){var r=El.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Il(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Vo("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Vo("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Vo("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Vo("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void jo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return(0,r.mG)(e,void 0,void 0,(function(){var t,e,i,o,a,s;return(0,r.Jh)(this,(function(r){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(i=this.si(n.key,n.newValue)))return[2,this.ii(i)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(o=this.ri(n.key,n.newValue)))return[2,this.oi(o)]}else if(n.key===this.Us){if(null!==n.newValue&&(a=this.js(n.newValue)))return[2,this.Ws(a)]}else if(n.key===this.Ms)(s=function(t){var e=xo.o;if(null!=t)try{var n=JSON.parse(t);Ko("number"==typeof n),e=n}catch(t){jo("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==xo.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Tl(this.currentUser,t,e,n),i=_l(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=_l(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Il(this.persistenceKey,t),i=new El(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Sl.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Tl.Vs(new bl(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return El.Vs(r,e)},t.prototype.js=function(t){return Al.Vs(t)},t.prototype.ii=function(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Vo("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=mu();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Cl=function(){function t(){this.li=new kl,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new kl,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Rl=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Dl=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Vo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Vo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ol={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Pl=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),xl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return(0,r.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new Oo;a.listenOnce(No.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case ko.NO_ERROR:var e=a.getResponseJson();Vo("Connection","XHR received:",JSON.stringify(e)),i(e);break;case ko.TIMEOUT:Vo("Connection",'RPC "'+t+'" timed out'),o(new Mo(Lo.DEADLINE_EXCEEDED,"Request time out"));break;case ko.HTTP_ERROR:var n=a.getStatus();if(Vo("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Lo).indexOf(e)>=0?e:Lo.UNKNOWN}(r.status);o(new Mo(s,r.message))}else o(new Mo(Lo.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Mo(Lo.UNAVAILABLE,"Connection failed."));break;default:Go()}}finally{Vo("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=So(),i=Ao(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),"undefined"!==typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(u())||"object"===typeof navigator&&"ReactNative"===navigator.product||u().indexOf("Electron/")>=0||function(){var t=u();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||u().indexOf("MSAppHost/")>=0||function(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");Vo("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),c=!1,h=!1,l=new Pl({Ei:function(t){h?Vo("Connection","Not sending because WebChannel is closed:",t):(c||(Vo("Connection","Opening WebChannel transport."),s.open(),c=!0),Vo("Connection","WebChannel sending:",t),s.send(t))},Ti:function(){return s.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(s,Do.EventType.OPEN,(function(){h||Vo("Connection","WebChannel transport opened.")})),f(s,Do.EventType.CLOSE,(function(){h||(h=!0,Vo("Connection","WebChannel transport closed"),l.Vi())})),f(s,Do.EventType.ERROR,(function(t){h||(h=!0,qo("Connection","WebChannel transport errored:",t),l.Vi(new Mo(Lo.UNAVAILABLE,"The operation could not be completed")))})),f(s,Do.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];Ko(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Vo("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=Xs[t];if(void 0!==e)return eu(e)}(o),u=i.message;void 0===a&&(a=Lo.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),h=!0,l.Vi(new Mo(a,u)),s.close()}else Vo("Connection","WebChannel received:",n),l.Si(n)}})),f(i,Co.STAT_EVENT,(function(t){t.stat===Ro.PROXY?Vo("Connection","Detected buffering proxy"):t.stat===Ro.NOPROXY&&Vo("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Vo("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return Vo("RestConnection","Received: ",t),t}),(function(e){throw qo("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.3",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=Ol[t];return this.Di+"/v1/"+e+":"+n},t}());function Ll(){return"undefined"!=typeof window?window:null}function Ml(){return"undefined"!=typeof document?document:null}function Ul(t){return new Nu(t,!0)}var Fl=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Vo("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Vl=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Fl(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Lo.RESOURCE_EXHAUSTED?(jo(e.toString()),jo("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Lo.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Mo(Lo.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return(0,r.mG)(t,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Vo("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Vo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),jl=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return(0,r.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Go()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Ko(void 0===e||"string"==typeof e),sa.fromBase64String(e||"")):(Ko(void 0===e||e instanceof Uint8Array),sa.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?Lo.UNKNOWN:eu(t.code);return new Mo(e,t.message||"")}(s);n=new _u(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Mu(t,r.document.name),o=Ou(r.document.updateTime);var s=new Pa({mapValue:{fields:r.document.fields}}),u=(a=La.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new bu(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Mu(t,r.document),o=r.readTime?Ou(r.readTime):$o.min(),s=La.newNoDocument(i,o),a=r.removedTargetIds||[],n=new bu([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Mu(t,r.document),o=r.removedTargetIds||[],n=new bu([],o,i,null);else{if(!("filter"in e))return Go();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Zs(r),o=h.targetId,n=new wu(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return $o.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?$o.min():e.readTime?Ou(e.readTime):$o.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Vu(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=ja(r)?{documents:Hu(t,r)}:{query:zu(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Ru(t,e.resumeToken):e.snapshotVersion.compareTo($o.min())>0&&(n.readTime=Cu(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Go()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Vu(this.R),e.removeTarget=t,this.cr(e)},e}(Vl),ql=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return(0,r.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Ko(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Ko(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Ou(t.updateTime):Ou(e);return n.isEqual($o.min())&&(n=Ou(e)),new Ls(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Ou(t.commitTime);return this.listener.Tr(n,e)}return Ko(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Vu(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Gu(e.R,t)}))};this.cr(n)},e}(Vl),Bl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,r.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new Mo(Lo.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Lo.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Mo(Lo.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Lo.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Mo(Lo.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Gl=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(jo(e),this.Vr=!1):Vo("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Kl=function(t,e,n,i,o){var a=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=o,this.Lr.di((function(t){n.enqueueAndForget((function(){return(0,r.mG)(a,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return Zl(this)?(Vo("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return(e=Ho(t)).Or.add(4),[4,zl(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Hl(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Gl(n,i)};function Hl(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:if(!Zl(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function zl(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Wl(t,e){var n=Ho(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),$l(n)?Yl(n):vf(n).er()&&Xl(n,e))}function Jl(t,e){var n=Ho(t),r=vf(n);n.$r.delete(e),r.er()&&Ql(n,e),0===n.$r.size&&(r.er()?r.ir():Zl(n)&&n.Br.set("Unknown"))}function Xl(t,e){t.qr.U(e.targetId),vf(t).mr(e)}function Ql(t,e){t.qr.U(e),vf(t).yr(e)}function Yl(t){t.qr=new Tu({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),vf(t).start(),t.Br.Sr()}function $l(t){return Zl(t)&&!vf(t).tr()&&t.$r.size>0}function Zl(t){return 0===Ho(t).Or.size}function tf(t){t.qr=void 0}function ef(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return t.$r.forEach((function(e,n){Xl(t,e)})),[2]}))}))}function nf(t,e){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){return tf(t),$l(t)?(t.Br.Nr(e),Yl(t)):t.Br.set("Unknown"),[2]}))}))}function rf(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,a;return(0,r.Jh)(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof _u&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,a;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:n=e.cause,i=0,o=e.targetIds,r.label=1;case 1:return i<o.length?(a=o[i],t.$r.has(a)?[4,t.remoteSyncer.rejectListen(a,n)]:[3,3]):[3,5];case 2:r.sent(),t.$r.delete(a),t.qr.removeTarget(a),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return i=s.sent(),Vo("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),[4,of(t,i)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof bu?t.qr.X(e):e instanceof wu?t.qr.rt(e):t.qr.et(e),n.isEqual($o.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Yh(t.localStore)];case 8:return o=s.sent(),n.compareTo(o)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(sa.EMPTY_BYTE_STRING,n.snapshotVersion)),Ql(t,e);var r=new Gc(n.target,e,1,n.sequenceNumber);Xl(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Vo("RemoteStore","Failed to raise snapshot:",a=s.sent()),[4,of(t,a)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function of(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i=this;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:if(!xc(e))throw e;return t.Or.add(1),[4,zl(t)];case 1:return o.sent(),t.Br.set("Offline"),n||(n=function(){return Yh(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return(0,r.mG)(i,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return Vo("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Hl(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function af(t,e){return e().catch((function(n){return of(t,n,e)}))}function sf(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n,i,o,a;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:e=Ho(t),n=mf(e),i=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,r.label=1;case 1:if(!function(t){return Zl(t)&&t.kr.length<10}(e))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,tl(e.localStore,i)];case 3:return null===(o=r.sent())?(0===e.kr.length&&n.ir(),[3,7]):(i=o.batchId,function(t,e){t.kr.push(e);var n=mf(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,o),[3,6]);case 4:return a=r.sent(),[4,of(e,a)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return uf(e)&&cf(e),[2]}}))}))}function uf(t){return Zl(t)&&!mf(t).tr()&&t.kr.length>0}function cf(t){mf(t).start()}function hf(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return mf(t).Ar(),[2]}))}))}function lf(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n,i,o;return(0,r.Jh)(this,(function(r){for(e=mf(t),n=0,i=t.kr;n<i.length;n++)o=i[n],e.Er(o.mutations);return[2]}))}))}function ff(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return i=t.kr.shift(),o=Bc.from(i,e,n),[4,af(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}))];case 1:return r.sent(),[4,sf(t)];case 2:return r.sent(),[2]}}))}))}function pf(t,e){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return e&&mf(t).pr?[4,function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return tu(i=e.code)&&i!==Lo.ABORTED?(n=t.kr.shift(),mf(t).sr(),[4,af(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return r.sent(),[4,sf(t)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return uf(t)&&cf(t),[2]}}))}))}function df(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=Ho(t),e?(n.Or.delete(2),[4,Hl(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,zl(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function vf(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Ho(t);return r.br(),new jl(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:ef.bind(null,t),Ri:nf.bind(null,t),_r:rf.bind(null,t)}),t.Mr.push((function(n){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),$l(t)?Yl(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),tf(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function mf(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Ho(t);return r.br(),new ql(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:hf.bind(null,t),Ri:pf.bind(null,t),Ir:lf.bind(null,t),Tr:ff.bind(null,t)}),t.Mr.push((function(n){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,sf(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Vo("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qr}var yf=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Nc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Mo(Lo.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function gf(t,e){if(jo("AsyncQueue",e+": "+t),xc(t))return new Mo(Lo.UNAVAILABLE,e+": "+t);throw t}var bf=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ga.comparator(e.key,n.key)}:function(t,e){return ga.comparator(t.key,e.key)},this.keyedMap=hu(),this.sortedSet=new nu(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),wf=function(){function t(){this.Kr=new nu(ga.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Go():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),_f=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,bf.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ps(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),If=function(){this.Wr=void 0,this.listeners=[]},Tf=function(){this.queries=new Ch((function(t){return ds(t)}),ps),this.onlineState="Unknown",this.Gr=new Set};function Ef(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,a,s,u,c;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:if(n=Ho(t),i=e.query,o=!1,(a=n.queries.get(i))||(o=!0,a=new If),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),s=a,[4,n.onListen(i)];case 2:return s.Wr=r.sent(),[3,4];case 3:return u=r.sent(),c=gf(u,"Initialization of query '"+vs(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(i,a),a.listeners.push(e),e.zr(n.onlineState),a.Wr&&e.Hr(a.Wr)&&Nf(n),[2]}}))}))}function Sf(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,a,s;return(0,r.Jh)(this,(function(r){return n=Ho(t),i=e.query,o=!1,(a=n.queries.get(i))&&(s=a.listeners.indexOf(e))>=0&&(a.listeners.splice(s,1),o=0===a.listeners.length),o?[2,(n.queries.delete(i),n.onUnlisten(i))]:[2]}))}))}function Af(t,e){for(var n=Ho(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(a)&&(r=!0);u.Wr=a}}r&&Nf(n)}function kf(t,e,n){var r=Ho(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function Nf(t){t.Gr.forEach((function(t){t.next()}))}var Cf=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new _f(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=_f.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Rf=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Df=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Mu(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Bu(this.R,t.document,!1):La.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Ou(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=Of(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Df(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],h=(e.get(c)||du()).add(a);e.set(c,h)}}return e},t.prototype.complete=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e,n,i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,sl(this.localStore,new Df(this.R),this.documents,this.ro.id)];case 1:t=r.sent(),e=this.co(this.documents),n=0,i=this.queries,r.label=2;case 2:return n<i.length?(o=i[n],[4,ul(this.localStore,o,e.get(o.name))]):[3,5];case 3:r.sent(),r.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Gh(Object.assign({},this.progress),t))]}}))}))}}();function Of(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Pf=function(t){this.key=t},xf=function(t){this.key=t},Lf=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=du(),this.mutatedKeys=du(),this.lo=ys(t),this.fo=new bf(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new wf,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=os(this.query)&&i.size===this.query.limit?i.last():null,c=as(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=ms(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data.isEqual(l.data)?f!==p&&(r.track({type:3,doc:l}),d=!0):n.yo(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(s=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(s=!0)),d&&(l?(a=a.add(l),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),os(this.query)||as(this.query))for(;a.size>this.query.limit;){var h=os(this.query)?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Go()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new _f(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new wf,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=du(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new xf(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Pf(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=du();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return _f.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Mf=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Uf=function(t){this.key=t,this.bo=!1},Ff=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Ch((function(t){return ds(t)}),ps),this.Vo=new Map,this.So=new Set,this.Do=new nu(ga.comparator),this.Co=new Map,this.No=new hl,this.xo={},this.Fo=new Map,this.ko=yh.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Vf(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,a,s,u;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=dp(t),(a=n.Po.get(e))?(i=a.targetId,n.sharedClientState.addLocalQueryTarget(i),o=a.view.Ro(),[3,4]):[3,1];case 1:return[4,el(n.localStore,ls(e))];case 2:return s=r.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,[4,jf(n,e,i,"current"===u)];case 3:o=r.sent(),n.isPrimaryClient&&Wl(n.remoteStore,s),r.label=4;case 4:return[2,o]}}))}))}function jf(t,e,n,i){return(0,r.mG)(this,void 0,void 0,(function(){var o,a,s,u,c,h;return(0,r.Jh)(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,i){return function(t,e,n,i){return(0,r.mG)(this,void 0,void 0,(function(){var o,a,s;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return(o=e.view._o(n)).Nn?[4,rl(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,o)}))]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return a=i&&i.targetChanges.get(e.targetId),s=e.view.applyChanges(o,t.isPrimaryClient,a),[2,(Zf(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,i)},[4,rl(t.localStore,e,!0)];case 1:return o=l.sent(),a=new Lf(e,o.Bn),s=a._o(o.documents),u=gu.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState),c=a.applyChanges(s,t.isPrimaryClient,u),Zf(t,n,c.To),h=new Mf(e,n,a),[2,(t.Po.set(e,h),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot)]}}))}))}function qf(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=Ho(t),i=n.Po.get(e),(o=n.Vo.get(i.targetId)).length>1?[2,(n.Vo.set(i.targetId,o.filter((function(t){return!ps(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)?[3,2]:[4,nl(n.localStore,i.targetId,!1).then((function(){n.sharedClientState.clearQueryState(i.targetId),Jl(n.remoteStore,i.targetId),Yf(n,i.targetId)})).catch(Ih)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return Yf(n,i.targetId),[4,nl(n.localStore,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function Bf(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,a,s;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:i=vp(t),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(t,e){var n,r=Ho(t),i=Yo.now(),o=e.reduce((function(t,e){return t.add(e.key)}),du());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],h=qs(c,n.get(c.key));null!=h&&a.push(new Hs(c.key,h,xa(h.value.mapValue),Ms.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(i.localStore,e)];case 2:return o=r.sent(),i.sharedClientState.addPendingMutation(o.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new nu(Jo)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(i,o.batchId,n),[4,np(i,o.changes)];case 3:return r.sent(),[4,sf(i.remoteStore)];case 4:return r.sent(),[3,6];case 5:return a=r.sent(),s=gf(a,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Gf(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:n=Ho(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,$h(n.localStore,e)];case 2:return i=r.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Ko(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Ko(r.bo):t.removedDocuments.size>0&&(Ko(r.bo),r.bo=!1))})),[4,np(n,i,e)];case 3:return r.sent(),[3,6];case 4:return[4,Ih(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Kf(t,e,n){var r=Ho(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Ho(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Nf(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Hf(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,a,s,u,c;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return(i=Ho(t)).sharedClientState.updateQueryState(e,"rejected",n),o=i.Co.get(e),(a=o&&o.key)?(s=(s=new nu(ga.comparator)).insert(a,La.newNoDocument(a,$o.min())),u=du().add(a),c=new yu($o.min(),new Map,new ou(Jo),s,u),[4,Gf(i,c)]):[3,2];case 1:return r.sent(),i.Do=i.Do.remove(a),i.Co.delete(e),ep(i),[3,4];case 2:return[4,nl(i.localStore,e,!1).then((function(){return Yf(i,e,n)})).catch(Ih)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function zf(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:n=Ho(t),i=e.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Qh(n.localStore,e)];case 2:return o=r.sent(),Qf(n,i,null),Xf(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),[4,np(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,Ih(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Wf(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:i=Ho(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(t,e){var n=Ho(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return Ko(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(i.localStore,e)];case 2:return o=r.sent(),Qf(i,e,n),Xf(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),[4,np(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,Ih(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Jf(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,a,s;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:Zl((n=Ho(t)).remoteStore)||Vo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(t){var e=Ho(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(i=r.sent())?[2,void e.resolve()]:((o=n.Fo.get(i)||[]).push(e),n.Fo.set(i,o),[3,4]);case 3:return a=r.sent(),s=gf(a,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Xf(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function Qf(t,e,n){var r=Ho(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Yf(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||$f(t,e)}))}function $f(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Jl(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),ep(t))}function Zf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Pf?(t.No.addReference(o.key,e),tp(t,o)):o instanceof xf?(Vo("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||$f(t,o.key)):Go()}}function tp(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Vo("SyncEngine","New document in limbo: "+n),t.So.add(r),ep(t))}function ep(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new ga(ra.fromString(e)),r=t.ko.next();t.Co.set(r,new Uf(n)),t.Do=t.Do.insert(n,r),Wl(t.remoteStore,new Gc(ls(is(n.path)),r,2,xo.o))}}function np(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,a,s;return(0,r.Jh)(this,(function(u){switch(u.label){case 0:return i=Ho(t),o=[],a=[],s=[],i.Po.isEmpty()?[3,3]:(i.Po.forEach((function(t,r){s.push(i.Oo(r,e,n).then((function(t){if(t){i.isPrimaryClient&&i.sharedClientState.updateQueryState(r.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=Hh.Pn(r.targetId,t);a.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),i.vo._r(o),[4,function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,a,s,u,c,h,l;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:n=Ho(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Cc.forEach(e,(function(e){return Cc.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Cc.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!xc(i=r.sent()))throw i;return Vo("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,a=e;o<a.length;o++)s=a[o],u=s.targetId,s.fromCache||(c=n.Fn.get(u),h=c.snapshotVersion,l=c.withLastLimboFreeSnapshotVersion(h),n.Fn=n.Fn.insert(u,l));return[2]}}))}))}(i.localStore,a)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function rp(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return(n=Ho(t)).currentUser.isEqual(e)?[3,3]:(Vo("SyncEngine","User change. New user:",e.toKey()),[4,Xh(n.localStore,e)]);case 1:return i=r.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new Mo(Lo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),[4,np(n,i.Ln)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}function ip(t,e){var n=Ho(t),r=n.Co.get(e);if(r&&r.bo)return du().add(r.key);var i=du(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function op(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,rl((n=Ho(t)).localStore,e.query,!0)];case 1:return i=r.sent(),o=e.view.Ao(i),[2,(n.isPrimaryClient&&Zf(n,e.targetId,o.To),o)]}}))}))}function ap(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){return[2,ol((e=Ho(t)).localStore).then((function(t){return np(e,t)}))]}))}))}function sp(t,e,n,i){return(0,r.mG)(this,void 0,void 0,(function(){var o,a;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,function(t,e){var n=Ho(t),r=Ho(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):Cc.resolve(null)}))}))}((o=Ho(t)).localStore,e)];case 1:return null===(a=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,sf(o.remoteStore)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Qf(o,e,i||null),Xf(o,e),function(t,e){Ho(Ho(t)._n).Gt(e)}(o.localStore,e)):Go(),r.label=4;case 4:return[4,np(o,a)];case 5:return r.sent(),[3,7];case 6:Vo("SyncEngine","Cannot apply mutation batch with id: "+e),r.label=7;case 7:return[2]}}))}))}function up(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,a,s,u,c,h;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return dp(n=Ho(t)),vp(n),!0!==e||!0===n.$o?[3,3]:(i=n.sharedClientState.getAllActiveQueryTargets(),[4,cp(n,i.toArray())]);case 1:return o=r.sent(),n.$o=!0,[4,df(n.remoteStore,!0)];case 2:for(r.sent(),a=0,s=o;a<s.length;a++)u=s[a],Wl(n.remoteStore,u);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(c=[],h=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):h=h.then((function(){return Yf(n,e),nl(n.localStore,e,!0)})),Jl(n.remoteStore,e)})),[4,h]);case 4:return r.sent(),[4,cp(n,c)];case 5:return r.sent(),function(t){var e=Ho(t);e.Co.forEach((function(t,n){Jl(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new nu(ga.comparator)}(n),n.$o=!1,[4,df(n.remoteStore,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))}function cp(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,a,s,u,c,h,l,f,p,d,v,m;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:n=Ho(t),i=[],o=[],a=0,s=e,r.label=1;case 1:return a<s.length?(u=s[a],c=void 0,(h=n.Vo.get(u))&&0!==h.length?[4,el(n.localStore,ls(h[0]))]:[3,7]):[3,13];case 2:c=r.sent(),l=0,f=h,r.label=3;case 3:return l<f.length?(p=f[l],d=n.Po.get(p),[4,op(n,d)]):[3,6];case 4:(v=r.sent()).snapshot&&o.push(v.snapshot),r.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,il(n.localStore,u)];case 8:return m=r.sent(),[4,el(n.localStore,m)];case 9:return c=r.sent(),[4,jf(n,hp(m),u,!1)];case 10:r.sent(),r.label=11;case 11:i.push(c),r.label=12;case 12:return a++,[3,1];case 13:return[2,(n.vo._r(o),i)]}}))}))}function hp(t){return rs(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function lp(t){var e=Ho(t);return Ho(Ho(e.localStore).persistence).fn()}function fp(t,e,n,i){return(0,r.mG)(this,void 0,void 0,(function(){var o,a,s;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return(o=Ho(t)).$o?(Vo("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ol(o.localStore)];case 3:return a=r.sent(),s=yu.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,np(o,a,s)];case 4:return r.sent(),[3,8];case 5:return[4,nl(o.localStore,e,!0)];case 6:return r.sent(),Yf(o,e,i),[3,8];case 7:Go(),r.label=8;case 8:return[2]}}))}))}function pp(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,a,s,u,c,h,l,f,p;return(0,r.Jh)(this,(function(d){switch(d.label){case 0:if(!(i=dp(t)).$o)return[3,10];o=0,a=e,d.label=1;case 1:return o<a.length?(s=a[o],i.Vo.has(s)?(Vo("SyncEngine","Adding an already active target "+s),[3,5]):[4,il(i.localStore,s)]):[3,6];case 2:return u=d.sent(),[4,el(i.localStore,u)];case 3:return c=d.sent(),[4,jf(i,hp(u),c.targetId,!1)];case 4:d.sent(),Wl(i.remoteStore,c),d.label=5;case 5:return o++,[3,1];case 6:h=function(t){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return i.Vo.has(t)?[4,nl(i.localStore,t,!1).then((function(){Jl(i.remoteStore,t),Yf(i,t)})).catch(Ih)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,f=n,d.label=7;case 7:return l<f.length?(p=f[l],[5,h(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function dp(t){var e=Ho(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ip.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Hf.bind(null,e),e.vo._r=Af.bind(null,e.eventManager),e.vo.Mo=kf.bind(null,e.eventManager),e}function vp(t){var e=Ho(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zf.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Wf.bind(null,e),e}var mp=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return this.R=Ul(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Jh(this.persistence,new zh,t.initialUser,this.R)},t.prototype.qo=function(t){return new ml(gl.bs,this.R)},t.prototype.Bo=function(t){return new Cl},t.prototype.terminate=function(){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),yp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,r.ZT)(e,t),e.prototype.initialize=function(e){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,al(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,vp(this.Ko.syncEngine)];case 4:return n.sent(),[4,sf(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Qo=function(t){return Jh(this.persistence,new zh,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Sh(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Bh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ch.withCacheSize(this.cacheSizeBytes):ch.DEFAULT;return new Vh(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Ll(),Ml(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Cl},e}(mp),gp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,r.ZT)(e,t),e.prototype.initialize=function(e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i=this;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Nl?(this.sharedClientState.syncEngine={ui:sp.bind(null,n),ai:fp.bind(null,n),hi:pp.bind(null,n),fn:lp.bind(null,n),ci:ap.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.He((function(t){return(0,r.mG)(i,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return[4,up(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=Ll();if(!Nl.yt(e))throw new Mo(Lo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Bh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Nl(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(yp),bp=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Kf(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=rp.bind(null,this.syncEngine),[4,df(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Tf},t.prototype.createDatastore=function(t){var e,n=Ul(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new xl(e));return function(t,e,n){return new Bl(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Kf(a.syncEngine,t,0)},o=Dl.yt()?new Dl:new Rl,new Kl(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new Ff(t,e,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return e=Ho(t),Vo("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,zl(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();var wp=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),_p=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Nc,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e,n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,this.Jo()];case 1:return null===(t=r.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return i=r.sent(),[2,new Rf(JSON.parse(i),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Mo(Lo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,a,s,u;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=Ho(t),i=Vu(n.R)+"/documents",o={documents:e.map((function(t){return Lu(n.R,t)}))},[4,n.$i("BatchGetDocuments",i,o)];case 1:return a=r.sent(),s=new Map,a.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Ko(!!e.found),e.found.name,e.found.updateTime;var n=Mu(t,e.found.name),r=Ou(e.found.updateTime),i=new Pa({mapValue:{fields:e.found.fields}});return La.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Ko(!!e.missing),Ko(!!e.readTime);var n=Mu(t,e.missing),r=Ou(e.readTime);return La.newNoDocument(n,r)}(t,e):Go()}(n.R,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Ko(!!e),u.push(e)})),u)]}}))}))}(this.datastore,t)];case 1:return[2,((e=i.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Ys(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ga.fromPath(n);e.mutations.push(new $s(r,e.precondition(r)))})),[4,function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=Ho(t),i=Vu(n.R)+"/documents",o={writes:e.map((function(t){return Gu(n.R,t)}))},[4,n.Ni("Commit",i,o)];case 1:return r.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Go();e=$o.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Mo(Lo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Ms.updateTime(e):Ms.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual($o.min()))throw new Mo(Lo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ms.updateTime(e)}return Ms.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Ip=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Fl(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return(0,r.mG)(t,void 0,void 0,(function(){var t,e,n=this;return(0,r.Jh)(this,(function(r){return t=new _p(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!va(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!tu(e)}return!1},t}(),Tp=function(){function t(t,e,n){var i=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=bl.UNAUTHENTICATED,this.clientId=Wo.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return(0,r.mG)(i,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return Vo("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Mo(Lo.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Nc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return(0,r.mG)(t,void 0,void 0,(function(){var t,n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=gf(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function Ep(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o=this;return(0,r.Jh)(this,(function(a){switch(a.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Vo("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=a.sent(),[4,e.initialize(n)];case 2:return a.sent(),i=n.initialUser,t.setCredentialChangeListener((function(t){return(0,r.mG)(o,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return i.isEqual(t)?[3,2]:[4,Xh(e.localStore,t)];case 1:n.sent(),i=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Sp(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Ap(t)];case 1:return n=o.sent(),Vo("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return i=o.sent(),[4,e.initialize(n,i)];case 3:return o.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return(n=Ho(t)).asyncQueue.verifyOperationInProgress(),Vo("RemoteStore","RemoteStore received new credentials"),i=Zl(n),n.Or.add(3),[4,zl(n)];case 1:return r.sent(),i&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return r.sent(),n.Or.delete(3),[4,Hl(n)];case 3:return r.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function Ap(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Vo("FirestoreClient","Using default OfflineComponentProvider"),[4,Ep(t,new mp)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function kp(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Vo("FirestoreClient","Using default OnlineComponentProvider"),[4,Sp(t,new bp)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Np(t){return Ap(t).then((function(t){return t.persistence}))}function Cp(t){return Ap(t).then((function(t){return t.localStore}))}function Rp(t){return kp(t).then((function(t){return t.remoteStore}))}function Dp(t){return kp(t).then((function(t){return t.syncEngine}))}function Op(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,kp(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Vf.bind(null,e.syncEngine),n.onUnlisten=qf.bind(null,e.syncEngine),n)]}}))}))}function Pp(t,e,n){var i=this;void 0===n&&(n={});var o=new Nc;return t.asyncQueue.enqueueAndForget((function(){return(0,r.mG)(i,void 0,void 0,(function(){var i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return i=function(t,e,n,r,i){var o=new wp({next:function(o){e.enqueueAndForget((function(){return Sf(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Mo(Lo.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Mo(Lo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new Cf(is(n.path),o,{includeMetadataChanges:!0,so:!0});return Ef(t,a)},[4,Op(t)];case 1:return[2,i.apply(void 0,[r.sent(),t.asyncQueue,e,n,o])]}}))}))})),o.promise}function xp(t,e,n){var i=this;void 0===n&&(n={});var o=new Nc;return t.asyncQueue.enqueueAndForget((function(){return(0,r.mG)(i,void 0,void 0,(function(){var i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return i=function(t,e,n,r,i){var o=new wp({next:function(n){e.enqueueAndForget((function(){return Sf(t,a)})),n.fromCache&&"server"===r.source?i.reject(new Mo(Lo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new Cf(n,o,{includeMetadataChanges:!0,so:!0});return Ef(t,a)},[4,Op(t)];case 1:return[2,i.apply(void 0,[r.sent(),t.asyncQueue,e,n,o])]}}))}))})),o.promise}var Lp=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},Mp=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Up=new Map,Fp=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Vp=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(bl.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),jp=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),qp=function(){function t(t){var e=this;this.currentUser=bl.UNAUTHENTICATED,this.oc=new Nc,this.cc=0,this.changeListener=function(){return Promise.resolve()},this.uc=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.ac=function(){e.cc++,e.currentUser=e.hc(),e.oc.resolve(),e.uc&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Vo("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.lc(),e.auth.addAuthTokenListener(e.ac)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):e.uc&&(Vo("FirebaseCredentialsProvider","Auth not yet detected"),e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)})))}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Vo("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Ko("string"==typeof n.accessToken),new Fp(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){this.uc=!0,this.asyncQueue=t,this.changeListener=e},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.ac),this.changeListener=function(){return Promise.resolve()}},t.prototype.hc=function(){var t=this.auth&&this.auth.getUid();return Ko(null===t||"string"==typeof t),new bl(t)},t.prototype.lc=function(){var t=this;this.uc&&(this.uc=!1,this.asyncQueue.enqueueRetryable((function(){return(0,r.mG)(t,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,this.changeListener(this.currentUser)];case 2:return t.sent(),this.uc=!0,[2]}}))}))})))},t}(),Bp=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n,this.type="FirstParty",this.user=bl.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.dc},e=this.fc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.wc&&(t["X-Goog-Iam-Authorization-Token"]=this.wc),t},enumerable:!1,configurable:!0}),t}(),Gp=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n}return t.prototype.getToken=function(){return Promise.resolve(new Bp(this.fc,this.dc,this.wc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(bl.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Kp(t,e,n){if(!n)throw new Mo(Lo.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Hp(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function zp(t,e,n,r){if(!0===e&&!0===r)throw new Mo(Lo.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Wp(t){if(!ga.isDocumentKey(t))throw new Mo(Lo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Jp(t){if(ga.isDocumentKey(t))throw new Mo(Lo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Xp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Go()}function Qp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Mo(Lo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Xp(t);throw new Mo(Lo.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Yp(t,e){if(e<=0)throw new Mo(Lo.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var $p=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Mo(Lo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Mo(Lo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,zp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Zp=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $p({}),this._settingsFrozen=!1,t instanceof Mp?(this._databaseId=t,this._credentials=new Vp):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Mo(Lo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mp(t.options.projectId)}(t),this._credentials=new qp(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Mo(Lo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Mo(Lo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $p(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Vp;switch(t.type){case"gapi":var e=t.client;return Ko(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Gp(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Mo(Lo.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=Up.get(this))&&(Vo("ComponentProvider","Removing Datastore"),Up.delete(this),t.terminate()),Promise.resolve();var t},t}(),td=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new nd(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),ed=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),nd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,is(r))||this)._path=r,i.type="collection",i}return(0,r.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new td(this.firestore,null,new ga(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(ed);function rd(t,e){for(var n,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(t=g(t),Kp("collection","path",e),t instanceof Zp)return Jp(n=ra.fromString.apply(ra,(0,r.ev)([e],i))),new nd(t,null,n);if(!(t instanceof td||t instanceof nd))throw new Mo(Lo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Jp(n=ra.fromString.apply(ra,(0,r.ev)([t.path],i)).child(ra.fromString(e))),new nd(t.firestore,null,n)}function id(t,e){for(var n,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(t=g(t),1===arguments.length&&(e=Wo.u()),Kp("doc","path",e),t instanceof Zp)return Wp(n=ra.fromString.apply(ra,(0,r.ev)([e],i))),new td(t,null,new ga(n));if(!(t instanceof td||t instanceof nd))throw new Mo(Lo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Wp(n=t._path.child(ra.fromString.apply(ra,(0,r.ev)([e],i)))),new td(t.firestore,t instanceof nd?t.converter:null,new ga(n))}function od(t,e){return t=g(t),e=g(e),(t instanceof td||t instanceof nd)&&(e instanceof td||e instanceof nd)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function ad(t,e){return t=g(t),e=g(e),t instanceof ed&&e instanceof ed&&t.firestore===e.firestore&&ps(t._query,e._query)&&t.converter===e.converter}var sd=function(){function t(){var t=this;this._c=Promise.resolve(),this.mc=[],this.yc=!1,this.gc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new Fl(this,"async_queue_retry"),this.Ac=function(){var e=Ml();e&&Vo("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Ml();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ac)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.yc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Rc(),this.bc(t)},t.prototype.enterRestrictedMode=function(){if(!this.yc){this.yc=!0;var t=Ml();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ac)}},t.prototype.enqueue=function(t){return this.Rc(),this.yc?new Promise((function(t){})):this.bc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.mc.push(t),e.vc()}))},t.prototype.vc=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:if(0===this.mc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.mc[0]()];case 2:return n.sent(),this.mc.shift(),this.Zi.reset(),[3,4];case 3:if(!xc(t=n.sent()))throw t;return Vo("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.mc.length>0&&this.Zi.ji((function(){return e.vc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.bc=function(t){var e=this,n=this._c.then((function(){return e.Tc=!0,t().catch((function(t){throw e.Ec=t,e.Tc=!1,jo("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Tc=!1,t}))}));return this._c=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Rc(),this.Ic.indexOf(t)>-1&&(e=0);var i=yf.createAndSchedule(this,t,e,n,(function(t){return r.Pc(t)}));return this.gc.push(i),i},t.prototype.Rc=function(){this.Ec&&Go()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Vc=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return[4,t=this._c];case 1:e.sent(),e.label=2;case 2:if(t!==this._c)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Sc=function(t){for(var e=0,n=this.gc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Dc=function(t){var e=this;return this.Vc().then((function(){e.gc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.gc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Vc()}))},t.prototype.Cc=function(t){this.Ic.push(t)},t.prototype.Pc=function(t){var e=this.gc.indexOf(t);this.gc.splice(e,1)},t}();function ud(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Nc,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var cd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new sd,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,r.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||ld(this),this._firestoreClient.terminate()},e}(Zp);function hd(t){return t._firestoreClient||ld(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ld(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Lp(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Tp(t._credentials,t._queue,r)}function fd(t,e,n){var i=this,o=new Nc;return t.asyncQueue.enqueue((function(){return(0,r.mG)(i,void 0,void 0,(function(){var i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,Ep(t,n)];case 1:return r.sent(),[4,Sp(t,e)];case 2:return r.sent(),o.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Lo.FAILED_PRECONDITION||t.code===Lo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(i=r.sent()))throw i;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),o.reject(i),[3,4];case 4:return[2]}}))}))})).then((function(){return o.promise}))}function pd(t){if(t._initialized||t._terminated)throw new Mo(Lo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var dd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oa(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),vd=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(sa.fromBase64String(e))}catch(e){throw new Mo(Lo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(sa.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),md=function(t){this._methodName=t},yd=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Mo(Lo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Mo(Lo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Jo(this._lat,t._lat)||Jo(this._long,t._long)},t}(),gd=/^__.*__$/,bd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Hs(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ks(t,this.data,e,this.fieldTransforms)},t}(),wd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Hs(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function _d(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Go()}}var Id=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Nc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"xc",{get:function(){return this.settings.xc},enumerable:!1,configurable:!0}),t.prototype.Fc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,$c:!1});return r.Oc(t),r},t.prototype.Mc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,$c:!1});return r.Nc(),r},t.prototype.Lc=function(t){return this.Fc({path:void 0,$c:!0})},t.prototype.Bc=function(t){return Bd(t,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Uc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Nc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Oc(this.path.get(t))},t.prototype.Oc=function(t){if(0===t.length)throw this.Bc("Document fields must not be empty");if(_d(this.xc)&&gd.test(t))throw this.Bc('Document fields cannot begin and end with "__"')},t}(),Td=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Ul(t)}return t.prototype.Qc=function(t,e,n,r){return void 0===r&&(r=!1),new Id({xc:t,methodName:e,Uc:n,path:oa.emptyPath(),$c:!1,qc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Ed(t){var e=t._freezeSettings(),n=Ul(t._databaseId);return new Td(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Sd(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Qc(o.merge||o.mergeFields?2:0,e,n,i);Fd("Data must be an object, but it was:",a,r);var s,u,c=Md(r,a);if(o.merge)s=new aa(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=Vd(e,f[l],n);if(!a.contains(p))throw new Mo(Lo.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Gd(h,p)||h.push(p)}s=new aa(h),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new bd(new Pa(c),s,u)}var Ad=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.xc)throw 1===t.xc?t.Bc(this._methodName+"() can only appear at the top level of your update data"):t.Bc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(md);function kd(t,e,n){return new Id({xc:3,Uc:e.settings.Uc,methodName:t._methodName,$c:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Nd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new xs(t.path,new As)},e.prototype.isEqual=function(t){return t instanceof e},e}(md),Cd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,r.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=kd(this,t,!0),n=this.Kc.map((function(t){return Ld(t,e)})),r=new ks(n);return new xs(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(md),Rd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,r.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=kd(this,t,!0),n=this.Kc.map((function(t){return Ld(t,e)})),r=new Cs(n);return new xs(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(md),Dd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return(0,r.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new Ds(t.R,_s(t.R,this.jc));return new xs(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(md);function Od(t,e,n,r){var i=t.Qc(1,e,n);Fd("Data must be an object, but it was:",i,r);var o=[],a=Pa.empty();ta(r,(function(t,r){var s=qd(e,t,n);r=g(r);var u=i.Mc(s);if(r instanceof Ad)o.push(s);else{var c=Ld(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new aa(o);return new wd(a,s,i.fieldTransforms)}function Pd(t,e,n,r,i,o){var a=t.Qc(1,e,n),s=[Vd(e,r,n)],u=[i];if(o.length%2!=0)throw new Mo(Lo.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Vd(e,o[c])),u.push(o[c+1]);for(var h=[],l=Pa.empty(),f=s.length-1;f>=0;--f)if(!Gd(h,s[f])){var p=s[f],d=u[f];d=g(d);var v=a.Mc(p);if(d instanceof Ad)h.push(p);else{var m=Ld(d,v);null!=m&&(h.push(p),l.set(p,m))}}var y=new aa(h);return new wd(l,y,a.fieldTransforms)}function xd(t,e,n,r){return void 0===r&&(r=!1),Ld(n,t.Qc(r?4:3,e))}function Ld(t,e){if(Ud(t=g(t)))return Fd("Unsupported field value:",e,t),Md(t,e);if(t instanceof md)return function(t,e){if(!_d(e.xc))throw e.Bc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Bc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.$c&&4!==e.xc)throw e.Bc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Ld(o[i],e.Lc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=g(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return _s(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Yo.fromDate(t);return{timestampValue:Cu(e.R,n)}}if(t instanceof Yo)return n=new Yo(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Cu(e.R,n)};if(t instanceof yd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vd)return{bytesValue:Ru(e.R,t._byteString)};if(t instanceof td){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Bc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Pu(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Bc("Unsupported field value: "+Xp(t))}(t,e)}function Md(t,e){var n={};return ea(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ta(t,(function(t,r){var i=Ld(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Ud(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Yo||t instanceof yd||t instanceof vd||t instanceof td||t instanceof md)}function Fd(t,e,n){if(!Ud(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Xp(n);throw"an object"===r?e.Bc(t+" a custom object"):e.Bc(t+" "+r)}}function Vd(t,e,n){if((e=g(e))instanceof dd)return e._internalPath;if("string"==typeof e)return qd(t,e);throw Bd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var jd=new RegExp("[~\\*/\\[\\]]");function qd(t,e,n){if(e.search(jd)>=0)throw Bd("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(dd.bind.apply(dd,(0,r.ev)([void 0],e.split(".")))))._internalPath}catch(qe){throw Bd("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Bd(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Mo(Lo.INVALID_ARGUMENT,(s+=". ")+t+u)}function Gd(t,e){return t.some((function(t){return t.isEqual(e)}))}var Kd=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new td(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Hd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(zd("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Hd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Kd);function zd(t,e){return"string"==typeof e?qd(t,e):e instanceof dd?e._internalPath:e._delegate._internalPath}var Wd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Jd=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return(0,r.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Xd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(zd("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Kd),Xd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Jd),Qd=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Wd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Xd(n._firestore,n._userDataWriter,r.key,r,new Wd(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Mo(Lo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new Xd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Wd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Xd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Wd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Yd(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Yd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Go()}}function $d(t,e){return t instanceof Jd&&e instanceof Jd?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Qd&&e instanceof Qd&&t._firestore===e._firestore&&ad(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Zd(t){if(as(t)&&0===t.explicitOrderBy.length)throw new Mo(Lo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var tv=function(){};function ev(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var nv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Wc=e,i.Gc=n,i.zc=r,i.type="where",i}return(0,r.ZT)(e,t),e.prototype._apply=function(t){var e=Ed(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){cv(a,o);for(var u=[],c=0,h=a;c<h.length;c++){var l=h[c];u.push(uv(r,t,l))}s={arrayValue:{values:u}}}else s=uv(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||cv(a,o),s=xd(n,"where",a,"in"===o||"not-in"===o);var f=qa.create(i,o,s);return function(t,e){if(e.g()){var n=us(t);if(null!==n&&!n.isEqual(e.field))throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=ss(t);null!==r&&hv(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Mo(Lo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Mo(Lo.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.Wc,this.Gc,this.zc);return new ed(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new ns(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(tv),rv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Wc=e,r.Hc=n,r.type="orderBy",r}return(0,r.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new $a(e,n);return function(t,e){if(null===ss(t)){var n=us(t);null!==n&&hv(t,n,e.field)}}(t,r),r}(t._query,this.Wc,this.Hc);return new ed(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new ns(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(tv),iv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,r.ZT)(e,t),e.prototype._apply=function(t){return new ed(t.firestore,t.converter,fs(t._query,this.Jc,this.Yc))},e}(tv),ov=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return(0,r.ZT)(e,t),e.prototype._apply=function(t){var e=sv(t,this.type,this.Xc,this.Zc);return new ed(t.firestore,t.converter,function(t,e){return new ns(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(tv),av=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return(0,r.ZT)(e,t),e.prototype._apply=function(t){var e=sv(t,this.type,this.Xc,this.Zc);return new ed(t.firestore,t.converter,function(t,e){return new ns(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(tv);function sv(t,e,n,r){if(n[0]=g(n[0]),n[0]instanceof Kd)return function(t,e,n,r,i){if(!r)throw new Mo(Lo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=hs(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(Aa(e,r.key));else{var c=r.data.field(u.field);if(fa(c))throw new Mo(Lo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Qa(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Ed(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new Mo(Lo.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!cs(t)&&-1!==c.indexOf("/"))throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(ra.fromString(c));if(!ga.isDocumentKey(h))throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new ga(h);s.push(Aa(e,l))}else{var f=xd(n,r,c);s.push(f)}}return new Qa(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function uv(t,e,n){if("string"==typeof(n=g(n))){if(""===n)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!cs(e)&&-1!==n.indexOf("/"))throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ra.fromString(n));if(!ga.isDocumentKey(r))throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Aa(t,new ga(r))}if(n instanceof td)return Aa(t,n._key);throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Xp(n)+".")}function cv(t,e){if(!Array.isArray(t)||0===t.length)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function hv(t,e,n){if(!n.isEqual(e))throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var lv=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),ba(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ha(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(la(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Go()}},t.prototype.convertObject=function(t,e){var n=this,r={};return ta(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new yd(ha(t.latitude),ha(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=pa(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(da(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=ca(t);return new Yo(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=ra.fromString(t);Ko(ic(n));var r=new Mp(n.get(1),n.get(3)),i=new ga(n.popFirst(5));return r.isEqual(e)||jo("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function fv(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var pv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,r.ZT)(e,t),e.prototype.convertBytes=function(t){return new vd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new td(this.firestore,null,e)},e}(lv),dv=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Ed(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=vv(t,this._firestore),i=fv(r.converter,e,n),o=Sd(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Ms.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=vv(t,this._firestore);return o="string"==typeof(e=g(e))||e instanceof dd?Pd(this._dataReader,"WriteBatch.update",a._key,e,n,r):Od(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,Ms.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=vv(t,this._firestore);return this._mutations=this._mutations.concat(new Ys(e._key,Ms.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Mo(Lo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function vv(t,e){if((t=g(t)).firestore!==e)throw new Mo(Lo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var mv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,r.ZT)(e,t),e.prototype.convertBytes=function(t){return new vd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new td(this.firestore,null,e)},e}(lv);function yv(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Qp(t,td);var o=Qp(t.firestore,cd),a=Ed(o);return bv(o,[("string"==typeof(e=g(e))||e instanceof dd?Pd(a,"updateDoc",t._key,e,n,r):Od(a,"updateDoc",t._key,e)).toMutation(t._key,Ms.exists(!0))])}function gv(t){for(var e,n,i,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];t=g(t);var s={includeMetadataChanges:!1},u=0;"object"!=typeof o[u]||ud(o[u])||(s=o[u],u++);var c,h,l,f={includeMetadataChanges:s.includeMetadataChanges};if(ud(o[u])){var p=o[u];o[u]=null===(e=p.next)||void 0===e?void 0:e.bind(p),o[u+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),o[u+2]=null===(i=p.complete)||void 0===i?void 0:i.bind(p)}if(t instanceof td)h=Qp(t.firestore,cd),l=is(t._key.path),c={next:function(e){o[u]&&o[u](wv(h,t,e))},error:o[u+1],complete:o[u+2]};else{var d=Qp(t,ed);h=Qp(d.firestore,cd),l=d._query;var v=new mv(h);c={next:function(t){o[u]&&o[u](new Qd(h,v,d,t))},error:o[u+1],complete:o[u+2]},Zd(t._query)}return function(t,e,n,i){var o=this,a=new wp(i),s=new Cf(e,a,n);return t.asyncQueue.enqueueAndForget((function(){return(0,r.mG)(o,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return e=Ef,[4,Op(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){a.Wo(),t.asyncQueue.enqueueAndForget((function(){return(0,r.mG)(o,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return e=Sf,[4,Op(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(hd(h),l,f,c)}function bv(t,e){return function(t,e){var n=this,i=new Nc;return t.asyncQueue.enqueueAndForget((function(){return(0,r.mG)(n,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=Bf,[4,Dp(t)];case 1:return[2,n.apply(void 0,[r.sent(),e,i])]}}))}))})),i.promise}(hd(t),e)}function wv(t,e,n){var r=n.docs.get(e._key),i=new mv(t);return new Jd(t,i,e._key,r,new Wd(n.hasPendingWrites,n.fromCache),e.converter)}var _v=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,r.ZT)(e,t),e.prototype.get=function(e){var n=this,r=vv(e,this._firestore),i=new mv(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Jd(n._firestore,i,r._key,t._document,new Wd(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Ed(t)}return t.prototype.get=function(t){var e=this,n=vv(t,this._firestore),r=new pv(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Go();var i=t[0];if(i.isFoundDocument())return new Kd(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Kd(e._firestore,r,n._key,null,n.converter);throw Go()}))},t.prototype.set=function(t,e,n){var r=vv(t,this._firestore),i=fv(r.converter,e,n),o=Sd(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=vv(t,this._firestore);return o="string"==typeof(e=g(e))||e instanceof dd?Pd(this._dataReader,"Transaction.update",a._key,e,n,r):Od(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=vv(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Iv(){if("undefined"==typeof Uint8Array)throw new Mo(Lo.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Tv(){if("undefined"==typeof atob)throw new Mo(Lo.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ev=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Tv(),new t(vd.fromBase64String(e))},t.fromUint8Array=function(e){return Iv(),new t(vd.fromUint8Array(e))},t.prototype.toBase64=function(){return Tv(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Iv(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Sv=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){pd(t=Qp(t,cd));var n=hd(t),r=t._freezeSettings(),i=new bp;return fd(n,i,new yp(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){pd(t=Qp(t,cd));var e=hd(t),n=t._freezeSettings(),r=new bp;return fd(e,r,new gp(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Mo(Lo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Nc;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return(0,r.mG)(e,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return Dc.yt()?(e=t+"main",[4,Dc.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Bh(t._databaseId,t._persistenceKey))];case 1:return i.sent(),n.resolve(),[3,3];case 2:return e=i.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Av=function(){function t(t,e,n){var r=this;this._delegate=e,this.tu=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Mp||(this.eu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||qo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,i){void 0===i&&(i={});var a=(t=Qp(t,Zp))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&qo("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},a),{host:e+":"+n,ssl:!1})),i.mockUserToken){var s=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[o.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),o.encodeString(JSON.stringify(s),!1),""].join(".")}(i.mockUserToken),u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new Mo(Lo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new jp(new Fp(s,new bl(u)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return(0,r.mG)(e,void 0,void 0,(function(){var e,n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,Np(t)];case 1:return e=r.sent(),[4,Rp(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Ho(t);return e.Or.delete(0),Hl(e)}(n))]}}))}))}))}(hd(Qp(this._delegate,cd)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return(0,r.mG)(e,void 0,void 0,(function(){var e,n;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return[4,Np(t)];case 1:return e=i.sent(),[4,Rp(t)];case 2:return n=i.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return(e=Ho(t)).Or.add(0),[4,zl(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(hd(Qp(this._delegate,cd)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&zp("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.tu.enableMultiTabIndexedDbPersistence(this):this.tu.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.tu.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.eu&&(this.eu._removeServiceInstance("firestore"),this.eu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Nc;return t.asyncQueue.enqueueAndForget((function(){return(0,r.mG)(e,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return e=Jf,[4,Dp(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(hd(Qp(this._delegate,cd)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,i=new wp(e);return t.asyncQueue.enqueueAndForget((function(){return(0,r.mG)(n,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Ho(t).Gr.add(e),e.next()},[4,Op(t)];case 1:return[2,e.apply(void 0,[n.sent(),i])]}}))}))})),function(){i.Wo(),t.asyncQueue.enqueueAndForget((function(){return(0,r.mG)(n,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Ho(t).Gr.delete(e)},[4,Op(t)];case 1:return[2,e.apply(void 0,[n.sent(),i])]}}))}))}))}}(hd(t=Qp(t,cd)),ud(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.eu)throw new Mo(Lo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.eu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new jv(this,rd(this._delegate,t))}catch(t){throw Ov(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Dv(this,id(this._delegate,t))}catch(t){throw Ov(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Uv(this,function(t,e){if(t=Qp(t,Zp),Kp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ed(t,null,function(t){return new ns(ra.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Ov(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,i=new Nc;return t.asyncQueue.enqueueAndForget((function(){return(0,r.mG)(n,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,function(t){return kp(t).then((function(t){return t.datastore}))}(t)];case 1:return n=r.sent(),new Ip(t.asyncQueue,n,e,i).run(),[2]}}))}))})),i.promise}(hd(t),(function(n){return e(new _v(t,n))}))}(this._delegate,(function(n){return t(new Nv(e,n))}))},t.prototype.batch=function(){var t=this;return hd(this._delegate),new Cv(new dv(this._delegate,(function(e){return bv(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Mo(Lo.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Mo(Lo.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),kv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,r.ZT)(e,t),e.prototype.convertBytes=function(t){return new Ev(new vd(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Dv.nu(e,this.firestore,null)},e}(lv);var Nv=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new kv(t)}return t.prototype.get=function(t){var e=this,n=qv(t);return this._delegate.get(n).then((function(t){return new Lv(e._firestore,new Jd(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=qv(t);return n?(Hp("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var s=qv(t);return 2===arguments.length?this._delegate.update(s,e):(i=this._delegate).update.apply(i,(0,r.ev)([s,e,n],o)),this},t.prototype.delete=function(t){var e=qv(t);return this._delegate.delete(e),this},t}(),Cv=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=qv(t);return n?(Hp("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var s=qv(t);return 2===arguments.length?this._delegate.update(s,e):(i=this._delegate).update.apply(i,(0,r.ev)([s,e,n],o)),this},t.prototype.delete=function(t){var e=qv(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Rv=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Xd(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Mv(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.su=function(e,n){var r=t.iu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new kv(e),n),i.set(n,o)),o},t}();Rv.iu=new WeakMap;var Dv=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new kv(t)}return t.ru=function(e,n,r){if(e.length%2!=0)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new td(n._delegate,r,new ga(e)))},t.nu=function(e,n,r){return new t(n,new td(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new jv(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new jv(this.firestore,rd(this._delegate,t))}catch(t){throw Ov(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=g(t))instanceof td&&od(this._delegate,t)},t.prototype.set=function(t,e){e=Hp("DocumentReference.set",e);try{return function(t,e,n){t=Qp(t,td);var r=Qp(t.firestore,cd),i=fv(t.converter,e,n);return bv(r,[Sd(Ed(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Ms.none())])}(this._delegate,t,e)}catch(t){throw Ov(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];try{return 1===arguments.length?yv(this._delegate,t):yv.apply(void 0,(0,r.ev)([this._delegate,t,e],n))}catch(t){throw Ov(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return bv(Qp((t=this._delegate).firestore,cd),[new Ys(t._key,Ms.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Pv(e),i=xv(e,(function(e){return new Lv(t.firestore,new Jd(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return gv(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Qp(t,td);var e=Qp(t.firestore,cd),n=hd(e),i=new mv(e);return function(t,e){var n=this,i=new Nc;return t.asyncQueue.enqueueAndForget((function(){return(0,r.mG)(n,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t,e){var n=Ho(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(o=r.sent()).isFoundDocument()?n.resolve(o):o.isNoDocument()?n.resolve(null):n.reject(new Mo(Lo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=r.sent(),o=gf(i,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}}))}))},[4,Cp(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,i])]}}))}))})),i.promise}(n,t._key).then((function(n){return new Jd(e,i,t._key,n,new Wd(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Qp(t,td);var e=Qp(t.firestore,cd);return Pp(hd(e),t._key,{source:"server"}).then((function(n){return wv(e,t,n)}))}(this._delegate):function(t){t=Qp(t,td);var e=Qp(t.firestore,cd);return Pp(hd(e),t._key).then((function(n){return wv(e,t,n)}))}(this._delegate)).then((function(t){return new Lv(e.firestore,new Jd(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Rv.su(this.firestore,e)):this._delegate.withConverter(null))},t}();function Ov(t,e,n){return t.message=t.message.replace(e,n),t}function Pv(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!ud(r))return r}return{}}function xv(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=ud(t[0])?t[0]:ud(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Lv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Dv(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return $d(this._delegate,t._delegate)},t}(),Mv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Lv),Uv=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new kv(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,ev(this._delegate,function(t,e,n){var r=e,i=zd("where",t);return new nv(i,r,n)}(e,n,r)))}catch(e){throw Ov(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,ev(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=zd("orderBy",t);return new rv(r,n)}(e,n)))}catch(e){throw Ov(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,ev(this._delegate,function(t){return Yp("limit",t),new iv("limit",t,"F")}(e)))}catch(e){throw Ov(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,ev(this._delegate,function(t){return Yp("limitToLast",t),new iv("limitToLast",t,"L")}(e)))}catch(e){throw Ov(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ev(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ov("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw Ov(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ev(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ov("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw Ov(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ev(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new av("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw Ov(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ev(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new av("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw Ov(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return ad(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Qp(t,ed);var e=Qp(t.firestore,cd),n=hd(e),i=new mv(e);return function(t,e){var n=this,i=new Nc;return t.asyncQueue.enqueueAndForget((function(){return(0,r.mG)(n,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,a,s,u;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,rl(t,e,!0)];case 1:return u=r.sent(),i=new Lf(e,u.Bn),o=i._o(u.documents),a=i.applyChanges(o,!1),n.resolve(a.snapshot),[3,3];case 2:return s=r.sent(),u=gf(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,Cp(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,i])]}}))}))})),i.promise}(n,t._query).then((function(n){return new Qd(e,i,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Qp(t,ed);var e=Qp(t.firestore,cd),n=hd(e),r=new mv(e);return xp(n,t._query,{source:"server"}).then((function(n){return new Qd(e,r,t,n)}))}(this._delegate):function(t){t=Qp(t,ed);var e=Qp(t.firestore,cd),n=hd(e),r=new mv(e);return Zd(t._query),xp(n,t._query).then((function(n){return new Qd(e,r,t,n)}))}(this._delegate)).then((function(t){return new Vv(e.firestore,new Qd(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Pv(e),i=xv(e,(function(e){return new Vv(t.firestore,new Qd(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return gv(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Rv.su(this.firestore,e)):this._delegate.withConverter(null))},t}(),Fv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Mv(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Vv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Uv(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Mv(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Fv(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Mv(n._firestore,r))}))},t.prototype.isEqual=function(t){return $d(this._delegate,t._delegate)},t}(),jv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,r.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Dv(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Dv(this.firestore,void 0===t?id(this._delegate):id(this._delegate,t))}catch(t){throw Ov(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Qp(t.firestore,cd),r=id(t),i=fv(t.converter,e);return bv(n,[Sd(Ed(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Ms.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new Dv(e.firestore,t)}))},e.prototype.isEqual=function(t){return od(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Rv.su(this.firestore,t)):this._delegate.withConverter(null))},e}(Uv);function qv(t){return Qp(t,td)}var Bv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(dd.bind.apply(dd,(0,r.ev)([void 0],t)))}return t.documentId=function(){return new t(oa.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=g(t))instanceof dd&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Gv=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Nd("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Ad("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Cd("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Rd("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Dd("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();var Kv,Hv={Firestore:Av,GeoPoint:yd,Timestamp:Yo,Blob:Ev,Transaction:Nv,WriteBatch:Cv,DocumentReference:Dv,DocumentSnapshot:Lv,Query:Uv,QueryDocumentSnapshot:Mv,QuerySnapshot:Vv,CollectionReference:jv,FieldPath:Bv,FieldValue:Gv,setLogLevel:function(t){var e;e=t,Uo.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new b("firestore",(function(t){return function(t,e){return new Av(t,new cd(t,e),new Sv)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Hv)))})(Kv=J),Kv.registerVersion("@firebase/firestore","2.3.2"),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var r=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,n){if(n){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(n=n(o=i[t=t[t.length-1]]))!=o&&null!=n&&e(i,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=r.setTimeout;n.prototype.c=function(t){a(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(Fe){this.f(Fe)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(Fe){n.reject(Fe)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(zi){o(zi)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),a=r.next();!a.done;a=r.next())i(a.value).Qa(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Qa(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var a=a||{},s=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function h(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function l(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function p(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==f(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function m(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++g)}var y="closure_uid_"+(1e9*Math.random()>>>0),g=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function I(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now;function E(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function S(t){return t}function A(t,e,n){this.code=C+t,this.message=e||R[t]||"",this.a=n||null}function k(t){var e=t&&t.code;return e?new A(e.substring(C.length),t.message,t.serverResponse):null}E(A,Error),A.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},A.prototype.toJSON=function(){return this.w()};var N,C="auth/",R={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},D={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function O(t){for(var e in D)if(D[e].id===t)return{firebaseEndpoint:(t=D[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function P(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function x(t){if(Error.captureStackTrace)Error.captureStackTrace(this,x);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function L(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");x.call(this,n+t[r])}function M(t,e){throw new L("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function U(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function F(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function V(){this.b=this.a=null}N=O("__EID__")?"__EID__":void 0,E(x,Error),x.prototype.name="CustomError",E(L,x),L.prototype.name="AssertionError",U.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var j=new U((function(){return new B}),(function(t){t.reset()}));function q(){var t=we,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}V.prototype.add=function(t,e){var n=j.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var G=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},K=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var H=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"===typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},z=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"===typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function X(t,e){return 0<=G(t,e)}function Q(t,e){var n;return(n=0<=(e=G(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"===typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function $(t){return Array.prototype.concat.apply([],arguments)}function Z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var tt,et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},nt=/&/g,rt=/</g,it=/>/g,ot=/"/g,at=/'/g,st=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function ht(t,e){return t<e?-1:t>e?1:0}t:{var lt=s.navigator;if(lt){var ft=lt.userAgent;if(ft){tt=ft;break t}}tt=""}function pt(t){return ct(tt,t)}function dt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function mt(t){var e,n={};for(e in t)n[e]=t[e];return n}var yt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<yt.length;o++)n=yt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&"undefined"!=typeof i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function wt(t,e){this.a=t===Et&&e||"",this.b=Tt}function _t(t){return t instanceof wt&&t.constructor===wt&&t.b===Tt?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}wt.prototype.sa=!0,wt.prototype.ra=function(){return this.a},wt.prototype.toString=function(){return"Const{"+this.a+"}"};var It,Tt={},Et={};function St(){if(void 0===It){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:S,createScript:S,createScriptURL:S})}catch(n){s.console&&s.console.error(n.message)}It=t}else It=t}return It}function At(t,e){this.a=e===Dt?t:""}function kt(t){return t instanceof At&&t.constructor===At?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function Nt(t,e){var n=_t(t);if(!Rt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=St();return new At(t=e?e.createScriptURL(t):t,Dt)}(t=n.replace(Ct,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof wt?_t(t):encodeURIComponent(String(t))})))}At.prototype.sa=!0,At.prototype.ra=function(){return this.a.toString()},At.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ct=/%{(\w+)}/g,Rt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Dt={};function Ot(t,e){this.a=e===Vt?t:""}function Pt(t){return t instanceof Ot&&t.constructor===Ot?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Ot.prototype.sa=!0,Ot.prototype.ra=function(){return this.a.toString()},Ot.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var xt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Lt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Mt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ut(t){if(t instanceof Ot)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Mt.test(t))t=new Ot(t,Vt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Lt);t=e&&xt.test(e[1])?new Ot(t,Vt):null}return t}function Ft(t){return t instanceof Ot?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Mt.test(t)||(t="about:invalid#zClosurez"),new Ot(t,Vt))}var Vt={},jt=new Ot("about:invalid#zClosurez",Vt);function qt(t,e,n){this.a=n===Bt?t:""}qt.prototype.sa=!0,qt.prototype.ra=function(){return this.a.toString()},qt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Bt={};function Gt(t,e,n,r){return t=t instanceof Ot?t:Ft(t),e=e||s,n=n instanceof wt?_t(n):n||"",e.open(Pt(t),n,r,void 0)}function Kt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ht(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(nt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(rt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(at,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function zt(t){return zt[" "](t),t}zt[" "]=l;var Wt,Jt=pt("Opera"),Xt=pt("Trident")||pt("MSIE"),Qt=pt("Edge"),Yt=Qt||Xt,$t=pt("Gecko")&&!(ct(tt.toLowerCase(),"webkit")&&!pt("Edge"))&&!(pt("Trident")||pt("MSIE"))&&!pt("Edge"),Zt=ct(tt.toLowerCase(),"webkit")&&!pt("Edge");function te(){var t=s.document;return t?t.documentMode:void 0}t:{var ee="",ne=function(){var t=tt;return $t?/rv:([^\);]+)(\)|;)/.exec(t):Qt?/Edge\/([\d\.]+)/.exec(t):Xt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Zt?/WebKit\/(\S+)/.exec(t):Jt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(ne&&(ee=ne?ne[1]:""),Xt){var re=te();if(null!=re&&re>parseFloat(ee)){Wt=String(re);break t}}Wt=ee}var ie,oe={};function ae(t){return function(t,e){var n=oe;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=et(String(Wt)).split("."),r=et(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ht(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ht(0==a[2].length,0==s[2].length)||ht(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(s.document&&Xt){var se=te();ie=se||(parseInt(Wt,10)||void 0)}else ie=void 0;var ue=ie;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(va){}var ce=!Xt||9<=Number(ue);function he(t){var e=document;return"string"===typeof t?e.getElementById(t):t}function le(t,e){dt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:de.hasOwnProperty(n)?t.setAttribute(de[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var fe,pe,de={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ve(t,e,n){function r(n){n&&e.appendChild("string"===typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||v(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(v(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){a="function"==typeof o.item;break t}}a=!1}K(a?Z(o):o,r)}}}function me(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ye(t){s.setTimeout((function(){throw t}),0)}function ge(t,e){pe||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);pe=function(){t.then(_e)}}else pe=function(){var t=_e;!d(s.setImmediate)||s.Window&&s.Window.prototype&&!pt("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(fe||(fe=function(){var t=s.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!pt("Presto")&&(t=function(){var t=me(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!pt("Trident")&&!pt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),fe(t)):s.setImmediate(t)}}(),be||(pe(),be=!0),we.add(t,e)}var be=!1,we=new V;function _e(){for(var t;t=q();){try{t.a.call(t.b)}catch(e){ye(e)}F(j,t)}be=!1}function Ie(t,e){if(this.a=Te,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){Ue(n,Ee,t)}),(function(t){if(!(t instanceof He))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(Kv){}Ue(n,Se,t)}))}catch(r){Ue(this,Se,r)}}var Te=0,Ee=2,Se=3;function Ae(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ae.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ne=new U((function(){return new Ae}),(function(t){t.reset()}));function Ce(t,e,n){var r=Ne.get();return r.g=t,r.b=e,r.f=n,r}function Re(t){if(t instanceof Ie)return t;var e=new Ie(l);return Ue(e,Ee,t),e}function De(t){return new Ie((function(e,n){n(t)}))}function Oe(t,e,n){Ve(t,e,n,null)||ge(I(e,t))}function Pe(t){return new Ie((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Oe(t[o],I(i,o,!0),I(i,o,!1));else e(r)}))}function xe(t,e){if(t.a==Te)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Te&&1==r?xe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):qe(n),Be(n,i,Se,e)))}t.c=null}else Ue(t,Se,e)}function Le(t,e){t.b||t.a!=Ee&&t.a!=Se||je(t),t.f?t.f.next=e:t.b=e,t.f=e}function Me(t,e,n,r){var i=Ce(null,null,null);return i.a=new Ie((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(Fe){o(Fe)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof He?o(e):t(i)}catch(Fe){o(Fe)}}:o})),i.a.c=t,Le(t,i),i.a}function Ue(t,e,n){t.a==Te&&(t===n&&(e=Se,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ve(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,je(t),e!=Se||n instanceof He||function(t,e){t.g=!0,ge((function(){t.g&&Ke.call(null,e)}))}(t,n)))}function Ve(t,e,n,r){if(t instanceof Ie)return Le(t,Ce(e||l,n||null,r)),!0;if(P(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(u){o(u)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function je(t){t.h||(t.h=!0,ge(t.gc,t))}function qe(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Be(t,e,n,r){if(n==Se&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ge(e,n,r);else try{e.c?e.g.call(e.f):Ge(e,n,r)}catch(Kv){Ke.call(null,Kv)}F(Ne,e)}function Ge(t,e,n){e==Ee?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Ie.prototype.then=function(t,e,n){return Me(this,d(t)?t:null,d(e)?e:null,n)},Ie.prototype.$goog_Thenable=!0,(t=Ie.prototype).oa=function(t,e){return(t=Ce(t,t,e)).c=!0,Le(this,t),this},t.o=function(t,e){return Me(this,null,t,e)},t.cancel=function(t){if(this.a==Te){var e=new He(t);ge((function(){xe(this,e)}),this)}},t.$c=function(t){this.a=Te,Ue(this,Ee,t)},t.ad=function(t){this.a=Te,Ue(this,Se,t)},t.gc=function(){for(var t;t=qe(this);)Be(this,t,this.a,this.i);this.h=!1};var Ke=ye;function He(t){x.call(this,t)}function ze(){0!=We&&(Je[m(this)]=this),this.xa=this.xa,this.pa=this.pa}E(He,x),He.prototype.name="cancel";var We=0,Je={};function Xe(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=We)){var e=m(t);if(0!=We&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Je[e]}}ze.prototype.xa=!1,ze.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Qe=Object.freeze||function(t){return t},Ye=!Xt||9<=Number(ue),$e=Xt&&!ae("9"),Ze=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",l,e),s.removeEventListener("test",l,e)}catch(n){}return t}();function tn(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function en(t,e){if(tn.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if($t){t:{try{zt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:nn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}tn.prototype.preventDefault=function(){this.defaultPrevented=!0},E(en,tn);var nn=Qe({2:"touch",3:"pen",4:"mouse"});en.prototype.preventDefault=function(){en.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,$e)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},en.prototype.g=function(){return this.a};var rn="closure_listenable_"+(1e6*Math.random()|0),on=0;function an(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++on,this.va=this.Pa=!1}function sn(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function un(t){this.src=t,this.a={},this.b=0}function cn(t,e){var n=e.type;n in t.a&&Q(t.a[n],e)&&(sn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function hn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}un.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=hn(t,e,r,i);return-1<a?(e=t[a],n||(e.Pa=!1)):((e=new an(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var ln="closure_lm_"+(1e6*Math.random()|0),fn={};function pn(t,e,n,r,i){if(r&&r.once)vn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else n=En(n),t&&t[rn]?An(t,e,n,v(r)?!!r.capture:!!r,i):dn(t,e,n,!1,r,i)}function dn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=v(i)?!!i.capture:!!i,s=In(t);if(s||(t[ln]=s=new un(t)),!(n=s.add(e,n,r,a,o)).proxy){if(r=function(){var t=_n,e=Ye?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ze||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function vn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)vn(t,e[o],n,r,i);else n=En(n),t&&t[rn]?kn(t,e,n,v(r)?!!r.capture:!!r,i):dn(t,e,n,!0,r,i)}function mn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)mn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=En(n),t&&t[rn]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=hn(o=t.a[e],n,r,i))&&(sn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=In(t))&&(e=t.a[e.toString()],t=-1,e&&(t=hn(e,n,r,i)),(n=-1<t?e[t]:null)&&yn(n))}function yn(t){if("number"!==typeof t&&t&&!t.va){var e=t.src;if(e&&e[rn])cn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=In(e))?(cn(n,t),0==n.b&&(n.src=null,e[ln]=null)):sn(t)}}}function gn(t){return t in fn?fn[t]:fn[t]="on"+t}function bn(t,e,n,r){var i=!0;if((t=In(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=wn(o,r),i=i&&!1!==o)}return i}function wn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&yn(t),n.call(r,e)}function _n(t,e){if(t.va)return!0;if(!Ye){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new en(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=bn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=bn(r[i],t,!1,e),n=n&&o}return n}return wn(t,new en(e,this))}function In(t){return(t=t[ln])instanceof un?t:null}var Tn="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(t){return d(t)?t:(t[Tn]||(t[Tn]=function(e){return t.handleEvent(e)}),t[Tn])}function Sn(){ze.call(this),this.v=new un(this),this.ac=this,this.gb=null}function An(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function kn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Nn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&cn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Cn(t,e,n){if(d(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Rn(t){var e=null;return new Ie((function(n,r){-1==(e=Cn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function Dn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"===typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function On(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(p(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Pn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Pn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ln(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ln(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ln(t,e){return Object.prototype.hasOwnProperty.call(t,e)}E(Sn,ze),Sn.prototype[rn]=!0,Sn.prototype.addEventListener=function(t,e,n,r){pn(this,t,e,n,r)},Sn.prototype.removeEventListener=function(t,e,n,r){mn(this,t,e,n,r)},Sn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"===typeof t)t=new tn(t,n);else if(t instanceof tn)t.target=t.target||n;else{var i=t;gt(t=new tn(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=Nn(a,r,!0,t)&&i}if(i=Nn(a=t.b=n,r,!0,t)&&i,i=Nn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Nn(a=t.b=e[o],r,!1,t)&&i;return i},Sn.prototype.Da=function(){if(Sn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)sn(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=Pn.prototype).W=function(){xn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return xn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Ln(this.b,t)?this.b[t]:e},t.set=function(t,e){Ln(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Mn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Un(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Un?(this.i=void 0!==e?e:t.i,Fn(this,t.c),this.l=t.l,this.a=t.a,Vn(this,t.g),this.f=t.f,jn(this,or(t.b)),this.h=t.h):t&&(n=String(t).match(Mn))?(this.i=!!e,Fn(this,n[1]||"",!0),this.l=Hn(n[2]||""),this.a=Hn(n[3]||"",!0),Vn(this,n[4]),this.f=Hn(n[5]||"",!0),jn(this,n[6]||"",!0),this.h=Hn(n[7]||"")):(this.i=!!e,this.b=new Zn(null,this.i))}function Fn(t,e,n){t.c=n?Hn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Vn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function jn(t,e,n){e instanceof Zn?(t.b=e,function(t,e){e&&!t.f&&(tr(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(nr(this,e),ir(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=zn(e,Yn)),t.b=new Zn(e,t.i))}function qn(t,e,n){t.b.set(e,n)}function Bn(t,e){return t.b.get(e)}function Gn(t){return t instanceof Un?new Un(t):new Un(t,void 0)}function Kn(t,e,n,r){var i=new Un(null,void 0);return t&&Fn(i,t),e&&(i.a=e),n&&Vn(i,n),r&&(i.f=r),i}function Hn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function zn(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Wn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Wn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Un.prototype.toString=function(){var t=[],e=this.c;e&&t.push(zn(e,Jn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(zn(e,Jn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(zn(n,"/"==n.charAt(0)?Qn:Xn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",zn(n,$n)),t.join("")},Un.prototype.resolve=function(t){var e=new Un(this),n=!!t.c;n?Fn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Vn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?jn(e,or(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Jn=/[#\/\?@]/g,Xn=/[#\?:]/g,Qn=/[#\?]/g,Yn=/[#\?@]/g,$n=/#/g;function Zn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function tr(t){t.a||(t.a=new Pn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function er(t){var e=On(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new Zn(null,void 0);t=Dn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?ir(n,i,o):n.add(i,o)}return n}function nr(t,e){tr(t),e=ar(t,e),Ln(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ln((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&xn(t)))}function rr(t,e){return tr(t),e=ar(t,e),Ln(t.a.b,e)}function ir(t,e,n){nr(t,e),0<n.length&&(t.c=null,t.a.set(ar(t,e),Z(n)),t.b+=n.length)}function or(t){var e=new Zn;return e.c=t.c,t.a&&(e.a=new Pn(t.a),e.b=t.b),e}function ar(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function sr(t){var e=[];return cr(new ur,t,e),e.join("")}function ur(){}function cr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),cr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),fr(r,n),n.push(":"),cr(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":fr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Zn.prototype).add=function(t,e){tr(this),this.c=null,t=ar(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){tr(this),this.a.forEach((function(n,r){K(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){tr(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){tr(this);var e=[];if("string"===typeof t)rr(this,t)&&(e=$(e,this.a.get(ar(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},t.set=function(t,e){return tr(this),this.c=null,rr(this,t=ar(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var hr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},lr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function fr(t,e){e.push('"',t.replace(lr,(function(t){var e=hr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),hr[t]=e),e})),'"')}function pr(){var t=Pr();return Xt&&!!ue&&11==ue||/Edge\/\d+/.test(t)}function dr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function vr(t,e){e=e||s.window;var n="about:blank";t&&(n=Pt(Ut(t)||jt)),e.location.href=n}function mr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<mr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function yr(t){return!!((t=(t||Pr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function gr(t){t=t||s.window;try{t.close()}catch(e){}}function br(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Pr().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),Rr(Pr())==Nr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ot?n:Ut("undefined"!=typeof n.href?n.href:String(n))||jt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((pt("iPhone")&&!pt("iPod")&&!pt("iPad")||pt("iPad")||pt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(a=me(document,"A"),"HTMLAnchorElement"),e=e instanceof Ot?e:Ft(e),a.href=Pt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Gt("",r,n,a),t=Pt(e),a&&(Yt&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ht(t)+'">',t=new qt(t=(r=St())?r.createHTML(t):t,null,Bt),r=a.document)&&(r.write(function(t){return t instanceof qt&&t.constructor===qt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Gt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(ke){}return a}var wr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_r=/^[^@]+@[^@]+$/;function Ir(){var t=null;return new Ie((function(e){"complete"==s.document.readyState?e():(t=function(){e()},vn(window,"load",t))})).o((function(e){throw mn(window,"load",t),e}))}function Tr(t){return t=t||Pr(),!("file:"!==Fr()&&"ionic:"!==Fr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Er(){var t=s.window;try{return!(!t||t==t.top)}catch(e){return!1}}function Sr(){return"undefined"!==typeof s.WorkerGlobalScope&&"function"===typeof s.importScripts}function Ar(){return J.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":J.INTERNAL.hasOwnProperty("node")?"Node":Sr()?"Worker":"Browser"}function kr(){var t=Ar();return"ReactNative"===t||"Node"===t}var Nr="Firefox",Cr="Chrome";function Rr(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?Nr:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Cr:"Safari"}var Dr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Or(t,e){e=e||[];var n,r=[],i={};for(n in Dr)i[Dr[n]]=!0;for(n=0;n<e.length;n++)"undefined"!==typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Ar())?r=Rr(i=Pr()):"Worker"===r&&(r=Rr(i=Pr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Pr(){return s.navigator&&s.navigator.userAgent||""}function xr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Lr(){try{var t=s.localStorage,e=Gr();if(t)return t.setItem(e,"1"),t.removeItem(e),!pr()||!!s.indexedDB}catch(n){return Sr()&&!!s.indexedDB}return!1}function Mr(){return(Ur()||"chrome-extension:"===Fr()||Tr())&&!kr()&&Lr()&&!Sr()}function Ur(){return"http:"===Fr()||"https:"===Fr()}function Fr(){return s.location&&s.location.protocol||null}function Vr(t){return!yr(t=t||Pr())&&Rr(t)!=Nr}function jr(t){return"undefined"===typeof t?null:sr(t)}function qr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Br(t){if(null!==t)return JSON.parse(t)}function Gr(t){return t||Math.floor(1e9*Math.random()).toString()}function Kr(t){return"Safari"!=Rr(t=t||Pr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Hr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function zr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Pr(),e=Ar(),this.b=yr(t)||"ReactNative"===e}function Wr(){var t=s.document;return!t||"undefined"===typeof t.visibilityState||"visible"==t.visibilityState}function Jr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Xr(){return!(!xr("fireauth.oauthhelper",s)&&!xr("fireauth.iframe",s))}zr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!==typeof t.onLine||!Ur()&&"chrome-extension:"!==Fr()&&"undefined"===typeof t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Qr,Yr={};function $r(t){Yr[t]||(Yr[t]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t))}try{var Zr={};Object.defineProperty(Zr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Zr,"abcd",{configurable:!0,enumerable:!0,value:2}),Qr=2==Zr.abcd}catch(va){Qr=!1}function ti(t,e,n){Qr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function ei(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&ti(t,n,e[n])}function ni(t){var e={};return ei(e,t),e}function ri(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)ti(e,n,ri(t[n]));return e}function ii(t){var e=t&&(t[ci]?"phone":null);if(!(e&&t&&t[ui]))throw new A("internal-error","Internal assert: invalid MultiFactorInfo object");ti(this,"uid",t[ui]),ti(this,"displayName",t[ai]||null);var n=null;t[si]&&(n=new Date(t[si]).toUTCString()),ti(this,"enrollmentTime",n),ti(this,"factorId",e)}function oi(t){try{var e=new hi(t)}catch(n){e=null}return e}ii.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ai="displayName",si="enrolledAt",ui="mfaEnrollmentId",ci="phoneInfo";function hi(t){ii.call(this,t),ti(this,"phoneNumber",t[ci])}function li(t){var e={},n=t[vi],r=t[yi],i=t[gi];if(t=oi(t[mi]),!i||i!=pi&&i!=di&&!n||i==di&&!r||i==fi&&!t)throw Error("Invalid checkActionCode response!");i==di?(e[wi]=n||null,e[Ii]=n||null,e[bi]=r):(e[wi]=r||null,e[Ii]=r||null,e[bi]=n||null),e[_i]=t||null,ti(this,Ei,i),ti(this,Ti,ri(e))}E(hi,ii),hi.prototype.w=function(){var t=hi.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var fi="REVERT_SECOND_FACTOR_ADDITION",pi="EMAIL_SIGNIN",di="VERIFY_AND_CHANGE_EMAIL",vi="email",mi="mfaInfo",yi="newEmail",gi="requestType",bi="email",wi="fromEmail",_i="multiFactorInfo",Ii="previousEmail",Ti="data",Ei="operation";function Si(t){var e=Bn(t=Gn(t),Ai)||null,n=Bn(t,ki)||null,r=Bn(t,Ri)||null;if(r=r&&Oi[r]||null,!e||!n||!r)throw new A("argument-error",Ai+", "+ki+"and "+Ri+" are required in a valid action code URL.");ei(this,{apiKey:e,operation:r,code:n,continueUrl:Bn(t,Ni)||null,languageCode:Bn(t,Ci)||null,tenantId:Bn(t,Di)||null})}var Ai="apiKey",ki="oobCode",Ni="continueUrl",Ci="languageCode",Ri="mode",Di="tenantId",Oi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:fi,signIn:pi,verifyAndChangeEmail:di,verifyEmail:"VERIFY_EMAIL"};function Pi(t){try{return new Si(t)}catch(e){return null}}function xi(t){var e=t[Vi];if("undefined"===typeof e)throw new A("missing-continue-uri");if("string"!==typeof e||"string"===typeof e&&!e.length)throw new A("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Li];if(n&&"object"===typeof n){e=n[Bi];var r=n[ji];if(n=n[qi],"string"===typeof e&&e.length){if(this.a=e,"undefined"!==typeof r&&"boolean"!==typeof r)throw new A("argument-error",ji+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new A("argument-error",qi+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof e)throw new A("argument-error",Bi+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new A("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new A("argument-error",Li+" property must be a non null object when specified.");if(this.f=null,(e=t[Fi])&&"object"===typeof e){if("string"===typeof(e=e[Gi])&&e.length)this.f=e;else if("undefined"!==typeof e)throw new A("argument-error",Gi+" property must be a non empty string when specified.")}else if("undefined"!==typeof e)throw new A("argument-error",Fi+" property must be a non null object when specified.");if("undefined"!==typeof(e=t[Ui])&&"boolean"!==typeof e)throw new A("argument-error",Ui+" property must be a boolean when specified.");if(this.c=!!e,"undefined"!==typeof(t=t[Mi])&&("string"!==typeof t||"string"===typeof t&&!t.length))throw new A("argument-error",Mi+" property must be a non empty string when specified.");this.i=t||null}var Li="android",Mi="dynamicLinkDomain",Ui="handleCodeInApp",Fi="iOS",Vi="url",ji="installApp",qi="minimumVersion",Bi="packageName",Gi="bundleId";function Ki(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Hi=null;function Wi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Hi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Hi){Hi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Hi[o]&&(Hi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}function Ji(t){var e=Qi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Xi(t){try{return new Ji(t)}catch(e){return null}}function Qi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Wi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(Fe){}return null}Ji.prototype.T=function(){return this.f},Ji.prototype.l=function(){return this.c},Ji.prototype.toString=function(){return this.h};var Yi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),$i=["client_id","response_type","scope","redirect_uri","state"],Zi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:$i},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:$i},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:$i},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Yi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function to(t){for(var e in Zi)if(Zi[e].fa==t)return Zi[e];return null}function eo(t){var e={};e["facebook.com"]=ao,e["google.com"]=uo,e["github.com"]=so,e["twitter.com"]=co;var n=t&&t[ro];try{if(n)return e[n]?new e[n](t):new oo(t);if("undefined"!==typeof t[no])return new io(t)}catch(r){}return null}var no="idToken",ro="providerId";function io(t){var e=t[ro];if(!e&&t[no]){var n=Xi(t[no]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!==typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),ti(this,"providerId",e),ti(this,"isNewUser",n)}function oo(t){io.call(this,t),ti(this,"profile",ri((t=Br(t.rawUserInfo||"{}"))||{}))}function ao(t){if(oo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function so(t){if(oo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");ti(this,"username",this.profile&&this.profile.login||null)}function uo(t){if(oo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function co(t){if(oo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");ti(this,"username",t.screenName||null)}function ho(t){var e=Gn(t),n=Bn(e,"link"),r=Bn(Gn(n),"link");return e=Bn(e,"deep_link_id"),Bn(Gn(e),"link")||e||r||n||t}function lo(t,e){if(!t&&!e)throw new A("internal-error","Internal assert: no raw session string available");if(t&&e)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?fo:po}E(oo,io),E(ao,oo),E(so,oo),E(uo,oo),E(co,oo);var fo="enroll",po="signin";function vo(){}function mo(t,e){return t.then((function(t){if(t[os]){var n=Xi(t[os]);if(!n||e!=n.i)throw new A("user-mismatch");return t}throw new A("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==C+"user-not-found"?new A("user-mismatch"):t}))}function yo(t,e){if(!e)throw new A("internal-error","failed to construct a credential");this.a=e,ti(this,"providerId",t),ti(this,"signInMethod",t)}function go(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function bo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new yo(t.providerId,t.pendingToken)}catch(e){}return null}function wo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&ti(this,"idToken",e.idToken),e.accessToken&&ti(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&ti(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new A("internal-error","failed to construct a credential");ti(this,"accessToken",e.oauthToken),ti(this,"secret",e.oauthTokenSecret)}ti(this,"providerId",t),ti(this,"signInMethod",n)}function _o(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:er(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Io(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new wo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function To(t,e){this.Qc=e||[],ei(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(to(t)||{}).Ja||null,this.ob=null}function Eo(t){if("string"!==typeof t||0!=t.indexOf("saml."))throw new A("argument-error",'SAML provider IDs must be prefixed with "saml."');To.call(this,t,[])}function So(t){To.call(this,t,$i),this.a=[]}function Ao(){So.call(this,"facebook.com")}function ko(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new Ao).credential({accessToken:e})}function No(){So.call(this,"github.com")}function Co(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new No).credential({accessToken:e})}function Ro(){So.call(this,"google.com"),this.Ca("profile")}function Do(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new Ro).credential({idToken:n,accessToken:e})}function Oo(){To.call(this,"twitter.com",Yi)}function Po(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new wo("twitter.com",n,"twitter.com")}function xo(t,e,n){this.a=t,this.f=e,ti(this,"providerId","password"),ti(this,"signInMethod",n===Mo.EMAIL_LINK_SIGN_IN_METHOD?Mo.EMAIL_LINK_SIGN_IN_METHOD:Mo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Lo(t){return t&&t.email&&t.password?new xo(t.email,t.password,t.signInMethod):null}function Mo(){ei(this,{providerId:"password",isOAuthProvider:!1})}function Uo(t,e){if(!(e=Fo(e)))throw new A("argument-error","Invalid email link!");return new xo(t,e.code,Mo.EMAIL_LINK_SIGN_IN_METHOD)}function Fo(t){return(t=Pi(t=ho(t)))&&t.operation===pi?t:null}function Vo(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new A("internal-error");this.a=t,ti(this,"providerId","phone"),this.fa="phone",ti(this,"signInMethod","phone")}function jo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return K(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Vo(e)}return null}function qo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Bo(t){try{this.a=t||J.auth()}catch(e){throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ei(this,{providerId:"phone",isOAuthProvider:!1})}function Go(t,e){if(!t)throw new A("missing-verification-id");if(!e)throw new A("missing-verification-code");return new Vo({eb:t,cb:e})}function Ko(t){if(t.temporaryProof&&t.phoneNumber)return new Vo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Do(o,n);case"facebook.com":return ko(n);case"github.com":return Co(n);case"twitter.com":return Po(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new yo(e,a):new wo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new So(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(ke){return null}}function Ho(t){if(!t.isOAuthProvider)throw new A("invalid-oauth-provider")}function zo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new A("invalid-auth-event");if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}function Wo(t){return(t=t||{}).type?new zo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&k(t.error),t.postBody,t.tenantId):null}function Jo(){this.b=null,this.a=[]}lo.prototype.Ha=function(){return this.a?Re(this.a):Re(this.b)},lo.prototype.w=function(){return this.type==fo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},vo.prototype.ka=function(){},vo.prototype.b=function(){},vo.prototype.c=function(){},vo.prototype.w=function(){},yo.prototype.ka=function(t){return ks(t,go(this))},yo.prototype.b=function(t,e){var n=go(this);return n.idToken=e,Ns(t,n)},yo.prototype.c=function(t,e){return mo(Cs(t,go(this)),e)},yo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},wo.prototype.ka=function(t){return ks(t,_o(this))},wo.prototype.b=function(t,e){var n=_o(this);return n.idToken=e,Ns(t,n)},wo.prototype.c=function(t,e){return mo(Cs(t,_o(this)),e)},wo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},To.prototype.Ka=function(t){return this.Ib=mt(t),this},E(Eo,To),E(So,To),So.prototype.Ca=function(t){return X(this.a,t)||this.a.push(t),this},So.prototype.Qb=function(){return Z(this.a)},So.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new wo(this.providerId,n,this.providerId)},E(Ao,So),ti(Ao,"PROVIDER_ID","facebook.com"),ti(Ao,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(No,So),ti(No,"PROVIDER_ID","github.com"),ti(No,"GITHUB_SIGN_IN_METHOD","github.com"),E(Ro,So),ti(Ro,"PROVIDER_ID","google.com"),ti(Ro,"GOOGLE_SIGN_IN_METHOD","google.com"),E(Oo,To),ti(Oo,"PROVIDER_ID","twitter.com"),ti(Oo,"TWITTER_SIGN_IN_METHOD","twitter.com"),xo.prototype.ka=function(t){return this.signInMethod==Mo.EMAIL_LINK_SIGN_IN_METHOD?hu(t,Us,{email:this.a,oobCode:this.f}):hu(t,ou,{email:this.a,password:this.f})},xo.prototype.b=function(t,e){return this.signInMethod==Mo.EMAIL_LINK_SIGN_IN_METHOD?hu(t,Fs,{idToken:e,email:this.a,oobCode:this.f}):hu(t,Ys,{idToken:e,email:this.a,password:this.f})},xo.prototype.c=function(t,e){return mo(this.ka(t),e)},xo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},ei(Mo,{PROVIDER_ID:"password"}),ei(Mo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ei(Mo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Vo.prototype.ka=function(t){return t.fb(qo(this))},Vo.prototype.b=function(t,e){var n=qo(this);return n.idToken=e,hu(t,su,n)},Vo.prototype.c=function(t,e){var n=qo(this);return n.operation="REAUTH",mo(t=hu(t,uu,n),e)},Vo.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Bo.prototype.fb=function(t,e){var n=this.a.a;return Re(e.verify()).then((function(r){if("string"!==typeof r)throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=v(t)?t.session:null,o=v(t)?t.phoneNumber:t;return(i&&i.type==fo?i.Ha().then((function(t){return function(t,e){return hu(t,Zs,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==po?i.Ha().then((function(e){return function(t,e){return hu(t,tu,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return hu(t,Xs,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"===typeof e.reset&&e.reset(),t}),(function(t){throw"function"===typeof e.reset&&e.reset(),t}));default:throw new A("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},ei(Bo,{PROVIDER_ID:"phone"}),ei(Bo,{PHONE_SIGN_IN_METHOD:"phone"}),zo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},zo.prototype.T=function(){return this.h},zo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Xo,Qo=null;function Yo(t){var e="unauthorized-domain",n=void 0,r=Gn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Kt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Kt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",A.call(this,e,n)}function $o(t,e,n){A.call(this,t,n),(t=e||{}).Jb&&ti(this,"email",t.Jb),t.ea&&ti(this,"phoneNumber",t.ea),t.credential&&ti(this,"credential",t.credential),t.Zb&&ti(this,"tenantId",t.Zb)}function Zo(t){if(t.code){var e=t.code||"";0==e.indexOf(C)&&(e=e.substring(C.length));var n={credential:Ko(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new A(e,t.message||void 0);return new $o(e,n,t.message)}return null}function ta(){}function ea(t){return t.c||(t.c=t.b())}function na(){}function ra(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(Kv){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ia(){}function oa(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.qc,this),this.a.onerror=_(this.Sb,this),this.a.onprogress=_(this.rc,this),this.a.ontimeout=_(this.vc,this)}function aa(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function sa(t,e,n){this.reset(t,e,n,void 0,void 0)}E(Yo,A),E($o,A),$o.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&gt(t,e),t},$o.prototype.toJSON=function(){return this.w()},ta.prototype.c=null,E(na,ta),na.prototype.a=function(){var t=ra(this);return t?new ActiveXObject(t):new XMLHttpRequest},na.prototype.b=function(){var t={};return ra(this)&&(t[0]=!0,t[1]=!0),t},Xo=new na,E(ia,ta),ia.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new oa;throw Error("Unsupported browser")},ia.prototype.b=function(){return{}},(t=oa.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,aa(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",aa(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,aa(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},sa.prototype.a=null;function ua(t){this.f=t,this.b=this.c=this.a=null}function ca(t,e){this.name=t,this.value=e}sa.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||T(),delete this.a},ca.prototype.toString=function(){return this.name};var ha=new ca("SEVERE",1e3),la=new ca("WARNING",900),fa=new ca("CONFIG",700),pa=new ca("FINE",500);function da(t){return t.c?t.c:t.a?da(t.a):(M("Root logger has no level set."),null)}ua.prototype.log=function(t,e,n){if(t.value>=da(this).value)for(d(e)&&(e=e()),t=new sa(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var va,ma={},ya=null;function ga(t){var e;if(ya||(ya=new ua(""),ma[""]=ya,ya.c=fa),!(e=ma[t])){e=new ua(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ga(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ma[t]=e}return e}function ba(t,e){t&&t.log(pa,e,void 0)}function wa(t){this.f=t}function _a(t){Sn.call(this),this.u=t,this.h=void 0,this.readyState=Ia,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ga("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}E(wa,ta),wa.prototype.a=function(){return new _a(this.f)},wa.prototype.b=(va={},function(){return va}),E(_a,Sn);var Ia=0;function Ta(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function Ea(t){t.readyState=4,t.g=null,t.c=null,t.m=null,Sa(t)}function Sa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Aa(t){Sn.call(this),this.headers=new Pn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=ka,this.u=this.S=!1}(t=_a.prototype).open=function(t,e){if(this.readyState!=Ia)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,Sa(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Ea(this)),this.readyState=Ia},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,Sa(this)),this.a&&(this.readyState=3,Sa(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):"undefined"!==typeof s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,Ta(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Ea(this):Sa(this),3==this.readyState&&Ta(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,Ea(this))},t.sc=function(t){this.a&&(this.response=t,Ea(this))},t.Ua=function(t){var e=this.i;e&&e.log(la,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&Ea(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(la,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(la,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(_a.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),E(Aa,Sn);var ka="";Aa.prototype.b=ga("goog.net.XhrIo");var Na=/^https?$/i,Ca=["POST","PUT"];function Ra(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Xo.a(),t.C=t.D?ea(t.D):ea(Xo),t.a.onreadystatechange=_(t.Vb,t);try{ba(t.b,Va(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(a){return ba(t.b,Va(t,"Error opening Xhr: "+a.message)),void Oa(t,a)}e=r||"";var o=new Pn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"===typeof t)K(t,e,void 0);else for(var n=On(t),r=Dn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Da,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!X(Ca,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Ma(t),0<t.g&&(t.u=function(t){return Xt&&ae(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(t.a),ba(t.b,Va(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ma,t)):t.s=Cn(t.Ma,t.g,t)),ba(t.b,Va(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){ba(t.b,Va(t,"Send error: "+a.message)),Oa(t,a)}}function Da(t){return"content-type"==t.toLowerCase()}function Oa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Pa(t),La(t)}function Pa(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function xa(t){if(t.c&&"undefined"!=typeof a)if(t.C[1]&&4==Ua(t)&&2==Fa(t))ba(t.b,Va(t,"Local request error detected and ignored"));else if(t.i&&4==Ua(t))Cn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ua(t)){ba(t.b,Va(t,"Request complete")),t.c=!1;try{var e,n=Fa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Mn)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!Na.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ua(t)?t.a.statusText:""}catch(h){ba(t.b,"Can not get status: "+h.message),c=""}t.h=c+" ["+Fa(t)+"]",Pa(t)}}finally{La(t)}}}function La(t,e){if(t.a){Ma(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(Kv){(t=t.b)&&t.log(ha,"Problem encountered resetting onreadystatechange: "+Kv.message,void 0)}}}function Ma(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Ua(t){return t.a?t.a.readyState:0}function Fa(t){try{return 2<Ua(t)?t.a.status:-1}catch(e){return-1}}function Va(t,e){return e+" ["+t.R+" "+t.l+" "+Fa(t)+"]"}function ja(t){var e=Ya;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function qa(t,e,n){t.a=!0,t.c=n,t.f=!e,Ha(t)}function Ba(t){if(t.a){if(!t.v)throw new za(t);t.v=!1}}function Ga(t,e,n,r){t.g.push([e,n,r]),t.a&&Ha(t)}function Ka(t){return W(t.g,(function(t){return d(t[1])}))}function Ha(t){if(t.h&&t.a&&Ka(t)){var e=t.h,n=Xa[e];n&&(s.clearTimeout(n.a),delete Xa[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(P(e)||"function"===typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Ka(t)||(n=!0)}}t.c=e,r&&(u=_(t.m,t,!0),r=_(t.m,t,!1),e instanceof ja?(Ga(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Ja(e),Xa[e.a]=e,t.h=e.a)}function za(){x.call(this)}function Wa(){x.call(this)}function Ja(t){this.a=s.setTimeout(_(this.c,this),0),this.b=t}(t=Aa.prototype).Ma=function(){"undefined"!=typeof a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ba(this.b,Va(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ba(this.b,Va(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),La(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),La(this,!0)),Aa.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?xa(this):this.Jc())},t.Jc=function(){xa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ka:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ha,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return ba(this.b,"Can not get response: "+e.message),null}},ja.prototype.cancel=function(t){if(this.a)this.c instanceof ja&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Wa(this),Ba(this),qa(this,!1,t))}},ja.prototype.m=function(t,e){this.i=!1,qa(this,t,e)},ja.prototype.then=function(t,e,n){var r,i,o=new Ie((function(t,e){r=t,i=e}));return Ga(this,r,(function(t){t instanceof Wa?o.cancel():i(t)})),o.then(t,e,n)},ja.prototype.$goog_Thenable=!0,E(za,x),za.prototype.message="Deferred has already fired",za.prototype.name="AlreadyCalledError",E(Wa,x),Wa.prototype.message="Deferred was canceled",Wa.prototype.name="CanceledError",Ja.prototype.c=function(){throw delete Xa[this.a],this.b};var Xa={};function Qa(t){var e={},n=e.document||document,r=kt(t).toString(),i=me(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new ja(o),u=null,l=null!=e.timeout?e.timeout:5e3;return 0<l&&(u=window.setTimeout((function(){$a(i,!0);var t=new es(ts,"Timeout reached for loading script "+r);Ba(a),qa(a,!1,t)}),l),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||($a(i,e.xd||!1,u),Ba(a),qa(a,!0,null))},i.onerror=function(){$a(i,!0,u);var t=new es(Za,"Error while loading script "+r);Ba(a),qa(a,!1,t)},gt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),le(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=kt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=h(e.document):(null===c&&(c=h(s.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ya(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&$a(t,!0,this.Ma)}}function $a(t,e,n){null!=n&&s.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Za=0,ts=1;function es(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),x.call(this,n),this.code=t}function ns(t){this.f=t}function rs(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||as,this.g=mt(t.secureTokenHeaders||ss),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||us,this.a=mt(t.firebaseHeaders||cs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Ar(),!(n=s.XMLHttpRequest||n&&J.INTERNAL.node&&J.INTERNAL.node.XMLHttpRequest)&&!Sr())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Sr()?this.f=new wa(self):kr()?this.f=new ns(n):this.f=new ia,this.b=null}E(es,x),E(ns,ta),ns.prototype.a=function(){return new this.f},ns.prototype.b=function(){return{}};var is,os="idToken",as=new zr(3e4,6e4),ss={"Content-Type":"application/x-www-form-urlencoded"},us=new zr(3e4,6e4),cs={"Content-Type":"application/json"};function hs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ls(t,e){e&&(t.l=fs("https://securetoken.googleapis.com/v1/token",e),t.h=fs("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=fs("https://identitytoolkit.googleapis.com/v2/",e))}function fs(t,e){return t=Gn(t),e=Gn(e.url),t.f=t.a+t.f,Fn(t,e.c),t.a=e.a,Vn(t,e.g),t.toString()}function ps(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ds(t,e,n,r,i,o,a){(function(){var t=Pr();return!((t=Rr(t)!=Cr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!Xt||!ue||9<ue)})()||Sr()?t=_(t.u,t):(is||(is=new Ie((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[ms]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ga(t,null,e,void 0)}(Qa(Nt(vs,{onload:ms})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=_(t.s,t)),t(e,n,r,i,o,a)}rs.prototype.T=function(){return this.b},rs.prototype.u=function(t,e,n,r,i,o){if(Sr()&&("undefined"===typeof s.fetch||"undefined"===typeof s.Headers||"undefined"===typeof s.Request))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Aa(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}An(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ba(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(Fe){t=null}e&&e(t)})),kn(a,"ready",(function(){u&&clearTimeout(u),Xe(this)})),kn(a,"timeout",(function(){u&&clearTimeout(u),Xe(this),e&&e(null)})),Ra(a,t,n,r,i)};var vs=new wt(Et,"https://apis.google.com/js/client.js?onload=%{onload}"),ms="__fcb"+Math.floor(1e6*Math.random()).toString();function ys(t,e,n,r,i,o,a){var s=Gn(e+n);qn(s,"key",t.c),a&&qn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&qn(s,c,i[c]);return new Ie((function(e,n){ds(t,s.toString(),(function(t){t?t.error?n(fu(t,o||{})):e(t):n(new A("network-request-failed"))}),r,u?void 0:sr(qr(i)),t.a,t.v.get())}))}function gs(t){if("string"!==typeof(t=t.email)||!_r.test(t))throw new A("invalid-email")}function bs(t){"email"in t&&gs(t)}function ws(t){if(!t[os]){if(t.mfaPendingCredential)throw new A("multi-factor-auth-required",null,mt(t));throw new A("internal-error")}}function _s(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new A("internal-error")}else{if(!t.sessionInfo)throw new A("missing-verification-id");if(!t.code)throw new A("missing-verification-code")}}rs.prototype.s=function(t,e,n,r,i){var o=this;is.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},rs.prototype.zb=function(){return hu(this,$s,{})},rs.prototype.Bb=function(t,e){return hu(this,Qs,{idToken:t,email:e})},rs.prototype.Cb=function(t,e){return hu(this,Ys,{idToken:t,password:e})};var Is={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Ts(t){if(!t.phoneVerificationInfo)throw new A("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new A("missing-verification-code")}function Es(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new A("internal-error")}function Ss(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(rr(t=new Zn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function As(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Zo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Zo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Zo(t)):t.errorMessage&&(e=lu(t.errorMessage)),e)throw e;ws(t)}function ks(t,e){return e.returnIdpCredential=!0,hu(t,eu,e)}function Ns(t,e){return e.returnIdpCredential=!0,hu(t,ru,e)}function Cs(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,hu(t,nu,e)}function Rs(t){if(!t.oobCode)throw new A("invalid-action-code")}(t=rs.prototype).Db=function(t,e){var n={idToken:t},r=[];return dt(Is,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),hu(this,Qs,n)},t.vb=function(t,e){return gt(t={requestType:"PASSWORD_RESET",email:t},e),hu(this,Hs,t)},t.wb=function(t,e){return gt(t={requestType:"EMAIL_SIGNIN",email:t},e),hu(this,Bs,t)},t.ub=function(t,e){return gt(t={requestType:"VERIFY_EMAIL",idToken:t},e),hu(this,Gs,t)},t.Eb=function(t,e,n){return gt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),hu(this,Ks,t)},t.fb=function(t){return hu(this,au,t)},t.nb=function(t,e){return hu(this,Js,{oobCode:t,newPassword:e})},t.Ra=function(t){return hu(this,Os,{oobCode:t})},t.jb=function(t){return hu(this,Ds,{oobCode:t})};var Ds={endpoint:"setAccountInfo",A:Rs,Z:"email",B:!0},Os={endpoint:"resetPassword",A:Rs,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new A("internal-error")},B:!0},Ps={endpoint:"signupNewUser",A:function(t){if(gs(t),!t.password)throw new A("weak-password")},G:ws,V:!0,B:!0},xs={endpoint:"createAuthUri",B:!0},Ls={endpoint:"deleteAccount",N:["idToken"]},Ms={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new A("internal-error")}},Us={endpoint:"emailLinkSignin",N:["email","oobCode"],A:gs,G:ws,V:!0,B:!0},Fs={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:gs,G:ws,V:!0},Vs={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:Ts,G:ws,B:!0,Na:!0},js={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:Ts,G:ws,B:!0,Na:!0},qs={endpoint:"getAccountInfo"},Bs={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new A("internal-error");gs(t)},Z:"email",B:!0},Gs={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},Ks={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},Hs={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new A("internal-error");gs(t)},Z:"email",B:!0},zs={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Ws={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new A("internal-error")}},Js={endpoint:"resetPassword",A:Rs,Z:"email",B:!0},Xs={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Qs={endpoint:"setAccountInfo",N:["idToken"],A:bs,V:!0},Ys={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(bs(t),!t.password)throw new A("weak-password")},G:ws,V:!0},$s={endpoint:"signupNewUser",G:ws,V:!0,B:!0},Zs={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new A("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},tu={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},eu={endpoint:"verifyAssertion",A:Es,Ya:Ss,G:As,V:!0,B:!0},nu={endpoint:"verifyAssertion",A:Es,Ya:Ss,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new A("user-not-found");if(t.errorMessage)throw lu(t.errorMessage);ws(t)},V:!0,B:!0},ru={endpoint:"verifyAssertion",A:function(t){if(Es(t),!t.idToken)throw new A("internal-error")},Ya:Ss,G:As,V:!0},iu={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new A("invalid-custom-token")},G:ws,V:!0,B:!0},ou={endpoint:"verifyPassword",A:function(t){if(gs(t),!t.password)throw new A("wrong-password")},G:ws,V:!0,B:!0},au={endpoint:"verifyPhoneNumber",A:_s,G:ws,B:!0},su={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new A("internal-error");_s(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Zo(t);ws(t)}},uu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:_s,G:ws,B:!0},cu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[os]^!!t.refreshToken)throw new A("internal-error")},B:!0,Na:!0};function hu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.N))return De(new A("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return Re(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&"undefined"===typeof n.tenantId&&(n.tenantId=t.b),ys(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new A("internal-error");return r[e.Z]}))}function lu(t){return fu({error:{errors:[{message:t}],code:400,message:t}})}function fu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new A(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",gt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new A(r[i],e);return!e&&t&&(e=jr(t)),new A("internal-error",e)}function pu(t){this.b=t,this.a=null,this.rb=function(t){return(yu||(yu=new Ie((function(t,e){function n(){Hr(),xr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Hr(),e(Error("Network Error"))},timeout:vu.get()})}if(xr("gapi.iframes.Iframe"))t();else if(xr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){xr("gapi.load")?n():e(Error("Network Error"))},Re(Qa(r=Nt(du,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw yu=null,t})))).then((function(){return new Ie((function(e,n){xr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),mu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var du=new wt(Et,"https://apis.google.com/js/api.js?onload=%{onload}"),vu=new zr(3e4,6e4),mu=new zr(5e3,15e3),yu=null;function gu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Kn((t=Gn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Kn("https",this.l,null,"/__/auth/iframe"),this.a=t,qn(this.a,"apiKey",this.h),qn(this.a,"appName",this.i),this.b=null,this.c=[]}function bu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function wu(t){try{return J.app(t).auth().Ga()}catch(e){return[]}}function _u(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function Iu(t){var e=dr();return function(t){return hu(t,zs,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Gn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Gn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:wr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Yo(dr())}))}function Tu(t){return t.m||(t.m=Ir().then((function(){if(!t.u){var e=t.c,n=t.i,r=wu(t.b),i=new gu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Z(r||[]),t.u=i.toString()}t.v=new pu(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Wo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Re(n)}return n.status="ERROR",Re(n)}))}(t)}))),t.m}function Eu(t){return t.l||(t.C=t.c?Or(t.c,wu(t.b)):null,t.l=new rs(t.g,O(t.i),t.C),t.f&&ls(t.l,t.f)),t.l}function Su(t,e,n,r,i,o,a,s,u,c,h,l){return(t=new bu(t,e,n,r,i,l)).l=o,t.g=a,t.i=s,t.b=mt(u||null),t.f=c,t.yb(h).toString()}function Au(t){if(this.a=t||J.INTERNAL.reactNative&&J.INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function ku(t){this.b=t,this.a={},this.f=_(this.c,this)}gu.prototype.toString=function(){return this.f?qn(this.a,"v",this.f):nr(this.a.b,"v"),this.b?qn(this.a,"eid",this.b):nr(this.a.b,"eid"),this.c.length?qn(this.a,"fw",this.c.join(",")):nr(this.a.b,"fw"),this.a.toString()},bu.prototype.yb=function(t){return this.h=t,this},bu.prototype.toString=function(){if(this.v){var t=Gn(this.v.url);t=Kn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Kn("https",this.u,null,"/__/auth/handler");if(qn(t,"apiKey",this.s),qn(t,"appName",this.c),qn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=J.app(this.c).auth().la()}catch(ke){n=null}for(var r in e.ob=n,qn(t,"providerId",this.a.providerId),e=qr((n=this.a).Ib))e[r]=e[r].toString();r=n.Qc,e=mt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),vt(e)||qn(t,"customParameters",jr(e))}if("function"===typeof this.a.Qb&&((n=this.a.Qb()).length&&qn(t,"scopes",n.join(","))),this.l?qn(t,"redirectUrl",this.l):nr(t.b,"redirectUrl"),this.g?qn(t,"eventId",this.g):nr(t.b,"eventId"),this.i?qn(t,"v",this.i):nr(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Bn(t,a)&&qn(t,a,this.b[a]);return this.h?qn(t,"tid",this.h):nr(t.b,"tid"),this.f?qn(t,"eid",this.f):nr(t.b,"eid"),(a=wu(this.c)).length&&qn(t,"fw",a.join(",")),t.toString()},(t=_u.prototype).Ob=function(t,e,n){var r=new A("popup-closed-by-user"),i=new A("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return Tu(t).then((function(){return function(t,e){return t.rb.then((function(){return new Ie((function(n){t.a.send(e.type,e,n,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&"undefined"!==typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&gr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new Ie((function(e){return function n(){Rn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Rn(n).then((function(){e(r)}))}))},t.Xb=function(){var t=Pr();return!Vr(t)&&!Kr(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,a,s){if(!t)return De(new A("popup-blocked"));if(a&&!Vr())return this.ma().o((function(e){gr(t),i(e)})),r(),Re();this.a||(this.a=Iu(Eu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw gr(t),i(e),e}));return r(),e})).then((function(){(Ho(n),a)||vr(Su(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Nb=function(t,e,n,r){this.a||(this.a=Iu(Eu(this)));var i=this;return this.a.then((function(){Ho(e),vr(Su(i.s,i.g,i.b,t,e,dr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return Tu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new A("network-request-failed")}))},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){Y(this.h,(function(e){return e==t}))},(t=Au.prototype).get=function(t){return Re(this.a.getItem(t)).then((function(t){return t&&Br(t)}))},t.set=function(t,e){return Re(this.a.setItem(t,jr(e)))},t.U=function(t){return Re(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var Nu,Cu=[];function Ru(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),"undefined"===typeof t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Du(t){this.a=t}function Ou(t){this.c=t,this.b=!1,this.a=[]}function Pu(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return De(Error("connection_unavailable"));var h=r?800:50,l="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Ie((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),"undefined"!==typeof t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return xu(t,c),e})).o((function(e){throw xu(t,c),e}))}function xu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Y(t.a,(function(t){return t==e}))}}function Lu(){if(!Vu())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Sr()&&self?(this.v=function(){var t=Sr()?self:null;if(K(Cu,(function(n){n.b==t&&(e=n)})),!e){var e=new ku(t);Cu.push(e)}return e}(),Ru(this.v,"keyChanged",(function(e,n){return Ku(t).then((function(e){return 0<e.length&&K(t.a,(function(t){t(e)})),{keyProcessed:X(e,n.key)}}))})),Ru(this.v,"ping",(function(){return Re(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?Re().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Re(null)}().then((function(e){(t.h=e)&&(t.g=new Ou(new Du(e)),Pu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&X(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Mu(t){return new Ie((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Ie((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Mu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Uu(t){return t.i||(t.i=Mu(t)),t.i}function Fu(t,e){var n=0;return new Ie((function r(i,o){Uu(t).then(e).then(i).o((function(e){if(!(3<++n))return Uu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Vu(){try{return!!s.indexedDB}catch(va){return!1}}function ju(t){return t.objectStore("firebaseLocalStorage")}function qu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Bu(t){return new Ie((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Gu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Pu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Re()}function Ku(t){return Uu(t).then((function(t){var e=ju(qu(t,!1));return e.getAll?Bu(e.getAll()):new Ie((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=mr(t.c,n),t.c=n}return r}))}function Hu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function zu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Re().then((function(){if(Vu()){var t=Gr(),r="__sak"+t;return Nu||(Nu=new Lu),(n=Nu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){K(e.a,(function(e){e(t)}))})),t}))}function Wu(){this.a={},this.type="inMemory"}function Ju(){if(!function(){var t="Node"==Ar();if(!(t=Xu()||t&&J.INTERNAL.node&&J.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Ar())throw new A("internal-error","The LocalStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Xu()||J.INTERNAL.node.localStorage,this.type="localStorage"}function Xu(){try{var t=s.localStorage,e=Gr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Qu(){this.type="nullStorage"}function Yu(){if(!function(){var t="Node"==Ar();if(!(t=$u()||t&&J.INTERNAL.node&&J.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Ar())throw new A("internal-error","The SessionStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=$u()||J.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function $u(){try{var t=s.sessionStorage,e=Gr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Zu(){var t={};t.Browser=nc,t.Node=rc,t.ReactNative=ic,t.Worker=oc,this.a=t[Ar()]}ku.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];K(r,(function(e){i.push(Re().then((function(){return e(t.origin,t.data.data)})))})),Pe(i).then((function(r){var i=[];K(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),K(i,(function(t){for(var e in t)"undefined"===typeof t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Du.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Ou.prototype.close=function(){for(;0<this.a.length;)xu(this,this.a[0]);this.b=!0},(t=Lu.prototype).set=function(t,e){var n=this,r=!1;return Fu(this,(function(e){return Bu((e=ju(qu(e,!0))).get(t))})).then((function(i){return Fu(n,(function(o){if(o=ju(qu(o,!0)),i)return i.value=e,Bu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Bu(o.add(a))}))})).then((function(){return n.c[t]=e,Gu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Fu(this,(function(e){return Bu(ju(qu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Fu(this,(function(r){return n=!0,e.b++,Bu(ju(qu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Gu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Ku(t).then((function(e){0<e.length&&K(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Hu(t),e()}(this),this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t})),0==this.a.length&&Hu(this)},(t=zu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t}))},(t=Wu.prototype).get=function(t){return Re(this.a[t])},t.set=function(t,e){return this.a[t]=e,Re()},t.U=function(t){return delete this.a[t],Re()},t.ca=function(){},t.ia=function(){},(t=Ju.prototype).get=function(t){var e=this;return Re().then((function(){return Br(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Re().then((function(){var r=jr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Re().then((function(){e.a.removeItem(t)}))},t.ca=function(t){s.window&&pn(s.window,"storage",t)},t.ia=function(t){s.window&&mn(s.window,"storage",t)},(t=Qu.prototype).get=function(){return Re(null)},t.set=function(){return Re()},t.U=function(){return Re()},t.ca=function(){},t.ia=function(){},(t=Yu.prototype).get=function(t){var e=this;return Re().then((function(){return Br(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Re().then((function(){var r=jr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Re().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var tc,ec,nc={F:Ju,bb:Yu},rc={F:Ju,bb:Yu},ic={F:Au,bb:Qu},oc={F:Ju,bb:Qu},ac={rd:"local",NONE:"none",td:"session"};function sc(){var t=!(Kr(Pr())||!Er()),e=Vr(),n=Lr();this.m=t,this.h=e,this.l=n,this.a={},tc||(tc=new Zu),t=tc;try{this.g=!pr()&&Xr()||!s.indexedDB?new t.a.F:new zu(Sr()?new Wu:new t.a.F)}catch(r){this.g=new Wu,this.h=!0}try{this.i=new t.a.bb}catch(r){this.i=new Wu}this.v=new Wu,this.f=_(this.Yb,this),this.b={}}function uc(){return ec||(ec=new sc),ec}function cc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function hc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function lc(t,e,n){return n=hc(e,n),"local"==e.F&&(t.b[n]=null),cc(t,e.F).U(n)}function fc(t){t.c&&(clearInterval(t.c),t.c=null)}function pc(t){this.a=t,this.b=uc()}(t=sc.prototype).get=function(t,e){return cc(this,t.F).get(hc(t,e))},t.set=function(t,e,n){var r=hc(t,n),i=this,o=cc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=hc(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),vt(this.a)&&(cc(this,"local").ca(this.f),this.h||(pr()||!Xr())&&s.indexedDB||!this.l||function(t){fc(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new en({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=hc(t,e),this.a[t]&&(Y(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(cc(this,"local").ia(this.f),fc(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!==typeof t.a.a?cc(this,"local").ia(this.f):fc(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"===typeof t.a.a)return;var o=this;n=function(){"undefined"===typeof t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.mb(e))},Xt&&ue&&10==ue&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else K(t,_(this.mb,this))},t.mb=function(t){this.a[t]&&K(this.a[t],(function(t){t()}))};var dc,vc={name:"authEvent",F:"local"};function mc(){this.a=uc()}function yc(t,e){this.b=gc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===dc&&(dc=s.Int32Array?new Int32Array(Sc):Sc),this.reset()}E(yc,(function(){this.b=-1}));for(var gc=64,bc=gc-1,wc=[],_c=0;_c<bc;_c++)wc[_c]=0;var Ic=$(128,wc);function Tc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|dc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function Ec(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"===typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Tc(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Tc(t),i=0)}}t.c=i,t.g+=n}yc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):Z(this.h)};var Sc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ac(){yc.call(this,8,kc)}E(Ac,yc);var kc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Nc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new mc,this.g=new pc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Cc(t){return new A("invalid-cordova-configuration",t)}function Rc(t){var e=new Ac;Ec(e,t),t=[];var n=8*e.g;56>e.c?Ec(e,Ic,56-e.c):Ec(e,Ic,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Tc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return z(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Dc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Oc(t){return t.f||(t.f=t.ma().then((function(){return new Ie((function(e){t.Ea((function n(r){return e(r),t.Sa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Pc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ho(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"===typeof(o=Br(Bn(o=Gn(i),"firebaseError")||null))?k(o):null)?new zo(r.c,r.b,null,null,o,null,r.T()):new zo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Dc(t,i)}))}var n=new zo("unknown",null,null,null,new A("no-auth-event")),r=!1,i=Rn(500).then((function(){return Pc(t).then((function(){r||Dc(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(xr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"===typeof o)try{o(t)}catch(ke){console.error(ke)}},Qo||(Qo=new Jo),function(t){var e=Qo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"===typeof(t=xr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Pc(t){var e=null;return function(t){return t.b.get(vc,t.a).then((function(t){return Wo(t)}))}(t.g).then((function(n){return e=n,lc((n=t.g).b,vc,n.a)})).then((function(){return e}))}function xc(t){this.a=t,this.b=uc()}(t=Nc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(Tr(void 0)?Ir().then((function(){return new Ie((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):De(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof xr("universalLinks.subscribe",s))throw Cc("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof xr("BuildInfo.packageName",s))throw Cc("cordova-plugin-buildinfo is not installed");if("function"!==typeof xr("cordova.plugins.browsertab.openUrl",s))throw Cc("cordova-plugin-browsertab is not installed");if("function"!==typeof xr("cordova.InAppBrowser.open",s))throw Cc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new A("cordova-not-ready")}))},t.Ob=function(t,e){return e(new A("operation-not-supported-in-this-environment")),Re()},t.Mb=function(){return De(new A("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return De(new A("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,h=null;return this.c=Re().then((function(){return Ho(e),Oc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new zo(e,r,null,o,new A("no-auth-event"),null,i),u=xr("BuildInfo.packageName",s);if("string"!==typeof u)throw new A("invalid-cordova-configuration");var c=xr("BuildInfo.displayName",s),h={};if(Pr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Pr().toLowerCase().match(/android/))return De(new A("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=Rc(o),h.sessionId=o;var l=Su(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(vc,a.w(),e)})).then((function(){var e=xr("cordova.plugins.browsertab.isAvailable",s);if("function"!==typeof e)throw new A("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!==typeof(n=xr("cordova.plugins.browsertab.openUrl",s)))throw new A("invalid-cordova-configuration");n(l)}else{if("function"!==typeof(n=xr("cordova.InAppBrowser.open",s)))throw new A("invalid-cordova-configuration");e=Pr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Ie((function(t,e){u=function(){var e=xr("cordova.plugins.browsertab.close",s);return t(),"function"===typeof e&&e(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=Rn(2e3).then((function(){e(new A("redirect-cancelled-by-user"))})))},h=function(){Wr()&&c()},o.addEventListener("resume",c,!1),Pr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Pc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),u&&i.Sa(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Oc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new zo("unknown",null,null,null,new A("no-auth-event")),t(e))}))},t.Sa=function(t){Y(this.b,(function(e){return e==t}))};var Lc={name:"pendingRedirect",F:"session"};function Mc(t){return lc(t.b,Lc,t.a)}function Uc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=_(this.s,this),this.b=new $c,this.C=new rh,this.g=new xc(Qc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Fc(this.D,this.v,this.m,N,this.J)}function Fc(t,e,n,r,i){var o=J.SDK_VERSION||null;return Tr()?new Nc(t,e,n,o,r,i):new _u(t,e,n,o,r,i)}function Vc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function jc(t){t.a.Xb()&&Vc(t).o((function(e){var n=new zo("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));zc(e)&&t.s(n)})),t.a.Tb()||Zc(t.b)}function qc(t,e){X(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Lc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Mc(t.g).then((function(){Vc(t).o((function(e){var n=new zo("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));zc(e)&&t.s(n)}))})):jc(t)})).o((function(){jc(t)}))}function Bc(t,e){Y(t.h,(function(t){return t==e}))}Uc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Fc(this.D,this.v,this.m,null,this.J),this.i={}},Uc.prototype.s=function(t){if(!t)throw new A("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Zc(this.b),e};var Gc=new zr(2e3,1e4),Kc=new zr(3e4,6e4);function Hc(t,e,n,r,i,o,a){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function zc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Wc(t,e,n,r,i){var o;return function(t){return t.b.set(Lc,"pending",t.a)}(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(zc(e))throw new A("operation-not-supported-in-this-environment");return o=e,Mc(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new Ie((function(){})):Mc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function Jc(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),Gc.get())}Uc.prototype.qa=function(){return this.b.qa()};var Xc={};function Qc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Yc(t,e,n,r){var i=Qc(e,n,r);return Xc[i]||(Xc[i]=new Uc(t,e,n,r)),Xc[i]}function $c(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Zc(t){t.g||(t.g=!0,nh(t,!1,null,null))}function th(t){t.g&&!t.i&&nh(t,!1,null,null)}function eh(t,e){if(t.b=function(){return Re(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function nh(t,e,n,r){e?r?function(t,e){if(t.b=function(){return De(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):eh(t,n):eh(t,{user:null}),t.f=[],t.c=[]}function rh(){}function ih(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function oh(t,e){this.a=e,ti(this,"verificationId",t)}function ah(t,e,n,r){return new Bo(t).fb(e,n).then((function(t){return new oh(t,r)}))}function sh(t){var e=Qi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ei(this,{token:t,expirationTime:Jr(1e3*e.exp),authTime:Jr(1e3*e.auth_time),issuedAtTime:Jr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function uh(t,e,n){var r=e&&e[hh];if(!r)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=mt(e),this.g=n,this.c=new lo(null,r),this.b=[];var i=this;K(e[ch]||[],(function(t){(t=oi(t))&&i.b.push(t)})),ti(this,"auth",this.a),ti(this,"session",this.c),ti(this,"hints",this.b)}$c.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},$c.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(nh(this,!0,null,t.a),Re()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){nh(t,s,e,null)})).o((function(e){nh(t,s,null,e)}))}(this,t,e):De(new A("invalid-auth-event")):(nh(this,!1,null,null),Re())}else De(new A("invalid-auth-event"))},$c.prototype.qa=function(){var t=this;return new Ie((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new A("timeout");t.a&&t.a.cancel(),t.a=Rn(Kc.get()).then((function(){t.b||(t.g=!0,nh(t,!0,null,e))}))}(t))}))},rh.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Re()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):De(new A("invalid-auth-event"))}else De(new A("invalid-auth-event"))},oh.prototype.confirm=function(t){return t=Go(this.verificationId,t),this.a(t)};var ch="mfaInfo",hh="mfaPendingCredential";function lh(t,e,n,r){A.call(this,"multi-factor-auth-required",r,e),this.b=new uh(t,e,n),ti(this,"resolver",this.b)}function fh(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new lh(e,t.serverResponse,n,t.message)}catch(r){}return null}function ph(){}function dh(t){ti(this,"factorId",t.fa),this.a=t}function vh(t){if(dh.call(this,t),this.a.fa!=Bo.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function mh(t,e){for(var n in tn.call(this,t),e)this[n]=e[n]}function yh(t,e){this.a=t,this.b=[],this.c=_(this.yc,this),pn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&K(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ui]=t.uid),t.displayName&&(r[ai]=t.displayName),t.enrollmentTime&&(r[si]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ci]=t.phoneNumber);try{e=new hi(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),gh(this,n)}function gh(t,e){t.b=e,ti(t,"enrolledFactors",e)}function bh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function wh(t,e){t.stop(),t.b=Rn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return Wr()||!t?Re():new Ie((function(n){e=function(){Wr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){wh(t,!0)})).o((function(e){t.i(e)&&wh(t,!1)}))}function _h(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function Ih(t,e){"undefined"===typeof e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function Th(t,e){t.b=Xi(e[os]||""),t.a=e.refreshToken,Ih(t,"undefined"!==typeof(e=e.expiresIn)?Number(e):void 0)}function Eh(t,e){return function(t,e){return new Ie((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ds(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(fu(t)):t.access_token&&t.refresh_token?n(t):r(new A("internal-error")):r(new A("network-request-failed"))}),"POST",er(e).toString(),t.g,t.m.get()):r(new A("internal-error"))}))}(t.f,e).then((function(e){return t.b=Xi(e.access_token),t.a=e.refresh_token,Ih(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function Sh(t,e){this.a=t||null,this.b=e||null,ei(this,{lastSignInTime:Jr(e||null),creationTime:Jr(t||null)})}function Ah(t,e,n,r,i,o){ei(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function kh(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=J.SDK_VERSION?Or(J.SDK_VERSION):null;this.a=new rs(this.l,O(N),r),t.emulatorConfig&&ls(this.a,t.emulatorConfig),this.b=new _h(this.a),Lh(this,e[os]),Th(this.b,e),ti(this,"refreshToken",this.b.a),Fh(this,n||{}),Sn.call(this),this.R=!1,this.s&&Mr()&&(this.i=Yc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new bh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.aa=_(this.hb,this);var i=this;this.ya=null,this.Oa=function(t){i.wa(t.h)},this.ja=null,this.Aa=function(t){ls(i.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){Rh(i,t.f)},this.ba=null,this.O=new yh(this,n),ti(this,"multiFactor",this.O)}function Nh(t,e){t.ja&&mn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&pn(e,"languageCodeChanged",t.Oa)}function Ch(t,e){t.X&&mn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&pn(e,"emulatorConfigChanged",t.Aa)}function Rh(t,e){t.$=e,ps(t.a,J.SDK_VERSION?Or(J.SDK_VERSION,t.$):null)}function Dh(t,e){t.ba&&mn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&pn(e,"frameworkChanged",t.Ba)}function Oh(t){try{return J.app(t.m).auth()}catch(e){throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Ph(t){t.D||t.u.b||(t.u.start(),mn(t,"tokenChanged",t.aa),pn(t,"tokenChanged",t.aa))}function xh(t){mn(t,"tokenChanged",t.aa),t.u.stop()}function Lh(t,e){t.za=e,ti(t,"_lat",e)}function Mh(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Pe(e).then((function(){return t}))}function Uh(t){t.i&&!t.R&&(t.R=!0,qc(t.i,t))}function Fh(t,e){ei(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Sh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Vh(){}function jh(t){return Re().then((function(){if(t.D)throw new A("app-deleted")}))}function qh(t){return z(t.providerData,(function(t){return t.providerId}))}function Bh(t,e){e&&(Gh(t,e.providerId),t.providerData.push(e))}function Gh(t,e){Y(t.providerData,(function(t){return t.providerId==e}))}function Kh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&ti(t,e,n)}function Hh(t,e){t!=e&&(ei(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?ti(t,"metadata",function(t){return new Sh(t.a,t.b)}(e.metadata)):ti(t,"metadata",new Sh),K(e.providerData,(function(e){Bh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),ti(t,"refreshToken",t.b.a),gh(t.O,e.O.b))}function zh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return hu(t.a,qs,{idToken:e}).then(_(t.Kc,t))}(t,e).then((function(){return n||Kh(t,"isAnonymous",!1),e}))}))}function Wh(t,e){e[os]&&t.za!=e[os]&&(Th(t.b,e),t.dispatchEvent(new mh("tokenChanged")),Lh(t,e[os]),Kh(t,"refreshToken",t.b.a))}function Jh(t,e){return zh(t).then((function(){if(X(qh(t),e))return Mh(t).then((function(){throw new A("provider-already-linked")}))}))}function Xh(t,e,n){return ni({user:t,credential:Ko(e),additionalUserInfo:e=eo(e),operationType:n})}function Qh(t,e){return Wh(t,e),t.reload().then((function(){return t}))}function Yh(t,e,n,r,i){if(!Mr())return De(new A("operation-not-supported-in-this-environment"));if(t.h&&!i)return De(t.h);var o=to(n.providerId),a=Gr(t.uid+":::"),s=null;(!Vr()||Er())&&t.s&&n.isOAuthProvider&&(s=Su(t.s,t.l,t.m,e,n,null,a,J.SDK_VERSION||null,null,null,t.tenantId));var u=br(s,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Zh(t),!i)return t.I().then((function(){}))})).then((function(){return Hc(t.i,u,e,n,a,!!s,t.tenantId)})).then((function(){return new Ie((function(n,r){t.na(e,null,new A("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Jc(t.i,t,e,u,a)}))})).then((function(t){return u&&gr(u),t?ni(t):null})).o((function(t){throw u&&gr(u),t})),tl(t,r,i)}function $h(t,e,n,r,i){if(!Mr())return De(new A("operation-not-supported-in-this-environment"));if(t.h&&!i)return De(t.h);var o=null,a=Gr(t.uid+":::");return r=r().then((function(){if(Zh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Mh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(rl,t.w(),e.a)),e})).then((function(){return Wc(t.i,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return il(t.ha);throw o})).then((function(){if(o)throw o})),tl(t,r,i)}function Zh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new A("internal-error");throw new A("auth-domain-config-required")}}function tl(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),De(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new mh("userInvalidated")),t.h=e),e}))}(t,e,n);return t.J.push(r),r.oa((function(){Q(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=fh(e.w(),Oh(t),_(t.jc,t))),n||e}))}function el(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[os]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new kh(e,n,t);return t.providerData&&K(t.providerData,(function(t){t&&Bh(i,ni(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function nl(t){this.a=t,this.b=uc()}uh.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=mt(e.f);return delete n[ch],delete n[hh],gt(n,t),e.g(n)}))},E(lh,A),ph.prototype.sb=function(t,e,n){return e.type==fo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),gt(n,{phoneVerificationInfo:qo(t.a)}),hu(e,Vs,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return gt(n={mfaPendingCredential:n},{phoneVerificationInfo:qo(t.a)}),hu(e,js,n)}))}(this,t,e)},E(dh,ph),E(vh,dh),E(mh,tn),(t=yh.prototype).yc=function(t){gh(this,function(t){var e=[];return K(t.mfaInfo||[],(function(t){(t=oi(t))&&e.push(t)})),e}(t.hd))},t.Rb=function(){return this.a.I().then((function(t){return new lo(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return Wh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"===typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return hu(r,cu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=H(e.b,(function(t){return t.uid!=n}));return gh(e,r),Wh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:z(this.b,(function(t){return t.w()}))}}},bh.prototype.start=function(){this.a=this.c,wh(this,!0)},bh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},_h.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},_h.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?De(new A("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?Eh(this,{grant_type:"refresh_token",refresh_token:this.a}):Re(null):Re({accessToken:this.b.toString(),refreshToken:this.a})},Sh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(kh,Sn),kh.prototype.wa=function(t){this.ya=t,hs(this.a,t)},kh.prototype.la=function(){return this.ya},kh.prototype.Ga=function(){return Z(this.$)},kh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},ti(kh.prototype,"providerId","firebase"),(t=kh.prototype).reload=function(){var t=this;return tl(this,jh(this).then((function(){return zh(t).then((function(){return Mh(t)})).then(Vh)})))},t.oc=function(t){return this.I(t).then((function(t){return new sh(t)}))},t.I=function(t){var e=this;return tl(this,jh(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new A("internal-error");return t.accessToken!=e.za&&(Lh(e,t.accessToken),e.dispatchEvent(new mh("tokenChanged"))),Kh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new A("internal-error");Fh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?z(t,(function(t){return new Ah(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Bh(this,e[n]);Kh(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new mh("userReloaded",{hd:t}))},t.Lc=function(t){return $r("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return tl(this,t.c(this.a,this.uid).then((function(t){return Wh(e,t),n=Xh(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return $r("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return tl(this,Jh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Xh(e,t,"link"),Qh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return tl(this,Jh(this,"phone").then((function(){return ah(Oh(n),t,e,_(n.qb,n))})))},t.Mc=function(t,e){var n=this;return tl(this,Re().then((function(){return ah(Oh(n),t,e,_(n.tb,n))})),!0)},t.Bb=function(t){var e=this;return tl(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Wh(e,t),e.reload()})))},t.ed=function(t){var e=this;return tl(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Wh(e,t),e.reload()})))},t.Cb=function(t){var e=this;return tl(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Wh(e,t),e.reload()})))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return jh(this);var e=this;return tl(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Wh(e,t),Kh(e,"displayName",t.displayName||null),Kh(e,"photoURL",t.photoUrl||null),K(e.providerData,(function(t){"password"===t.providerId&&(ti(t,"displayName",e.displayName),ti(t,"photoURL",e.photoURL))})),Mh(e)})).then(Vh))},t.cd=function(t){var e=this;return tl(this,zh(this).then((function(n){return X(qh(e),t)?function(t,e,n){return hu(t,Ms,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return K(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),K(qh(e),(function(t){n[t]||Gh(e,t)})),n[Bo.PROVIDER_ID]||ti(e,"phoneNumber",null),Mh(e)})):Mh(e).then((function(){throw new A("no-such-provider")}))})))},t.delete=function(){var t=this;return tl(this,this.I().then((function(e){return hu(t.a,Ls,{idToken:e})})).then((function(){t.dispatchEvent(new mh("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");Nh(t,null),Ch(t,null),Dh(t,null),t.J=[],t.D=!0,xh(t),ti(t,"refreshToken",null),t.i&&Bc(t.i,t)}))},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?_(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?_(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?_(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?_(this.Lb,this):null},t.Ec=function(t){var e=this;return Yh(this,"linkViaPopup",t,(function(){return Jh(e,t.providerId).then((function(){return Mh(e)}))}),!1)},t.Nc=function(t){return Yh(this,"reauthViaPopup",t,(function(){return Re()}),!0)},t.Fc=function(t){var e=this;return $h(this,"linkViaRedirect",t,(function(){return Jh(e,t.providerId)}),!1)},t.Oc=function(t){return $h(this,"reauthViaRedirect",t,(function(){return Re()}),!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return tl(this,this.I().then((function(n){return Ns(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Xh(i,t,"link"),Qh(i,t)})).then((function(){return o})))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return tl(this,Re().then((function(){return mo(Cs(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Xh(i,t,"reauthenticate"),Wh(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.ub=function(t){var e=this,n=null;return tl(this,this.I().then((function(e){return n=e,"undefined"===typeof t||vt(t)?{}:Ki(new xi(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Eb=function(t,e){var n=this,r=null;return tl(this,this.I().then((function(t){return r=t,"undefined"===typeof e||vt(e)?{}:Ki(new xi(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return tl(this,t=mo(Re(t),n.uid).then((function(t){return e=Xh(n,t,"reauthenticate"),Wh(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&gt(t,this.metadata.w()),K(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),gt(t,this.O.w()),t};var rl={name:"redirectUser",F:"session"};function il(t){return lc(t.b,rl,t.a)}function ol(t){this.a=t,this.b=uc(),this.c=null,this.f=function(t){var e=ul("local"),n=ul("session"),r=ul("none");return function(t,e,n){var r=hc(e,n),i=cc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Br(s.localStorage.getItem(r))}catch(ke){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(sl,t.a).then((function(t){return t?ul(t):e}))}))}))})).then((function(e){return t.c=e,al(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(ul("local"),this.a,_(this.g,this))}function al(t,e){var n,r=[];for(n in ac)ac[n]!==e&&r.push(lc(t.b,ul(ac[n]),t.a));return r.push(lc(t.b,sl,t.a)),function(t){return new Ie((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Oe(t[s],I(o,s),a);else e(i)}))}(r)}ol.prototype.g=function(){var t=this,e=ul("local");fl(this,(function(){return Re().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return al(t,"local").then((function(){t.c=e}))}))}))};var sl={name:"persistence",F:"session"};function ul(t){return{name:"authUser",F:t}}function cl(t,e){return fl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function hl(t){return fl(t,(function(){return lc(t.b,t.c,t.a)}))}function ll(t,e,n){return fl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),el(t||{})}))}))}function fl(t,e){return t.f=t.f.then(e,e),t.f}function pl(t){if(this.l=!1,ti(this,"settings",new ih),ti(this,"app",t),!Il(this).options||!Il(this).options.apiKey)throw new A("invalid-api-key");t=J.SDK_VERSION?Or(J.SDK_VERSION):null,this.a=new rs(Il(this).options&&Il(this).options.apiKey,O(N),t),this.R=[],this.s=[],this.O=[],this.hb=J.INTERNAL.createSubscribe(_(this.zc,this)),this.X=void 0,this.bc=J.INTERNAL.createSubscribe(_(this.Ac,this)),wl(this,null),this.i=new ol(Il(this).options.apiKey+":"+Il(this).name),this.D=new nl(Il(this).options.apiKey+":"+Il(this).name),this.$=Al(this,function(t){var e=Il(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(rl,t.a).then((function(t){return t&&e&&(t.authDomain=e),el(t||{})}))}(t.D,Il(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),il(t.D)}));return Al(t,e)}(t).then((function(){return ll(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return cl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:hl(t.i)}))):null})).then((function(e){wl(t,e||null)}));return Al(t,n)}(this)),this.h=Al(this,function(t){return t.$.then((function(){return gl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(ul("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=_(this.Zc,this),this.Ba=_(this.da,this),this.ya=_(this.mc,this),this.za=_(this.wc,this),this.Aa=_(this.xc,this),this.b=null,function(t){var e=Il(t).options.authDomain,n=Il(t).options.apiKey;e&&Mr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Yc(e,n,Il(t).name,t.P),qc(t.b,t),Tl(t)&&Uh(Tl(t)),t.m){Uh(t.m);var r=t.m;r.wa(t.la()),Nh(r,t),Rh(r=t.m,t.J),Dh(r,t),ls((r=t.m).a,t.P),Ch(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Gc,this),this.u=0,Sn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=Gn(this.P.url);t=ni({protocol:t.c,host:t.a,port:t.g,options:ni({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function dl(t){tn.call(this,"languageCodeChanged"),this.h=t}function vl(t){tn.call(this,"emulatorConfigChanged"),this.c=t}function ml(t){tn.call(this,"frameworkChanged"),this.f=t}function yl(t){return t.Oa||De(new A("auth-domain-config-required"))}function gl(t){if(!Mr())return De(new A("operation-not-supported-in-this-environment"));var e=yl(t).then((function(){return t.b.qa()})).then((function(t){return t?ni(t):null}));return Al(t,e)}function bl(t,e){var n={};return n.apiKey=Il(t).options.apiKey,n.authDomain=Il(t).options.authDomain,n.appName=Il(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return function(t,e,n,r){var i=new kh(t,e);return n&&(i.ha=n),r&&Rh(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return Tl(t)&&e.uid==Tl(t).uid?(Hh(Tl(t),e),t.da(e)):(wl(t,e),Uh(e),t.da(e))})).then((function(){Sl(t)}))}function wl(t,e){Tl(t)&&(function(t,e){Y(t.S,(function(t){return t==e}))}(Tl(t),t.Ba),mn(Tl(t),"tokenChanged",t.ya),mn(Tl(t),"userDeleted",t.za),mn(Tl(t),"userInvalidated",t.Aa),xh(Tl(t))),e&&(e.S.push(t.Ba),pn(e,"tokenChanged",t.ya),pn(e,"userDeleted",t.za),pn(e,"userInvalidated",t.Aa),0<t.u&&Ph(e)),ti(t,"currentUser",e),e&&(e.wa(t.la()),Nh(e,t),Rh(e,t.J),Dh(e,t),ls(e.a,t.P),Ch(e,t))}function _l(t,e){var n=null,r=null;return Al(t,e.then((function(e){return n=Ko(e),r=eo(e),bl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=fh(e.w(),t,_(t.kc,t))),n||e})).then((function(){return ni({user:Tl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function Il(t){return t.app}function Tl(t){return t.currentUser}function El(t){return Tl(t)&&Tl(t)._lat||null}function Sl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](El(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](El(t))}}function Al(t,e){return t.R.push(e),e.oa((function(){Q(t.R,e)})),e}function kl(){}function Nl(){this.a={},this.b=1e12}ol.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new A("invalid-persistence-type"),n=new A("unsupported-persistence-type");t:{for(r in ac)if(ac[r]==t){var r=!0;break t}r=!1}if(!r||"string"!==typeof t)throw e;switch(Ar()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Vu()&&"none"!==t)throw n;break;default:if(!Lr()&&"none"!==t)throw n}}(t),fl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,al(n,t)})).then((function(){if(n.c=ul(t),e)return n.b.set(n.c,e,n.a)})):Re()}))},E(pl,Sn),E(dl,tn),E(vl,tn),E(ml,tn),(t=pl.prototype).xb=function(t){return Al(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,hs(this.a,this.aa),this.dispatchEvent(new dl(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new A("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&Ir().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,ls(this.a,this.P),this.dispatchEvent(new vl(this.P))}},t.Gc=function(t){this.J.push(t),ps(this.a,J.SDK_VERSION?Or(J.SDK_VERSION,this.J):null),this.dispatchEvent(new ml(this.J))},t.Ga=function(){return Z(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:Il(this).options.apiKey,authDomain:Il(this).options.authDomain,appName:Il(this).name,currentUser:Tl(this)&&Tl(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?_(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return _l(i,ks(i.a,o))}))},t.Xc=function(t){if(!Mr())return De(new A("operation-not-supported-in-this-environment"));var e=this,n=to(t.providerId),r=Gr(),i=null;(!Vr()||Er())&&Il(this).options.authDomain&&t.isOAuthProvider&&(i=Su(Il(this).options.authDomain,Il(this).options.apiKey,Il(this).name,"signInViaPopup",t,null,r,J.SDK_VERSION||null,null,null,this.T(),this.P));var o=br(i,n&&n.ua,n&&n.ta);return Al(this,n=yl(this).then((function(n){return Hc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new Ie((function(t,n){e.na("signInViaPopup",null,new A("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Jc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&gr(o),t?ni(t):null})).o((function(t){throw o&&gr(o),t})))},t.Yc=function(t){if(!Mr())return De(new A("operation-not-supported-in-this-environment"));var e=this;return Al(this,yl(this).then((function(){return function(t){return fl(t,(function(){return t.b.set(sl,t.c.F,t.a)}))}(e.i)})).then((function(){return Wc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.qa=function(){var t=this;return gl(this).then((function(e){return t.b&&th(t.b.b),e})).o((function(e){throw t.b&&th(t.b.b),e}))},t.dd=function(t){if(!t)return De(new A("null-user"));if(this.S!=t.tenantId)return De(new A("tenant-id-mismatch"));var e=this,n={};n.apiKey=Il(this).options.apiKey,n.authDomain=Il(this).options.authDomain,n.appName=Il(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[os]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new kh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Rh(e,r),Hh(e,t),e}(t,n,e.D,e.Ga());return Al(this,this.h.then((function(){if(Il(e).options.apiKey!=t.l)return r.reload()})).then((function(){return Tl(e)&&t.uid==Tl(e).uid?(Hh(Tl(e),t),e.da(t)):(wl(e,r),Uh(r),e.da(r))})).then((function(){Sl(e)})))},t.Ab=function(){var t=this;return Al(this,this.h.then((function(){return t.b&&th(t.b.b),Tl(t)?(wl(t,null),hl(t.i).then((function(){Sl(t)}))):Re()})))},t.Zc=function(){var t=this;return ll(this.i,Il(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=Tl(t)&&e){n=Tl(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Hh(Tl(t),e),Tl(t).I();(Tl(t)||e)&&(wl(t,e),e&&(Uh(e),e.ha=t.D),t.b&&qc(t.b,t),Sl(t))}}))},t.da=function(t){return cl(this.i,t)},t.mc=function(){Sl(this),this.da(Tl(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then((function(){return _l(e,Re(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(Tl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),Al(t,t.h.then((function(){!t.l&&X(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(El(t)))})))}(this,(function(){t.next(Tl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof t?t(Tl(r)):"function"===typeof t.next&&t.next(Tl(r))})),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"===typeof t?t(Tl(r)):"function"===typeof t.next&&t.next(Tl(r))})),this.bc(t,e,n)},t.nc=function(t){var e=this;return Al(this,this.h.then((function(){return Tl(e)?Tl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return _l(e,hu(e.a,iu,{token:t}))})).then((function(t){var n=t.user;return Kh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return _l(n,hu(n.a,ou,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return _l(n,hu(n.a,Ps,{email:t,password:e}))}))},t.$a=function(t){var e=this;return this.h.then((function(){return _l(e,t.ka(e.a))}))},t.Sc=function(t){return $r("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then((function(){var e=Tl(t);if(e&&e.isAnonymous){var n=ni({providerId:null,isNewUser:!1});return ni({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return _l(t,t.a.zb()).then((function(e){var n=e.user;return Kh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return Tl(this)&&Tl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&Tl(this)&&Ph(Tl(this))},t.Pc=function(t){var e=this;K(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&Tl(this)&&xh(Tl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),Al(this,this.h.then((function(){e.l||X(e.s,t)&&t(El(e))})))},t.removeAuthTokenListener=function(t){Y(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(ul("local"),t.a,this.ja),this.b&&(Bc(this.b,this),th(this.b.b)),Promise.resolve()},t.hc=function(t){return Al(this,function(t,e){return hu(t,xs,{identifier:e,continueUri:Ur()?dr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Fo(t)},t.wb=function(t,e){var n=this;return Al(this,Re().then((function(){var t=new xi(e);if(!t.c)throw new A("argument-error",Ui+" must be true when sending sign in link to email");return Ki(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},t.nb=function(t,e){return Al(this,this.a.nb(t,e).then((function(){})))},t.Ra=function(t){return Al(this,this.a.Ra(t).then((function(t){return new li(t)})))},t.jb=function(t){return Al(this,this.a.jb(t).then((function(){})))},t.vb=function(t,e){var n=this;return Al(this,Re().then((function(){return"undefined"===typeof e||vt(e)?{}:Ki(new xi(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.Wc=function(t,e){return Al(this,ah(this,t,e,_(this.$a,this)))},t.Vc=function(t,e){var n=this;return Al(this,Re().then((function(){var r=e||dr(),i=Uo(t,r);if(!(r=Fo(r)))throw new A("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new A("tenant-id-mismatch");return n.$a(i)})))},kl.prototype.render=function(){},kl.prototype.reset=function(){},kl.prototype.getResponse=function(){},kl.prototype.execute=function(){};var Cl=null;function Rl(t,e){return(e=Dl(e))&&t.a[e]||null}function Dl(t){return(t="undefined"===typeof t?1e12:t)?t.toString():null}function Ol(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=he(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():pn(this.f,"click",this.i)}function Pl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function xl(){}function Ll(){}Nl.prototype.render=function(t,e){return this.a[this.b.toString()]=new Ol(t,e),this.b++},Nl.prototype.reset=function(t){var e=Rl(this,t);t=Dl(t),e&&t&&(e.delete(),delete this.a[t])},Nl.prototype.getResponse=function(t){return(t=Rl(this,t))?t.getResponse():null},Nl.prototype.execute=function(t){(t=Rl(this,t))&&t.execute()},Ol.prototype.getResponse=function(){return Pl(this),this.b},Ol.prototype.execute=function(){Pl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},Ol.prototype.delete=function(){Pl(this),this.g=!0,clearTimeout(this.a),this.a=null,mn(this.f,"click",this.i)},ti(xl,"FACTOR_ID","phone"),Ll.prototype.g=function(){return Cl||(Cl=new Nl),Re(Cl)},Ll.prototype.c=function(){};var Ml=null;function Ul(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Fl=new wt(Et,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Vl=new zr(3e4,6e4);Ul.prototype.g=function(t){var e=this;return new Ie((function(n,r){var i=setTimeout((function(){r(new A("network-request-failed"))}),Vl.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new A("internal-error"));delete s[e.a]},Re(Qa(Nt(Fl,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Ul.prototype.c=function(){this.b--};var jl=null;function ql(t,e,n,r,i,o,a){if(ti(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,a?(Ml||(Ml=new Ll),a=Ml):(jl||(jl=new Ul),a=jl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Kl])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Hl],!s.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!he(e)||!this.i&&he(e).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new rs(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Bl];this.a[Bl]=function(t){if(zl(u,t),"function"===typeof c)c(t);else if("string"===typeof c){var e=xr(c,s);"function"===typeof e&&e(t)}};var h=this.a[Gl];this.a[Gl]=function(){if(zl(u,null),"function"===typeof h)h();else if("string"===typeof h){var t=xr(h,s);"function"===typeof t&&t()}}}var Bl="callback",Gl="expired-callback",Kl="sitekey",Hl="size";function zl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Wl(t,e){return t.h.push(e),e.oa((function(){Q(t.h,e)})),e}function Jl(t){if(t.D)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}function Xl(t,e,n){var r=!1;try{this.b=n||J.app()}catch(a){throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new A("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}o=J.SDK_VERSION?Or(J.SDK_VERSION,o):null,ql.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(ke){t=null}return t}),o,O(N),r)}function Ql(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Yl.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");n=Yl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new A("argument-error",t+" failed: "+r)}(t=ql.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Wl(this,Re().then((function(){if(Ur()&&!Sr())return Ir();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,hu(t.s,Ws,{})})).then((function(e){t.a[Kl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Jl(this);var t=this;return Wl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=he(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ce&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Ht(a.name),'"'),a.type){o.push(' type="',Ht(a.type),'"');var s={};gt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=me(i,o),a&&("string"===typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):le(o,a)),2<r.length&&ve(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Jl(this);var t=this;return Wl(this,this.render().then((function(e){return new Ie((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Jl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Jl(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=he(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},E(Xl,ql);var Yl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function $l(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"===typeof t}}}function Zl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"===typeof t}}}function tf(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:v}}function ef(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"===typeof t}}}function nf(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function rf(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function of(t,e){return v(t)&&"string"===typeof t.type&&t.type===e&&"function"===typeof t.Ha}function af(t){return v(t)&&"string"===typeof t.uid}function sf(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function uf(t,e){for(var n in e){var r=e[n].name;t[r]=lf(r,t[n],e[n].j)}}function cf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:I((function(t){return this[t]}),n),set:I((function(t,e,n,r){Ql(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function hf(t,e,n,r){t[e]=lf(e,n,r)}function lf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Ql(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}uf(pl.prototype,{jb:{name:"applyActionCode",j:[$l("code")]},Ra:{name:"checkActionCode",j:[$l("code")]},nb:{name:"confirmPasswordReset",j:[$l("code"),$l("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[$l("email"),$l("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[$l("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[$l("emailLink")]},Hc:{name:"onAuthStateChanged",j:[sf(tf(),ef(),"nextOrObserver"),ef("opt_error",!0),ef("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[sf(tf(),ef(),"nextOrObserver"),ef("opt_error",!0),ef("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[$l("email"),sf(tf("opt_actionCodeSettings",!0),nf(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[$l("email"),tf("actionCodeSettings")]},xb:{name:"setPersistence",j:[$l("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[rf()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[rf()]},Tc:{name:"signInWithCustomToken",j:[$l("token")]},Uc:{name:"signInWithEmailAndPassword",j:[$l("email"),$l("password")]},Vc:{name:"signInWithEmailLink",j:[$l("email"),$l("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[$l("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[sf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof kh)}},nf(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[$l(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[$l("url"),tf("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[$l("code")]}}),cf(pl.prototype,{lc:{name:"languageCode",kb:sf($l(),nf(),"languageCode")},ti:{name:"tenantId",kb:sf($l(),nf(),"tenantId")}}),pl.Persistence=ac,pl.Persistence.LOCAL="local",pl.Persistence.SESSION="session",pl.Persistence.NONE="none",uf(kh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Zl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Zl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[rf()]},qb:{name:"linkWithCredential",j:[rf()]},Dc:{name:"linkWithPhoneNumber",j:[$l("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[rf()]},tb:{name:"reauthenticateWithCredential",j:[rf()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[$l("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[sf(tf("opt_actionCodeSettings",!0),nf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[$l(null,!0)]},cd:{name:"unlink",j:[$l("provider")]},Bb:{name:"updateEmail",j:[$l("email")]},Cb:{name:"updatePassword",j:[$l("password")]},ed:{name:"updatePhoneNumber",j:[rf("phone")]},Db:{name:"updateProfile",j:[tf("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[$l("email"),sf(tf("opt_actionCodeSettings",!0),nf(null,!0),"opt_actionCodeSettings",!0)]}}),uf(Nl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),uf(kl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),uf(Ie.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),cf(ih.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Zl("appVerificationDisabledForTesting")}}),uf(oh.prototype,{confirm:{name:"confirm",j:[$l("verificationCode")]}}),hf(vo,"fromJSON",(function(t){t="string"===typeof t?JSON.parse(t):t;for(var e,n=[Io,Lo,jo,bo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[sf($l(),tf(),"json")]),hf(Mo,"credential",(function(t,e){return new xo(t,e)}),[$l("email"),$l("password")]),uf(xo.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),uf(Ao.prototype,{Ca:{name:"addScope",j:[$l("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(Ao,"credential",ko,[sf($l(),tf(),"token")]),hf(Mo,"credentialWithLink",Uo,[$l("email"),$l("emailLink")]),uf(No.prototype,{Ca:{name:"addScope",j:[$l("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(No,"credential",Co,[sf($l(),tf(),"token")]),uf(Ro.prototype,{Ca:{name:"addScope",j:[$l("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(Ro,"credential",Do,[sf($l(),sf(tf(),nf()),"idToken"),sf($l(),nf(),"accessToken",!0)]),uf(Oo.prototype,{Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(Oo,"credential",Po,[sf($l(),tf(),"token"),$l("secret",!0)]),uf(So.prototype,{Ca:{name:"addScope",j:[$l("scope")]},credential:{name:"credential",j:[sf($l(),sf(tf(),nf()),"optionsOrIdToken"),sf($l(),nf(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),uf(wo.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),uf(yo.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),hf(Bo,"credential",Go,[$l("verificationId"),$l("verificationCode")]),uf(Bo.prototype,{fb:{name:"verifyPhoneNumber",j:[sf($l(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?of(t.session,fo)&&"string"===typeof t.phoneNumber:t.session&&t.multiFactorHint?of(t.session,po)&&af(t.multiFactorHint):t.session&&t.multiFactorUid?of(t.session,po)&&"string"===typeof t.multiFactorUid:!!t.phoneNumber&&"string"===typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]}}),uf(Vo.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),uf(A.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),uf($o.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),uf(Yo.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),uf(lh.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),uf(uh.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),uf(yh.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},$l("displayName",!0)]},bd:{name:"unenroll",j:[sf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:af},$l(),"multiFactorInfoIdentifier")]}}),uf(Xl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),hf(Si,"parseLink",Pi,[$l("link")]),hf(xl,"assertion",(function(t){return new vh(t)}),[rf("phone")]),function(){if("undefined"===typeof J||!J.INTERNAL||!J.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:pi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:fi,VERIFY_AND_CHANGE_EMAIL:di,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:pl,AuthCredential:vo,Error:A};hf(t,"EmailAuthProvider",Mo,[]),hf(t,"FacebookAuthProvider",Ao,[]),hf(t,"GithubAuthProvider",No,[]),hf(t,"GoogleAuthProvider",Ro,[]),hf(t,"TwitterAuthProvider",Oo,[]),hf(t,"OAuthProvider",So,[$l("providerId")]),hf(t,"SAMLAuthProvider",Eo,[$l("providerId")]),hf(t,"PhoneAuthProvider",Bo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof pl)}}]),hf(t,"RecaptchaVerifier",Xl,[sf($l(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),tf("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof J.app.App)}}]),hf(t,"ActionCodeURL",Si,[]),hf(t,"PhoneMultiFactorGenerator",xl,[]),J.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new pl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),J.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.nc,t),addAuthTokenListener:_(t.cc,t),removeAuthTokenListener:_(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),J.registerVersion("@firebase/auth","0.16.6"),J.INTERNAL.extendNamespace({User:kh})}()}.apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});J.apps.length?J.app():J.initializeApp({apiKey:"AIzaSyCpEZeh0B_fiwIWj4CjiTMMFJz53M0RdRc",authDomain:"gallery-app-sample.firebaseapp.com",projectId:"gallery-app-sample",storageBucket:"gallery-app-sample.appspot.com",messagingSenderId:"274679029144",appId:"1:274679029144:web:76f747c8cd977a83425fed"});var zv=J.storage(),Wv=J.firestore(),Jv=J.auth(),Xv=J.firestore.FieldValue.serverTimestamp},6464:function(t,e,n){"use strict";n.r(e);var r=n(6156),i=n(5893),o=n(9514);n(2669);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e.default=function(t){var e=t.Component,n=t.pageProps;return(0,i.jsx)(o.H,{children:(0,i.jsx)(e,s({},n))})}},9514:function(t,e,n){"use strict";n.d(e,{V:function(){return a},H:function(){return s}});var r=n(5893),i=n(7294),o=n(8229),a=(0,i.createContext)(),s=function(t){var e=t.children,n=(0,i.useState)(null),s=n[0],u=n[1],c=(0,i.useState)(!0),h=c[0],l=c[1];return(0,i.useEffect)((function(){o.QK.onAuthStateChanged((function(t){u(t),l(!1)}))}),[]),h?(0,r.jsx)("div",{className:"spinner-container",children:(0,r.jsxs)("div",{className:"lds-ring",children:[(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{})]})}):(0,r.jsx)(a.Provider,{value:{currentUser:s},children:e})}},1780:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(6464)}])},2669:function(){},4155:function(t){var e,n,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"===typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var s,u=[],c=!1,h=-1;function l(){c&&s&&(c=!1,s.length?u=s.concat(u):h=-1,u.length&&f())}function f(){if(!c){var t=a(l);c=!0;for(var e=u.length;e;){for(s=u,u=[];++h<e;)s&&s[h].run();h=-1,e=u.length}s=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function d(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||c||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=d,r.addListener=d,r.once=d,r.off=d,r.removeListener=d,r.removeAllListeners=d,r.emit=d,r.prependListener=d,r.prependOnceListener=d,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},655:function(t,e,n){"use strict";n.d(e,{ZT:function(){return i},pi:function(){return o},_T:function(){return a},mG:function(){return s},Jh:function(){return u},XA:function(){return c},CR:function(){return h},ev:function(){return l}});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function c(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create}},function(t){var e=function(e){return t(t.s=e)};t.O(0,[774,179],(function(){return e(1780),e(2441)}));var n=t.O();_N_E=n}]);